(this["webpackJsonpboxed-expression-editor-showcase"]=this["webpackJsonpboxed-expression-editor-showcase"]||[]).push([[0],{104:function(e,t,n){"use strict";var a=n(79),o=n(0),i=n(32);n.d(t,"BoxedExpressionEditor",(function(){return a.a}));var r=n(4);n.o(r,"DataType")&&n.d(t,"DataType",(function(){return r.DataType})),window.renderBoxedExpressionEditor=function(e,t){i.render(o.createElement(a.a,{expressionDefinition:{selectedExpression:t}}),document.getElementById(e))}},110:function(e,t,n){},111:function(e,t,n){"use strict";var a;!function(e){e.Sum="+",e.Count="#",e.Min="<",e.Max=">"}(a||(a={}))},112:function(e,t){},113:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.Undefined="<Undefined>",e.Any="Any",e.Boolean="boolean",e.Context="context",e.Date="date",e.DateTime="date and time",e.DateTimeDuration="days and time duration",e.Number="number",e.String="string",e.Time="time",e.YearsMonthsDuration="years and months duration"}(a||(a={}))},114:function(e,t){},115:function(e,t){},116:function(e,t,n){"use strict";var a;!function(e){e.Unique="UNIQUE",e.First="FIRST",e.Priority="PRIORITY",e.Any="ANY",e.Collect="COLLECT",e.RuleOrder="RULE ORDER",e.OutputOrder="OUTPUT ORDER"}(a||(a={}))},117:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.Undefined="<Undefined>",e.LiteralExpression="Literal expression",e.Context="Context",e.DecisionTable="Decision Table",e.Relation="Relation",e.Function="Function",e.Invocation="Invocation",e.List="List"}(a||(a={}))},118:function(e,t,n){"use strict";var a,o;n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),function(e){e[e.Full=0]="Full",e[e.OnlyLastLevel=1]="OnlyLastLevel",e[e.None=2]="None"}(a||(a={})),function(e){e[e.ColumnInsertLeft=0]="ColumnInsertLeft",e[e.ColumnInsertRight=1]="ColumnInsertRight",e[e.ColumnDelete=2]="ColumnDelete",e[e.RowInsertAbove=3]="RowInsertAbove",e[e.RowInsertBelow=4]="RowInsertBelow",e[e.RowDelete=5]="RowDelete",e[e.RowClear=6]="RowClear"}(o||(o={}))},119:function(e,t){},142:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return u}));var a=n(0),o=n(16),i=n(156),r=Object(o.a)(Object(o.a)({},i.en),{},{choose:"Choose...",clear:"Clear",columnOperations:{delete:"Delete",insertLeft:"Insert left",insertRight:"Insert right"},columns:"COLUMNS",context:"Context",contextEntry:"CONTEXT ENTRY",dataType:"Data Type",decisionTable:"Decision Table",editContextEntry:"Edit Context Entry",editExpression:"Edit Expression",editRelation:"Edit Relation",function:"Function",invocation:"Invocation",list:"List",literalExpression:"Literal expression",name:"Name",relation:"Relation",rowOperations:{clear:"Clear",delete:"Delete",insertAbove:"Insert above",insertBelow:"Insert below"},rows:"ROWS",selectExpression:"Select expression",selectLogicType:"Select logic type"}),c={locale:"en",dictionary:r},s=new Map([["en",r]]),l=a.createContext({});function u(){return Object(a.useContext)(l)}},165:function(e,t,n){"use strict";n.r(t),n.d(t,"App",(function(){return c}));var a=n(3),o=n(0),i=n(32),r=(n(172),n(104)),c=function(){var e={name:"Expression Name",dataType:r.DataType.Undefined},t=Object(o.useState)(e),n=Object(a.a)(t,2),i=n[0],c=n[1],s={selectedExpression:e};return window.beeApi={resetExpressionDefinition:function(e){return c(e)},broadcastLiteralExpressionDefinition:function(e){return c(e)},broadcastRelationExpressionDefinition:function(e){return c(e)},broadcastContextExpressionDefinition:function(e){return c(e)},broadcastListExpressionDefinition:function(e){return c(e)}},o.createElement("div",{className:"showcase"},o.createElement("div",{className:"boxed-expression"},o.createElement(r.BoxedExpressionEditor,{expressionDefinition:s})),o.createElement("div",{className:"updated-json"},o.createElement("p",{className:"disclaimer"},"\u26a0 Currently, JSON gets updated only for literal expression, relation, context and list logic types"),o.createElement("pre",null,JSON.stringify(i,null,2))))};i.render(o.createElement(c,null),document.getElementById("root"))},172:function(e,t,n){},173:function(e,t,n){},176:function(e,t,n){},177:function(e,t,n){},178:function(e,t,n){},179:function(e,t,n){},180:function(e,t,n){},181:function(e,t,n){},196:function(e,t,n){},205:function(e,t,n){},207:function(e,t,n){},279:function(e,t,n){},28:function(e,t,n){"use strict";var a=n(119);n.o(a,"BoxedExpressionEditorI18nContext")&&n.d(t,"BoxedExpressionEditorI18nContext",(function(){return a.BoxedExpressionEditorI18nContext})),n.o(a,"boxedExpressionEditorDictionaries")&&n.d(t,"boxedExpressionEditorDictionaries",(function(){return a.boxedExpressionEditorDictionaries})),n.o(a,"boxedExpressionEditorI18nDefaults")&&n.d(t,"boxedExpressionEditorI18nDefaults",(function(){return a.boxedExpressionEditorI18nDefaults})),n.o(a,"useBoxedExpressionEditorI18n")&&n.d(t,"useBoxedExpressionEditorI18n",(function(){return a.useBoxedExpressionEditorI18n}));var o=n(142);n.d(t,"BoxedExpressionEditorI18nContext",(function(){return o.a})),n.d(t,"boxedExpressionEditorDictionaries",(function(){return o.b})),n.d(t,"boxedExpressionEditorI18nDefaults",(function(){return o.c})),n.d(t,"useBoxedExpressionEditorI18n",(function(){return o.d}))},282:function(e,t,n){},283:function(e,t,n){},284:function(e,t,n){},285:function(e,t,n){},4:function(e,t,n){"use strict";n(110),n(111);var a=n(112);n.o(a,"DataType")&&n.d(t,"DataType",(function(){return a.DataType})),n.o(a,"LogicType")&&n.d(t,"LogicType",(function(){return a.LogicType})),n.o(a,"TableHeaderVisibility")&&n.d(t,"TableHeaderVisibility",(function(){return a.TableHeaderVisibility})),n.o(a,"TableOperation")&&n.d(t,"TableOperation",(function(){return a.TableOperation}));var o=n(113);n.d(t,"DataType",(function(){return o.a}));var i=n(114);n.o(i,"LogicType")&&n.d(t,"LogicType",(function(){return i.LogicType})),n.o(i,"TableHeaderVisibility")&&n.d(t,"TableHeaderVisibility",(function(){return i.TableHeaderVisibility})),n.o(i,"TableOperation")&&n.d(t,"TableOperation",(function(){return i.TableOperation}));var r=n(115);n.o(r,"LogicType")&&n.d(t,"LogicType",(function(){return r.LogicType})),n.o(r,"TableHeaderVisibility")&&n.d(t,"TableHeaderVisibility",(function(){return r.TableHeaderVisibility})),n.o(r,"TableOperation")&&n.d(t,"TableOperation",(function(){return r.TableOperation}));n(116);var c=n(117);n.d(t,"LogicType",(function(){return c.a}));var s=n(118);n.d(t,"TableHeaderVisibility",(function(){return s.a})),n.d(t,"TableOperation",(function(){return s.b}))},79:function(e,t,n){"use strict";n.d(t,"a",(function(){return te}));n(173);var a=n(3),o=n(0),i=(n(174),n(175),n(176),n(143)),r=n(16),c=(n(177),n(4)),s=(n(178),n(179),n(292)),l=(n(180),n(301)),u=(n(181),function(e){var t=e.children,n=e.arrowPlacement,a=e.body,i=e.title,r=e.appendTo,c=e.className,s=e.hasAutoWidth;return o.createElement(l.a,{"data-ouia-component-id":"expression-popover-menu",className:"popover-menu-selector".concat(c?" "+c:""),hasAutoWidth:s,position:"bottom",distance:0,id:"menu-selector",reference:n,appendTo:r,headerContent:o.createElement("div",{className:"selector-menu-title","data-ouia-component-id":"expression-popover-menu-title"},i),bodyContent:a},t)}),d=n(28),p=n(49),b=n(300),m=n(7),f=n(10),O=o.createContext({}),E="Expression Name",y=function(e){var t,n,i,r,s,l,y=e.children,x=e.appendTo,v=e.arrowPlacement,j=e.title,T=e.nameField,g=e.dataTypeField,C=e.selectedDataType,w=void 0===C?c.DataType.Undefined:C,h=e.selectedExpressionName,R=e.onExpressionUpdate,I=Object(o.useContext)(O),k=Object(d.useBoxedExpressionEditorI18n)().i18n;j=null!==(t=j)&&void 0!==t?t:k.editExpression,T=null!==(n=T)&&void 0!==n?n:k.name,g=null!==(i=g)&&void 0!==i?i:k.dataType,x=null!==(r=null!==(s=x)&&void 0!==s?s:null===(l=I.boxedExpressionEditorRef)||void 0===l?void 0:l.current)&&void 0!==r?r:void 0;var N=Object(o.useState)(!1),L=Object(a.a)(N,2),D=L[0],U=L[1],S=Object(o.useState)(w),H=Object(a.a)(S,2),A=H[0],B=H[1],P=Object(o.useState)(h),V=Object(a.a)(P,2),M=V[0],F=V[1];Object(o.useEffect)((function(){F(h)}),[h]),Object(o.useEffect)((function(){B(w)}),[w]);var z=Object(o.useCallback)((function(e){F(e.target.value),"blur"===e.type&&R({name:e.target.value,dataType:A})}),[A,R]),W=Object(o.useCallback)((function(e,t){U(!1),B(t),R({name:M,dataType:t})}),[M,R]),_=Object(o.useCallback)((function(){return f.map(Object.values(c.DataType),(function(e){return o.createElement(p.a,{key:e,value:e},e)}))}),[]),Y=Object(o.useCallback)((function(e){var t;try{t=new RegExp(e.target.value,"i")}catch(n){return _()}return""!==e.target.value?_().filter((function(e){return t.test(e.props.value)})):_()}),[_]),K=Object(o.useCallback)((function(e){return U(e)}),[]);return o.createElement(u,{title:j,arrowPlacement:v,appendTo:x,body:o.createElement("div",{className:"edit-expression-menu"},o.createElement("div",{className:"expression-name"},o.createElement("label",null,T),o.createElement("input",{type:"text",id:"expression-name","data-ouia-component-id":"edit-expression-name",value:M,onChange:z,onBlur:z,className:"form-control pf-c-form-control",placeholder:E})),o.createElement("div",{className:"expression-data-type"},o.createElement("label",null,g),o.createElement(b.a,{ouiaId:"edit-expression-data-type",variant:m.e.typeahead,typeAheadAriaLabel:k.choose,onToggle:K,onSelect:W,onFilter:Y,isOpen:D,selections:A,hasInlineFilter:!0,inlineFilterPlaceholderText:k.choose},_())))},y)},x=(n(196),n(158)),v=function(e){var t=e.children,n=e.height,a=e.minHeight,i=void 0===a?0:a,r=e.minWidth,c=e.onHorizontalResizeStop,s=e.width,l="100%"===n?0:n,u=Object(o.useMemo)((function(){return o.createElement("div",{className:"pf-c-drawer"},o.createElement("div",{className:"pf-c-drawer__splitter pf-m-vertical"},o.createElement("div",{className:"pf-c-drawer__splitter-handle"})))}),[]),d=Object(o.useCallback)((function(e,t){return c(t.size.width)}),[c]);return o.createElement(x.ResizableBox,{className:"".concat("100%"===n?"height-based-on-content":""),width:s,height:l,minConstraints:[r,i],axis:"x",onResizeStop:d,handle:u},t)},j=function(e){var t=e.uid,n=e.content,i=e.dataType,l=e.name,u=void 0===l?E:l,d=e.onUpdatingNameAndDataType,p=e.isHeadless,b=void 0!==p&&p,m=e.onUpdatingRecursiveExpression,f=e.width,O=Object(o.useState)(u),x=Object(a.a)(O,2),j=x[0],T=x[1],g=Object(o.useState)(i),C=Object(a.a)(g,2),w=C[0],h=C[1],R=Object(o.useState)(n),I=Object(a.a)(R,2),k=I[0],N=I[1],L=Object(o.useState)(f||250),D=Object(a.a)(L,2),U=D[0],S=D[1];Object(o.useEffect)((function(){var e,n,a=Object(r.a)({uid:t,name:j,dataType:w,logicType:c.LogicType.LiteralExpression,content:k},b||250===U?{}:{width:U});b?null===m||void 0===m||m(a):null===(e=window.beeApi)||void 0===e||null===(n=e.broadcastLiteralExpressionDefinition)||void 0===n||n.call(e,a)}),[j,w,k,b,m,U,t]);var H=Object(o.useCallback)((function(e){var t=e.dataType,n=void 0===t?c.DataType.Undefined:t,a=e.name,o=void 0===a?E:a;T(o),h(n),null===d||void 0===d||d(o,n)}),[d]),A=Object(o.useCallback)((function(e){var t=e.target.value;N(t)}),[]),B=Object(o.useCallback)((function(e){return S(e)}),[]),P=Object(o.useCallback)((function(e){return o.createElement(v,{width:U,height:40,minWidth:250,minHeight:40,onHorizontalResizeStop:B},e)}),[U,B]),V=Object(o.useMemo)((function(){return o.createElement("div",{className:"literal-expression-header"},P(o.createElement(y,{selectedExpressionName:j,selectedDataType:w,onExpressionUpdate:H},o.createElement("div",{className:"expression-info"},o.createElement("p",{className:"expression-name pf-u-text-truncate"},j),o.createElement("p",{className:"expression-data-type pf-u-text-truncate"},"(",w,")")))))}),[w,j,H,P]),M=Object(o.useMemo)((function(){return o.createElement(s.a,{defaultValue:k,onBlur:A,"aria-label":"literal-expression-content"})}),[k,A]);return o.createElement("div",{className:"literal-expression"},b?null:V,o.createElement("div",{className:"literal-expression-body"},M))},T=(n(205),n(206),n(9)),g=(n(207),n(94)),C=n(293),w=n(299),h=n(305),R=n(298),I=n(302),k=n(294),N=function(e){var t=e.tableInstance,n=e.tableColumns,a=e.setTableColumns,i=e.setTableRows,r=e.editColumnLabel,s=e.headerVisibility,l=void 0===s?c.TableHeaderVisibility.Full:s,u=e.getColumnKey,d=Object(o.useCallback)((function(e,t){return i((function(n){return f.map(n,(function(n){var a=n[e];return delete n[e],n[t]=a,n}))}))}),[i]),p=Object(o.useCallback)((function(e){return function(t){var o=t.name,i=void 0===o?"":o,r=t.dataType,s=void 0===r?c.DataType.Undefined:r,l=n[e].accessor;a((function(t){var n=Object(T.a)(t);return n[e].label=i,n[e].accessor=i,n[e].dataType=s,n})),i!==l&&d(l,i)}}),[a,n,d]),b=Object(o.useCallback)((function(e,t){return o.createElement(I.a,Object.assign({},e.getHeaderProps(),{className:"fixed-column no-clickable-cell",key:"".concat(u(e),"-").concat(t)}),o.createElement("div",{className:"header-cell","data-ouia-component-type":"expression-column-header"},e.label))}),[u]),m=Object(o.useCallback)((function(e){return o.createElement("div",{className:"header-cell-info","data-ouia-component-type":"expression-column-header-cell-info"},o.createElement("p",{className:"pf-u-text-truncate"},e.label),e.dataType?o.createElement("p",{className:"pf-u-text-truncate data-type"},"(",e.dataType,")"):null)}),[]),O=Object(o.useCallback)((function(e,n){return o.createElement(I.a,Object.assign({},e.getHeaderProps(),t.getThProps(e,n),{className:"resizable-column ".concat(e.dataType?null:"no-clickable-cell"),key:"".concat(u(e),"-").concat(n)}),o.createElement("div",{className:"header-cell","data-ouia-component-type":"expression-column-header"},e.dataType?o.createElement(y,{title:r,selectedExpressionName:e.label,selectedDataType:e.dataType,onExpressionUpdate:p(n),key:"".concat(u(e),"-").concat(n)},m(e)):m(e),o.createElement("div",Object.assign({className:"pf-c-drawer ".concat(e.canResize?"":"resizer-disabled")},e.canResize?e.getResizerProps():{}),o.createElement("div",{className:"pf-c-drawer__splitter pf-m-vertical"},o.createElement("div",{className:"pf-c-drawer__splitter-handle"})))))}),[r,u,p,m,t]),E=Object(o.useCallback)((function(e,t){return e.isCountColumn?b(e,t):O(e,t)}),[b,O]),x=Object(o.useMemo)((function(){return t.headerGroups.map((function(e){return o.createElement(C.a,Object.assign({key:e.accessor},e.getHeaderGroupProps()),e.headers.map((function(e,t){return E(e,t)})))}))}),[E,t.headerGroups]),v=Object(o.useMemo)((function(){return o.createElement(C.a,null,f.last(t.headerGroups).headers.map((function(e,t){return E(e,t)})))}),[E,t.headerGroups]);return l===c.TableHeaderVisibility.None?null:o.createElement(k.a,{noWrap:!0},l===c.TableHeaderVisibility.OnlyLastLevel?v:x)},L=(n(279),n(295)),D=n(296),U=n(297),S=n(303),H=function(e){var t=e.handlerConfiguration,n=e.allowedOperations,a=e.onOperation;return o.createElement(L.a,{ouiaId:"expression-table-handler-menu",className:"table-handler-menu",onSelect:function(e,t){return a(t)}},t.map((function(e){return o.createElement(D.a,{key:e.group,label:e.group,className:f.every(e.items,(function(e){return!f.includes(n,e.type)}))?"no-allowed-actions-in-group":""},o.createElement(U.a,null,e.items.map((function(e){return o.createElement(S.a,{"data-ouia-component-id":"expression-table-handler-menu-"+e.name,key:e.type,itemId:e.type,isDisabled:!f.includes(n,e.type)},e.name)}))))})))},A=function(e){var t=e.columnPrefix,n=e.tableColumns,i=e.setTableColumns,r=e.setTableRows,s=e.lastSelectedColumnIndex,u=e.lastSelectedRowIndex,d=e.onRowAdding,p=e.showTableHandler,b=e.setShowTableHandler,m=e.tableHandlerTarget,E=e.handlerConfiguration,y=e.tableHandlerAllowedOperations,x=e.resetRowCustomFunction,v=void 0===x?function(){return{}}:x,j=Object(o.useContext)(O),g=Object(o.useState)(s),C=Object(a.a)(g,2),w=C[0],h=C[1],R=Object(o.useState)(u),I=Object(a.a)(R,2),k=I[0],N=I[1];Object(o.useEffect)((function(){h(s)}),[s]),Object(o.useEffect)((function(){N(u)}),[u]);var L=function(e,t,n){return[].concat(Object(T.a)(e.slice(0,t)),[n],Object(T.a)(e.slice(t)))},D=function(e,t,n){return[].concat(Object(T.a)(e.slice(0,t+1)),[n],Object(T.a)(e.slice(t+1)))},U=function(e,t){return[].concat(Object(T.a)(e.slice(0,t)),Object(T.a)(e.slice(t+1)))},S=Object(o.useCallback)((function(e){var a="".concat(t).concat(e);return f.find(n,{accessor:a})?S(e+1):a}),[t,n]),A=Object(o.useCallback)((function(e){return{accessor:S(e.length),label:S(e.length),dataType:c.DataType.Undefined}}),[S]),B=Object(o.useCallback)((function(e){switch(e){case c.TableOperation.ColumnInsertLeft:i((function(e){return L(e,w,A(e))}));break;case c.TableOperation.ColumnInsertRight:i((function(e){return D(e,w,A(e))}));break;case c.TableOperation.ColumnDelete:i((function(e){return U(e,w)}));break;case c.TableOperation.RowInsertAbove:r((function(e){return L(e,k,d())}));break;case c.TableOperation.RowInsertBelow:r((function(e){return D(e,k,d())}));break;case c.TableOperation.RowDelete:r((function(e){return U(e,k)}));break;case c.TableOperation.RowClear:r((function(e){return t=e,n=k,[].concat(Object(T.a)(t.slice(0,n)),[v(t[n])],Object(T.a)(t.slice(n+1)));var t,n}))}b(!1)}),[b,i,r,w,A,k,d]);return Object(o.useMemo)((function(){var e,t;return o.createElement(l.a,{className:"table-handler",hasNoPadding:!0,showClose:!1,distance:5,position:"right",isVisible:p,shouldClose:function(){return b(!1)},shouldOpen:function(e){return null===e||void 0===e?void 0:e()},reference:function(){return m},appendTo:null!==(e=null===(t=j.boxedExpressionEditorRef)||void 0===t?void 0:t.current)&&void 0!==e?e:void 0,bodyContent:o.createElement(H,{handlerConfiguration:E,allowedOperations:y,onOperation:B})})}),[p,j.boxedExpressionEditorRef,E,y,B,b,m])},B="no-table-context-menu",P=function(e){var t=e.tableId,n=e.children,i=e.columnPrefix,s=void 0===i?"column-":i,l=e.editColumnLabel,u=e.onColumnsUpdate,d=e.onRowsUpdate,p=e.onSingleRowUpdate,b=e.onRowAdding,m=void 0===b?function(){return{}}:b,E=e.defaultCell,y=e.rows,x=e.columns,v=e.handlerConfiguration,j=e.headerVisibility,I=e.headerHasMultipleLevels,k=void 0!==I&&I,L=e.getRowKey,D=void 0===L?function(e){return e.id}:L,U=e.getColumnKey,S=void 0===U?function(e){return e.id}:U,H=e.resetRowCustomFunction,P=Object(o.useRef)(null),V=Object(o.useContext)(O),M=Object(o.useState)([Object(r.a)({label:"#",accessor:"#",width:60,minWidth:60,disableResizing:!0,isCountColumn:!0,hideFilter:!0},k?{columns:[{label:"0",accessor:"0",minWidth:60,width:60,disableResizing:!0,isCountColumn:!0,hideFilter:!0}]}:{})].concat(Object(T.a)(x))),F=Object(a.a)(M,2),z=F[0],W=F[1],_=Object(o.useState)(y),Y=Object(a.a)(_,2),K=Y[0],G=Y[1],J=Object(o.useState)(!1),X=Object(a.a)(J,2),q=X[0],Q=X[1],Z=Object(o.useState)(document.body),$=Object(a.a)(Z,2),ee=$[0],te=$[1],ne=Object(o.useState)(f.values(c.TableOperation).map((function(e){return parseInt(e.toString())}))),ae=Object(a.a)(ne,2),oe=ae[0],ie=ae[1],re=Object(o.useState)(-1),ce=Object(a.a)(re,2),se=ce[0],le=ce[1],ue=Object(o.useState)(-1),de=Object(a.a)(ue,2),pe=de[0],be=de[1],me=Object(o.useCallback)((function(e,t,n){G((function(a){var o=Object(T.a)(a);return o[e][t]=n,o}))}),[]),fe=Object(o.useCallback)((function(e,t){null===p||void 0===p||p(e,t),G((function(n){var a=Object(T.a)(n);return a[e]=t,a}))}),[p]),Oe={minWidth:150,width:150,Cell:Object(o.useCallback)((function(e){var t=e.column;return t.isCountColumn?e.value:E?E[t.id](e):function(e){var t=e.value,n=e.row.index,i=e.column.id,r=e.onCellUpdate,c=o.useState(t),s=Object(a.a)(c,2),l=s[0],u=s[1];Object(o.useEffect)((function(){u(t)}),[t]);var d=Object(o.useCallback)((function(e){u(e.target.value)}),[]),p=Object(o.useCallback)((function(){r(n,i,l)}),[i,n,l,r]);return o.createElement("textarea",{value:l||"",onChange:d,onBlur:p})}(e)}),[])},Ee=function(e){var t=e.closest("table")===P.current,n=!e.classList.contains(B);return t&&n},ye=function(e,t){var n,a;te(e),null===(n=V.currentlyOpenedHandlerCallback)||void 0===n||n.call(V,!1),Q(!0),null===(a=V.setCurrentlyOpenedHandlerCallback)||void 0===a||a.call(V,(function(){return Q})),le(t)},xe=Object(g.useTable)({columns:z,data:K,defaultColumn:Oe,onCellUpdate:me,onRowUpdate:fe,getThProps:function(e,t){return{onContextMenu:function(n){var a=n.target,o=!e.disableHandlerOnHeader;Ee(a)&&o&&(n.preventDefault(),ie([c.TableOperation.ColumnInsertLeft,c.TableOperation.ColumnInsertRight].concat(Object(T.a)(z.length>2&&t>0?[c.TableOperation.ColumnDelete]:[]))),ye(a,t))}}},getTdProps:function(e,t){return{onContextMenu:function(n){var a=n.target;Ee(a)&&(n.preventDefault(),ie([c.TableOperation.ColumnInsertLeft,c.TableOperation.ColumnInsertRight].concat(Object(T.a)(z.length>2&&e>0?[c.TableOperation.ColumnDelete]:[]),[c.TableOperation.RowInsertAbove,c.TableOperation.RowInsertBelow],Object(T.a)(K.length>1?[c.TableOperation.RowDelete]:[]),[c.TableOperation.RowClear])),ye(a,e),be(t))}}}},g.useBlockLayout,g.useResizeColumns);Object(o.useEffect)((function(){null===u||void 0===u||u(z.slice(1))}),[u,z]),Object(o.useEffect)((function(){null===d||void 0===d||d(K)}),[d,K]);var ve=function e(t,n,a){var o=f.findIndex(t,{accessor:n});if(o>=0){var i=Object(r.a)({},t[o]);i.width=a,t.splice(o,1,i)}else f.forEach(t,(function(t){return e(t.columns,n,a)}))},je=null===xe.state.columnResizing.isResizingColumn&&!f.isEmpty(xe.state.columnResizing.columnWidths);Object(o.useEffect)((function(){je&&W((function(e){return f.forEach(xe.state.columnResizing.columnWidths,(function(t,n){return ve(e,n,t)})),Object(T.a)(e)}))}),[je]);var Te=Object(o.useMemo)((function(){return o.createElement(C.a,{className:"table-row additive-row"},o.createElement(w.a,{role:"cell",className:"empty-cell"},o.createElement("br",null)),null===n||void 0===n?void 0:n.map((function(e,t){return o.createElement(w.a,{role:"cell",key:t,className:"row-remainder-content",style:{width:xe.allColumns[t+1].width,minWidth:xe.allColumns[t+1].minWidth}},e)})))}),[n,xe.allColumns]);return o.createElement("div",{className:"table-component ".concat(t)},o.createElement(h.a,Object.assign({variant:"compact"},xe.getTableProps(),{ref:P}),o.createElement(N,{tableInstance:xe,editColumnLabel:l,headerVisibility:j,tableColumns:z,setTableColumns:W,setTableRows:G,getColumnKey:S}),o.createElement(R.a,Object.assign({className:"".concat(j===c.TableHeaderVisibility.None?"missing-header":"")},xe.getTableBodyProps()),xe.rows.map((function(e,t){return xe.prepareRow(e),o.createElement(C.a,Object.assign({className:"table-row"},e.getRowProps(),{key:"".concat(D(e),"-").concat(t),ouiaId:"expression-row-"+t}),e.cells.map((function(e,n){return o.createElement(w.a,Object.assign({},0===n?{}:e.getCellProps(),xe.getTdProps(n,t),{key:"".concat(S(e.column),"-").concat(n),"data-ouia-component-id":"expression-column-"+n,className:0===n?"counter-cell":"data-cell"}),0===n?t+1:e.render("Cell"))})))})),n?Te:null)),q?o.createElement(A,{tableColumns:z,setTableColumns:W,setTableRows:G,columnPrefix:s,handlerConfiguration:v,lastSelectedColumnIndex:se,lastSelectedRowIndex:pe,onRowAdding:m,showTableHandler:q,setShowTableHandler:Q,tableHandlerAllowedOperations:oe,tableHandlerTarget:ee,resetRowCustomFunction:H}):null)},V=function(e){var t=Object(d.useBoxedExpressionEditorI18n)().i18n,n=[{group:t.columns,items:[{name:t.columnOperations.insertLeft,type:c.TableOperation.ColumnInsertLeft},{name:t.columnOperations.insertRight,type:c.TableOperation.ColumnInsertRight},{name:t.columnOperations.delete,type:c.TableOperation.ColumnDelete}]},{group:t.rows,items:[{name:t.rowOperations.insertAbove,type:c.TableOperation.RowInsertAbove},{name:t.rowOperations.insertBelow,type:c.TableOperation.RowInsertBelow},{name:t.rowOperations.delete,type:c.TableOperation.RowDelete}]}],i=Object(o.useState)(void 0===e.columns?[{name:"column-1",dataType:c.DataType.Undefined}]:e.columns),s=Object(a.a)(i,2),l=s[0],u=s[1],p=Object(o.useState)(void 0===e.rows?[[]]:e.rows),b=Object(a.a)(p,2),m=b[0],O=b[1];Object(o.useEffect)((function(){var t,n,a,o=Object(r.a)(Object(r.a)({},e),{},{columns:l,rows:m});e.isHeadless?null===(t=e.onUpdatingRecursiveExpression)||void 0===t||t.call(e,o):null===(n=window.beeApi)||void 0===n||null===(a=n.broadcastRelationExpressionDefinition)||void 0===a||a.call(n,o)}),[e,l,m]);var E=Object(o.useCallback)((function(){return f.map(l,(function(e){return Object(r.a)({label:e.name,accessor:e.name,dataType:e.dataType},e.width?{width:e.width}:{})}))}),[l]),y=Object(o.useCallback)((function(e){return u(f.map(e,(function(e){return{name:e.accessor,dataType:e.dataType,width:e.width}})))}),[]),x=Object(o.useCallback)((function(){return f.map(m,(function(e){return f.reduce(l,(function(t,n,a){return t[n.name]=e[a]||"",t}),{})}))}),[l,m]),v=Object(o.useCallback)((function(e){return O(f.map(e,(function(e){return f.reduce(l,(function(t,n){return t.push(e[n.name]||""),t}),[])})))}),[l]);return o.createElement("div",{className:"relation-expression"},o.createElement(P,{columnPrefix:"column-",editColumnLabel:t.editRelation,columns:E(),rows:x(),onColumnsUpdate:y,onRowsUpdate:v,handlerConfiguration:n}))},M=(n(282),n(283),function(e){var t=e.expression,n=e.onUpdatingRecursiveExpression,a=e.onExpressionResetting,i=Object(o.useRef)(null),r=Object(o.useRef)(t),s=void 0===t.logicType;Object(o.useEffect)((function(){r.current=f.omit(t,"isHeadless")}),[s]);var l=Object(o.useCallback)((function(){return i.current}),[]),u=Object(o.useCallback)((function(e){r.current.logicType=e,n(f.omit(r.current,"isHeadless"))}),[n]),d=Object(o.useCallback)((function(){r.current.logicType=c.LogicType.Undefined,null===a||void 0===a||a(),n(f.omit(r.current,"isHeadless"))}),[a,n]);return o.createElement("div",{className:"entry-expression",ref:i},o.createElement($,{isHeadless:!0,onUpdatingRecursiveExpression:n,selectedExpression:r.current,onLogicTypeUpdating:u,onLogicTypeResetting:d,getPlacementRef:l}))}),F=function(e){var t=e.data,n=e.row.index,a=e.onRowUpdate,i=t[n],c=Object(o.useRef)(Object(r.a)({uid:i.entryExpression.uid},i.entryExpression)),s=void 0===i.entryExpression.logicType;Object(o.useEffect)((function(){c.current=i.entryExpression,a(n,Object(r.a)(Object(r.a)({},i),{},{entryExpression:c.current}))}),[s]);var l=Object(o.useCallback)((function(e){c.current=e,a(n,Object(r.a)(Object(r.a)({},i),{},{entryExpression:e}))}),[]);return o.createElement("div",{className:"context-entry-expression-cell"},o.createElement(M,{expression:c.current,onUpdatingRecursiveExpression:l,onExpressionResetting:i.onExpressionResetting}))},z=(n(284),function(e){var t=e.name,n=e.dataType,i=e.onContextEntryUpdate,r=Object(d.useBoxedExpressionEditorI18n)().i18n,c=Object(o.useState)(t),s=Object(a.a)(c,2),l=s[0],u=s[1],p=Object(o.useState)(n),b=Object(a.a)(p,2),m=b[0],f=b[1];Object(o.useEffect)((function(){u(t)}),[t]),Object(o.useEffect)((function(){f(n)}),[n]);var O=Object(o.useCallback)((function(e){var t=e.name,n=e.dataType;u(t),f(n),i(t,n)}),[i]);return o.createElement("div",{className:"entry-info"},o.createElement(y,{title:r.editContextEntry,selectedExpressionName:l,selectedDataType:m,onExpressionUpdate:O},o.createElement("div",{className:"entry-definition"},o.createElement("p",{className:"entry-name pf-u-text-truncate",title:l},l),o.createElement("p",{className:"entry-data-type pf-u-text-truncate",title:m},"(",m,")"))))}),W=function(e){var t=e.data,n=e.row.index,i=e.onRowUpdate,c=t[n],s=Object(o.useState)(c.entryInfo),l=Object(a.a)(s,2),u=l[0],d=l[1];Object(o.useEffect)((function(){d(c.entryInfo)}),[c.entryInfo]);var p=Object(o.useCallback)((function(e,t){i(n,Object(r.a)(Object(r.a)({},c),{},{entryInfo:{name:e,dataType:t}}))}),[c,n,i]);return o.createElement("div",{className:"context-entry-info-cell"},o.createElement(z,{name:u.name,dataType:u.dataType,onContextEntryUpdate:p}))},_="ContextEntry-1",Y=c.DataType.Undefined,K=370,G=function(e){var t=e.uid,n=e.name,i=void 0===n?_:n,s=e.dataType,l=void 0===s?Y:s,u=e.onUpdatingNameAndDataType,p=e.contextEntries,b=e.result,m=void 0===b?{}:b,O=e.entryInfoWidth,E=void 0===O?150:O,y=e.entryExpressionWidth,x=void 0===y?K:y,v=e.isHeadless,j=void 0!==v&&v,T=e.onUpdatingRecursiveExpression,g=Object(d.useBoxedExpressionEditorI18n)().i18n,C=[{group:g.contextEntry,items:[{name:g.rowOperations.insertAbove,type:c.TableOperation.RowInsertAbove},{name:g.rowOperations.insertBelow,type:c.TableOperation.RowInsertBelow},{name:g.rowOperations.delete,type:c.TableOperation.RowDelete},{name:g.rowOperations.clear,type:c.TableOperation.RowClear}]}],w=Object(o.useCallback)((function(){B(K)}),[]),h=Object(o.useState)(m),R=Object(a.a)(h,2),I=R[0],k=R[1],N=Object(o.useState)(E),L=Object(a.a)(N,2),D=L[0],U=L[1],S=Object(o.useState)(x),H=Object(a.a)(S,2),A=H[0],B=H[1],V=Object(o.useState)([{label:i,accessor:i,dataType:l,disableHandlerOnHeader:!0,columns:[{label:"Name",accessor:"entryInfo",disableHandlerOnHeader:!0,width:D,minWidth:150},{label:"Value",accessor:"entryExpression",disableHandlerOnHeader:!0,width:A,minWidth:K}]}]),z=Object(a.a)(V,2),G=z[0],J=z[1],X=Object(o.useState)(p||[{entryInfo:{name:_,dataType:Y},entryExpression:{},onExpressionResetting:w}]),q=Object(a.a)(X,2),Q=q[0],Z=q[1],$=Object(o.useCallback)((function(e){var t,n,o=Object(a.a)(e,1)[0];null===u||void 0===u||u(o.label,o.dataType),B(null===(t=f.find(o.columns,{accessor:"entryExpression"}))||void 0===t?void 0:t.width),U(null===(n=f.find(o.columns,{accessor:"entryInfo"}))||void 0===n?void 0:n.width),J((function(e){var t=Object(a.a)(e,1)[0];return[Object(r.a)(Object(r.a)({},t),{},{label:o.label,accessor:o.accessor,dataType:o.dataType})]}))}),[u]),ee=Object(o.useCallback)((function(e){var t="ContextEntry-".concat(e);return f.find(Q,{entryInfo:{name:t}})?ee(e+1):t}),[Q]),te=Object(o.useCallback)((function(){return{entryInfo:{name:ee(Q.length),dataType:c.DataType.Undefined},entryExpression:{},onExpressionResetting:w}}),[ee,w,Q.length]),ne=Object(o.useCallback)((function(e){return e.original.entryInfo.name}),[]),ae=Object(o.useCallback)((function(){return j?c.TableHeaderVisibility.OnlyLastLevel:c.TableHeaderVisibility.Full}),[j]),oe=Object(o.useCallback)((function(e){return{entryInfo:e.entryInfo,entryExpression:{uid:e.entryExpression.uid}}}),[]);return Object(o.useEffect)((function(){var e,n,o=Object(a.a)(G,1)[0],i=Object(r.a)(Object(r.a)({uid:t,logicType:c.LogicType.Context,name:o.accessor,dataType:o.dataType,contextEntries:Q,result:f.omit(I,"isHeadless")},D>150?{entryInfoWidth:D}:{}),A>K?{entryExpressionWidth:A}:{});j?null===T||void 0===T||T(f.omit(i,["name","dataType"])):null===(e=window.beeApi)||void 0===e||null===(n=e.broadcastContextExpressionDefinition)||void 0===n||n.call(e,i)}),[G,j,T,Q,I,D,A,t]),o.createElement("div",{className:"context-expression ".concat(t)},o.createElement(P,{tableId:t,headerHasMultipleLevels:!0,headerVisibility:ae(),defaultCell:{entryInfo:W,entryExpression:F},columns:G,rows:Q,onColumnsUpdate:$,onRowAdding:te,onRowsUpdate:Z,handlerConfiguration:C,getRowKey:ne,resetRowCustomFunction:oe},o.createElement("div",{className:"context-result"},"<result>"),o.createElement(M,{expression:I,onUpdatingRecursiveExpression:k,onExpressionResetting:w})))},J=n(90);var X=n(161),q=n.n(X),Q=function(){return o.createElement("div",null,"Decision Table")},Z=(n(285),function(e){var t=e.isHeadless,n=e.items,a=e.onUpdatingRecursiveExpression,i=e.uid,s=e.width,l=void 0===s?430:s,u=Object(d.useBoxedExpressionEditorI18n)().i18n,p=[{group:u.rows,items:[{name:u.rowOperations.insertAbove,type:c.TableOperation.RowInsertAbove},{name:u.rowOperations.insertBelow,type:c.TableOperation.RowInsertBelow},{name:u.rowOperations.delete,type:c.TableOperation.RowDelete},{name:u.rowOperations.clear,type:c.TableOperation.RowClear}]}],b=function(){return{logicType:c.LogicType.LiteralExpression}},m=Object(o.useRef)(f.isEmpty(n)?[{entryExpression:b()}]:f.map(n,(function(e){return{entryExpression:e}}))),O=Object(o.useRef)(l),E=Object(o.useCallback)((function(e){return e.original.entryExpression.uid}),[]),y=Object(o.useCallback)((function(){return{entryExpression:b()}}),[]),x=Object(o.useCallback)((function(){var e,n,o=Object(r.a)(Object(r.a)({uid:i},430!==O.current?{width:O.current}:{}),{},{logicType:c.LogicType.List,items:f.map(m.current,(function(e){return e.entryExpression}))});t?null===a||void 0===a||a(o):null===(e=window.beeApi)||void 0===e||null===(n=e.broadcastListExpressionDefinition)||void 0===n||n.call(e,o)}),[t,a,i]),j=Object(o.useCallback)((function(e){m.current=e,x()}),[x]),T=Object(o.useCallback)((function(e){return{entryExpression:{uid:e.entryExpression.uid}}}),[]),g=Object(o.useCallback)((function(e){O.current=e,x()}),[x]);return o.createElement("div",{className:"list-expression"},o.createElement(v,{width:O.current,height:"100%",minWidth:430,onHorizontalResizeStop:g},o.createElement(P,{tableId:i,headerVisibility:c.TableHeaderVisibility.None,defaultCell:{list:F},columns:[{accessor:"list",width:"100%"}],rows:m.current,onRowsUpdate:j,onRowAdding:y,handlerConfiguration:p,getRowKey:E,resetRowCustomFunction:T})))}),$=function(e){var t=e.selectedExpression,n=e.onLogicTypeUpdating,i=e.onLogicTypeResetting,r=e.onUpdatingNameAndDataType,s=e.getPlacementRef,l=e.isHeadless,p=void 0!==l&&l,b=e.onUpdatingRecursiveExpression,m=Object(d.useBoxedExpressionEditorI18n)().i18n,E=Object(o.useContext)(O),y=f.extend(t,{uid:t.uid||q()(),isHeadless:p,onUpdatingNameAndDataType:r,onUpdatingRecursiveExpression:b}),x=function(e){return!f.isEmpty(e)&&e!==c.LogicType.Undefined},v=Object(o.useState)(x(y.logicType)),T=Object(a.a)(v,2),g=T[0],C=T[1];Object(o.useEffect)((function(){C(x(t.logicType))}),[t.logicType]);var w=function(){var e=Object(o.useRef)(null),t=Object(o.useState)("0px"),n=Object(a.a)(t,2),i=n[0],r=n[1],c=Object(o.useState)("0px"),s=Object(a.a)(c,2),l=s[0],u=s[1],d=Object(o.useState)(!1),p=Object(a.a)(d,2),b=p[0],m=p[1],f=Object(o.useCallback)((function(){b&&m(!1)}),[b]),O=Object(o.useCallback)((function(t){e.current&&e.current===t.target&&(t.preventDefault(),r("".concat(t.pageX,"px")),u("".concat(t.pageY,"px")),m(!0))}),[r,u]);return Object(o.useEffect)((function(){return document.addEventListener("click",f),document.addEventListener("contextmenu",f),document.addEventListener("contextmenu",O),function(){document.removeEventListener("click",f),document.removeEventListener("contextmenu",f),document.removeEventListener("contextmenu",O)}})),{contextMenuRef:e,contextMenuXPos:i,contextMenuYPos:l,contextMenuVisibility:b,setContextMenuVisibility:m}}(),h=w.contextMenuRef,R=w.contextMenuXPos,I=w.contextMenuYPos,k=w.contextMenuVisibility,N=w.setContextMenuVisibility,D=Object(o.useMemo)((function(){switch(y.logicType){case c.LogicType.LiteralExpression:return o.createElement(j,y);case c.LogicType.Relation:return o.createElement(V,y);case c.LogicType.Context:return o.createElement(G,y);case c.LogicType.DecisionTable:return o.createElement(Q,y);case c.LogicType.Function:case c.LogicType.Invocation:case c.LogicType.List:return o.createElement(Z,y);default:return y.logicType}}),[y.logicType]),H=Object(o.useCallback)((function(){return Object.values(c.LogicType).filter((function(e){return e!==c.LogicType.Undefined}))}),[]),A=Object(o.useCallback)((function(){return f.map(H(),(function(e){return o.createElement(S.a,{key:e,itemId:e},e)}))}),[H]),P=Object(o.useCallback)((function(){return s()}),[s]),M=Object(o.useCallback)((function(){var e,t;return null!==(e=null===(t=E.boxedExpressionEditorRef)||void 0===t?void 0:t.current)&&void 0!==e?e:P}),[P,E.boxedExpressionEditorRef]),F=Object(o.useCallback)((function(e,t){C(!0),n(t)}),[n]),z=Object(o.useCallback)((function(){return o.createElement(u,{title:m.selectLogicType,arrowPlacement:P,appendTo:M(),className:"logic-type-popover",hasAutoWidth:!0,body:o.createElement(L.a,{onSelect:F},o.createElement(U.a,null,A()))})}),[m.selectLogicType,P,M,F,A]),W=Object(o.useCallback)((function(){C(!1),N(!1),i()}),[i,N]),_=Object(o.useCallback)((function(){return o.createElement("div",{className:"context-menu-container no-table-context-menu",style:{top:I,left:R}},o.createElement(J.a,{isDisabled:!g,isSmall:!0,variant:J.b.primary,onClick:W},m.clear))}),[g,R,I,W,m.clear]);return o.createElement("div",{className:"logic-type-selector ".concat(B," ").concat(g?"logic-type-selected":"logic-type-not-present"),ref:h},g?D:m.selectExpression,g?null:z(),k?_():null)},ee=function(e){var t=Object(o.useRef)(null),n=Object(o.useState)(e.selectedExpression),i=Object(a.a)(n,2),s=i[0],l=i[1],u=Object(o.useCallback)((function(e,t){l((function(n){return Object(r.a)(Object(r.a)({},n),{},{name:e,dataType:t})}))}),[]),d=Object(o.useCallback)((function(e){l((function(t){return Object(r.a)(Object(r.a)({},t),{},{logicType:e})}))}),[]),p=Object(o.useCallback)((function(){l((function(e){var t,n,a={uid:e.uid,name:e.name,dataType:e.dataType,logicType:c.LogicType.Undefined};return null===(t=window.beeApi)||void 0===t||null===(n=t.resetExpressionDefinition)||void 0===n||n.call(t,a),a}))}),[]),b=Object(o.useCallback)((function(){return t.current}),[]);return o.createElement("div",{className:"expression-container"},o.createElement("div",{className:"expression-name-and-logic-type"},o.createElement("span",{className:"expression-title"},s.name),o.createElement("span",{className:"expression-type"},"(",s.logicType||c.LogicType.Undefined,")")),o.createElement("div",{className:"expression-container-box",ref:t,"data-ouia-component-id":"expression-container"},o.createElement($,{selectedExpression:s,onLogicTypeUpdating:d,onLogicTypeResetting:p,onUpdatingNameAndDataType:u,getPlacementRef:b})))},te=function(e){var t=Object(o.useState)((function(){return f.identity})),n=Object(a.a)(t,2),r=n[0],c=n[1],s=Object(o.useRef)(null);return o.createElement(i.I18nDictionariesProvider,{defaults:d.boxedExpressionEditorI18nDefaults,dictionaries:d.boxedExpressionEditorDictionaries,initialLocale:navigator.language,ctx:d.BoxedExpressionEditorI18nContext},o.createElement(O.Provider,{value:{boxedExpressionEditorRef:s,currentlyOpenedHandlerCallback:r,setCurrentlyOpenedHandlerCallback:c}},o.createElement("div",{className:"boxed-expression-editor",ref:s},o.createElement(ee,e.expressionDefinition))))}}},[[165,1,2]]]);
//# sourceMappingURL=main.6d23bdab.chunk.js.map