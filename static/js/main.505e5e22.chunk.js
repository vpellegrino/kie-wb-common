(this["webpackJsonpboxed-expression-editor-showcase"]=this["webpackJsonpboxed-expression-editor-showcase"]||[]).push([[0],{104:function(e,t,n){"use strict";var a=n(138);n.d(t,"BoxedExpressionEditor",(function(){return a.a}));var o=n(8);n.o(o,"DataType")&&n.d(t,"DataType",(function(){return o.DataType}))},110:function(e,t,n){},111:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.Undefined="<Undefined>",e.Any="Any",e.Boolean="boolean",e.Context="context",e.Date="date",e.DateTime="date and time",e.DateTimeDuration="days and time duration",e.Number="number",e.String="string",e.Time="time",e.YearsMonthsDuration="years and months duration"}(a||(a={}))},112:function(e,t){},113:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.Undefined="<Undefined>",e.LiteralExpression="Literal expression",e.Context="Context",e.DecisionTable="Decision Table",e.Relation="Relation",e.Function="Function",e.Invocation="Invocation",e.List="List"}(a||(a={}))},114:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e[e.ColumnInsertLeft=0]="ColumnInsertLeft",e[e.ColumnInsertRight=1]="ColumnInsertRight",e[e.ColumnDelete=2]="ColumnDelete",e[e.RowInsertAbove=3]="RowInsertAbove",e[e.RowInsertBelow=4]="RowInsertBelow",e[e.RowDelete=5]="RowDelete"}(a||(a={}))},115:function(e,t){},138:function(e,t,n){"use strict";n.d(t,"a",(function(){return ee}));n(170);var a=n(2),o=n(0),i=(n(171),n(172),n(140)),c=n(16),r=(n(173),n(8)),s=(n(174),n(175),n(287)),l=(n(176),n(297)),u=(n(177),function(e){var t=e.children,n=e.arrowPlacement,a=e.body,i=e.title,c=e.appendTo;return o.createElement(l.a,{"data-ouia-component-id":"expression-popover-menu",className:"popover-menu-selector",position:"bottom",distance:0,id:"menu-selector",reference:n,appendTo:c,headerContent:o.createElement("div",{className:"selector-menu-title","data-ouia-component-id":"expression-popover-menu-title"},i),bodyContent:a},t)}),d=n(31),p=n(50),b=n(296),m=n(6),f=n(14),O="Expression Name",E=function(e){var t,n,i,c=e.children,s=e.appendTo,l=e.arrowPlacement,E=e.title,x=e.nameField,v=e.dataTypeField,y=e.selectedDataType,j=void 0===y?r.DataType.Undefined:y,g=e.selectedExpressionName,T=e.onExpressionUpdate,C=Object(d.useBoxedExpressionEditorI18n)().i18n;E=null!==(t=E)&&void 0!==t?t:C.editExpression,x=null!==(n=x)&&void 0!==n?n:C.name,v=null!==(i=v)&&void 0!==i?i:C.dataType;var h=Object(o.useState)(!1),w=Object(a.a)(h,2),R=w[0],I=w[1],k=Object(o.useState)(j),N=Object(a.a)(k,2),D=N[0],S=N[1],L=Object(o.useState)(g),U=Object(a.a)(L,2),B=U[0],H=U[1];Object(o.useEffect)((function(){H(g)}),[g]),Object(o.useEffect)((function(){S(j)}),[j]);var P=Object(o.useCallback)((function(e){H(e.target.value),"blur"===e.type&&T({name:e.target.value,dataType:D})}),[D,T]),M=Object(o.useCallback)((function(e,t){I(!1),S(t),T({name:B,dataType:t})}),[B,T]),A=Object(o.useCallback)((function(){return f.map(Object.values(r.DataType),(function(e){return o.createElement(p.a,{key:e,value:e},e)}))}),[]),W=Object(o.useCallback)((function(e){var t;try{t=new RegExp(e.target.value,"i")}catch(n){return A()}return""!==e.target.value?A().filter((function(e){return t.test(e.props.value)})):A()}),[A]),z=Object(o.useCallback)((function(e){return I(e)}),[]);return o.createElement(u,{title:E,arrowPlacement:l,appendTo:s,body:o.createElement("div",{className:"edit-expression-menu"},o.createElement("div",{className:"expression-name"},o.createElement("label",null,x),o.createElement("input",{type:"text",id:"expression-name","data-ouia-component-id":"edit-expression-name",value:B,onChange:P,onBlur:P,className:"form-control pf-c-form-control",placeholder:O})),o.createElement("div",{className:"expression-data-type"},o.createElement("label",null,v),o.createElement(b.a,{ouiaId:"edit-expression-data-type",variant:m.e.typeahead,typeAheadAriaLabel:C.choose,onToggle:z,onSelect:M,onFilter:W,isOpen:R,selections:D,hasInlineFilter:!0,inlineFilterPlaceholderText:C.choose},A())))},c)},x=n(155),v=function(e){var t=e.children,n=e.height,a=e.minHeight,i=e.minWidth,c=e.onHorizontalResizeStop,r=e.width,s=Object(o.useMemo)((function(){return o.createElement("div",{className:"pf-c-drawer"},o.createElement("div",{className:"pf-c-drawer__splitter pf-m-vertical"},o.createElement("div",{className:"pf-c-drawer__splitter-handle"})))}),[]),l=Object(o.useCallback)((function(e,t){return c(t.size.width)}),[c]);return o.createElement(x.ResizableBox,{width:r,height:n,minConstraints:[i,a],axis:"x",onResizeStop:l,handle:s},t)},y=function(e){var t=e.content,n=e.dataType,i=e.name,l=void 0===i?O:i,u=e.onUpdatingNameAndDataType,d=e.isHeadless,p=void 0!==d&&d,b=e.onUpdatingRecursiveExpression,m=e.width,f=Object(o.useState)(l),x=Object(a.a)(f,2),y=x[0],j=x[1],g=Object(o.useState)(n),T=Object(a.a)(g,2),C=T[0],h=T[1],w=Object(o.useState)(t),R=Object(a.a)(w,2),I=R[0],k=R[1],N=Object(o.useState)(m||250),D=Object(a.a)(N,2),S=D[0],L=D[1];Object(o.useEffect)((function(){var e,t,n=Object(c.a)({name:y,dataType:C,logicType:r.LogicType.LiteralExpression,content:I},p||250===S?{}:{width:S});p?null===b||void 0===b||b(n):null===(e=window.beeApi)||void 0===e||null===(t=e.broadcastLiteralExpressionDefinition)||void 0===t||t.call(e,n)}),[y,C,I,p,b,S]);var U=Object(o.useCallback)((function(e){var t=e.dataType,n=void 0===t?r.DataType.Undefined:t,a=e.name,o=void 0===a?O:a;j(o),h(n),null===u||void 0===u||u(o,n)}),[u]),B=Object(o.useCallback)((function(e){var t=e.target.value;k(t)}),[]),H=Object(o.useCallback)((function(){return document.querySelector(".literal-expression-header")}),[]),P=Object(o.useCallback)((function(e){return L(e)}),[]),M=Object(o.useCallback)((function(e){return o.createElement(v,{width:S,height:40,minWidth:250,minHeight:40,onHorizontalResizeStop:P},e)}),[S,P]),A=Object(o.useMemo)((function(){return o.createElement("div",{className:"literal-expression-header"},M(o.createElement("div",{className:"expression-info"},o.createElement("p",{className:"expression-name pf-u-text-truncate"},y),o.createElement("p",{className:"expression-data-type pf-u-text-truncate"},"(",C,")"))))}),[C,y,M]),W=Object(o.useMemo)((function(){return o.createElement(s.a,{defaultValue:I,onBlur:B,"aria-label":"literal-expression-content"})}),[I,B]);return o.createElement("div",{className:"literal-expression"},p?null:A,o.createElement("div",{className:"literal-expression-body"},W),o.createElement(E,{arrowPlacement:H,selectedExpressionName:y,selectedDataType:C,onExpressionUpdate:U}))},j=(n(200),n(201),n(9)),g=(n(202),n(94)),T=n(298),C=n(291),h=n(295),w=n(301),R=n(292),I=n(293),k=(n(206),n(288)),N=n(289),D=n(290),S=n(299),L=function(e){var t=e.handlerConfiguration,n=e.allowedOperations,a=e.onOperation;return o.createElement(k.a,{ouiaId:"expression-table-handler-menu",className:"table-handler-menu",onSelect:function(e,t){return a(t)}},t.map((function(e){return o.createElement(N.a,{key:e.group,label:e.group,className:f.every(e.items,(function(e){return!f.includes(n,e.type)}))?"no-allowed-actions-in-group":""},o.createElement(D.a,null,e.items.map((function(e){return o.createElement(S.a,{"data-ouia-component-id":"expression-table-handler-menu-"+e.name,key:e.type,itemId:e.type,isDisabled:!f.includes(n,e.type)},e.name)}))))})))},U={context:o.createContext({}),updateContextByTableId:function(e,t,n){return function(a){var o=a[e]||{},i={};i[t]=n,f.assign(o,i);var r=Object(c.a)({},a);return r[e]=o,r}}},B="no-table-context-menu",H=function(e){var t=e.tableId,n=e.children,i=e.columnPrefix,s=void 0===i?"column-":i,u=e.editColumnLabel,d=e.onColumnsUpdate,p=e.onRowsUpdate,b=e.onSingleRowUpdate,m=e.onRowAdding,O=void 0===m?function(){return{}}:m,x=e.defaultCell,v=e.rows,y=e.columns,k=e.handlerConfiguration,N=e.isHeadless,D=void 0!==N&&N,S=e.headerHasMultipleLevels,H=void 0!==S&&S,P=Object(o.useContext)(U.context),M=Object(o.useState)(),A=Object(a.a)(M,2),W=A[0],z=A[1],F=Object(o.useState)([Object(c.a)({label:"#",accessor:"#",width:60,disableResizing:!0,isCountColumn:!0,hideFilter:!0},H?{columns:[{label:"0",accessor:"0",width:60,disableResizing:!0,isCountColumn:!0,hideFilter:!0}]}:{})].concat(Object(j.a)(y))),_=Object(a.a)(F,2),V=_[0],Y=_[1],X=Object(o.useState)(v),G=Object(a.a)(X,2),J=G[0],q=G[1],K=Object(o.useState)(!1),Q=Object(a.a)(K,2),Z=Q[0],$=Q[1],ee=Object(o.useState)(document.body),te=Object(a.a)(ee,2),ne=te[0],ae=te[1],oe=Object(o.useState)(f.values(r.TableOperation).map((function(e){return parseInt(e.toString())}))),ie=Object(a.a)(oe,2),ce=ie[0],re=ie[1],se=Object(o.useState)(-1),le=Object(a.a)(se,2),ue=le[0],de=le[1],pe=Object(o.useState)(-1),be=Object(a.a)(pe,2),me=be[0],fe=be[1],Oe=function(e,t,n){return[].concat(Object(j.a)(e.slice(0,t)),[n],Object(j.a)(e.slice(t)))},Ee=function(e,t,n){return[].concat(Object(j.a)(e.slice(0,t+1)),[n],Object(j.a)(e.slice(t+1)))},xe=function(e,t){return[].concat(Object(j.a)(e.slice(0,t)),Object(j.a)(e.slice(t+1)))},ve=Object(o.useCallback)((function(e,t){return q((function(n){return f.map(n,(function(n){var a=n[e];return delete n[e],n[t]=a,n}))}))}),[]),ye=Object(o.useCallback)((function(e){return function(t){var n=t.name,a=void 0===n?"":n,o=t.dataType,i=void 0===o?r.DataType.Undefined:o,c=V[e].accessor;Y((function(t){var n=Object(j.a)(t);return n[e].label=a,n[e].accessor=a,n[e].dataType=i,n})),a!==c&&ve(c,a)}}),[V,ve]),je=Object(o.useCallback)((function(e,t,n){q((function(a){var o=Object(j.a)(a);return o[e][t]=n,o}))}),[]),ge=Object(o.useCallback)((function(e,t){null===b||void 0===b||b(e,t),q((function(n){var a=Object(j.a)(n);return a[e]=t,a}))}),[b]),Te=Object(o.useCallback)((function(e){var t="".concat(s).concat(e);return f.find(V,{accessor:t})?Te(e+1):t}),[s,V]),Ce=Object(o.useCallback)((function(e){return{accessor:Te(e.length),label:Te(e.length),dataType:r.DataType.Undefined}}),[Te]),he=Object(o.useCallback)((function(e){switch(e){case r.TableOperation.ColumnInsertLeft:Y((function(e){return Oe(e,ue,Ce(e))}));break;case r.TableOperation.ColumnInsertRight:Y((function(e){return Ee(e,ue,Ce(e))}));break;case r.TableOperation.ColumnDelete:Y((function(e){return xe(e,ue)}));break;case r.TableOperation.RowInsertAbove:q((function(e){return Oe(e,me,O())}));break;case r.TableOperation.RowInsertBelow:q((function(e){return Ee(e,me,O())}));break;case r.TableOperation.RowDelete:q((function(e){return xe(e,me)}))}$(!1)}),[Ce,ue,me,O]),we={minWidth:38,width:150,Cell:Object(o.useCallback)((function(e){var t=e.column;return t.isCountColumn?e.value:x?x[t.id](e):function(e){var t=e.value,n=e.row.index,i=e.column.id,c=e.onCellUpdate,r=o.useState(t),s=Object(a.a)(r,2),l=s[0],u=s[1];Object(o.useEffect)((function(){u(t)}),[t]);var d=Object(o.useCallback)((function(e){u(e.target.value)}),[]),p=Object(o.useCallback)((function(){c(n,i,l)}),[i,n,l,c]);return o.createElement("textarea",{value:l||"",onChange:d,onBlur:p})}(e)}),[x])},Re=function(e){var t=e.closest("table")===W,n=!e.classList.contains(B);return t&&n},Ie=Object(g.useTable)({columns:V,data:J,defaultColumn:we,onCellUpdate:je,onRowUpdate:ge,getThProps:function(e,t){return{onContextMenu:function(n){var a=n.target,o=!e.disableHandlerOnHeader;Re(a)&&o&&(n.preventDefault(),re([r.TableOperation.ColumnInsertLeft,r.TableOperation.ColumnInsertRight].concat(Object(j.a)(V.length>2&&t>0?[r.TableOperation.ColumnDelete]:[]))),ae(a),$(!0),de(t))}}},getTdProps:function(e,t){return{onContextMenu:function(n){var a=n.target;Re(a)&&(n.preventDefault(),re([r.TableOperation.ColumnInsertLeft,r.TableOperation.ColumnInsertRight].concat(Object(j.a)(V.length>2&&e>0?[r.TableOperation.ColumnDelete]:[]),[r.TableOperation.RowInsertAbove,r.TableOperation.RowInsertBelow],Object(j.a)(J.length>1?[r.TableOperation.RowDelete]:[]))),ae(a),$(!0),de(e),fe(t))}}}},g.useBlockLayout,g.useResizeColumns),ke=Object(o.useMemo)((function(){return o.createElement(l.a,{className:"table-handler",hasNoPadding:!0,showClose:!1,distance:5,position:"right",isVisible:Z,shouldClose:function(){return $(!1)},shouldOpen:function(e){return null===e||void 0===e?void 0:e()},reference:function(){return ne},bodyContent:o.createElement(L,{handlerConfiguration:k,allowedOperations:ce,onOperation:he})})}),[Z,k,ce,he,ne]);Object(o.useEffect)((function(){d(V.slice(1))}),[d,V]),Object(o.useEffect)((function(){null===p||void 0===p||p(J)}),[p,J]);var Ne=function e(t,n,a){var o=f.findIndex(t,{accessor:n});if(o>=0){var i=Object(c.a)({},t[o]);i.width=a,t.splice(o,1,i)}else f.forEach(t,(function(t){return e(t.columns,n,a)}))},De=null===Ie.state.columnResizing.isResizingColumn&&!f.isEmpty(Ie.state.columnResizing.columnWidths);Object(o.useEffect)((function(){Y((function(e){return f.forEach(Ie.state.columnResizing.columnWidths,(function(t,n){return Ne(e,n,t)})),Object(j.a)(e)}))}),[De]);var Se=Object(o.useCallback)((function(e,t){return o.createElement(T.a,Object.assign({},e.getHeaderProps(),{className:"fixed-column no-clickable-cell",key:t}),o.createElement("div",{className:"header-cell","data-ouia-component-type":"expression-column-header"},e.label))}),[]),Le=Object(o.useCallback)((function(e,t){return o.createElement(T.a,Object.assign({},e.getHeaderProps(),Ie.getThProps(e,t),{className:"resizable-column ".concat(e.dataType?null:"no-clickable-cell"),key:t}),o.createElement("div",{className:"header-cell","data-ouia-component-type":"expression-column-header"},o.createElement("div",null,o.createElement("p",{className:"pf-u-text-truncate"},e.label),e.dataType?o.createElement("p",{className:"pf-u-text-truncate data-type"},"(",e.dataType,")"):null),o.createElement("div",Object.assign({className:"pf-c-drawer ".concat(e.canResize?"":"resizer-disabled")},e.canResize?e.getResizerProps():{}),o.createElement("div",{className:"pf-c-drawer__splitter pf-m-vertical"},o.createElement("div",{className:"pf-c-drawer__splitter-handle"})))))}),[Ie]),Ue=Object(o.useCallback)((function(e,t){return e.dataType?o.createElement(E,{title:u,selectedExpressionName:e.label,selectedDataType:e.dataType,onExpressionUpdate:ye(t),key:t},Le(e,t)):Le(e,t)}),[u,ye,Le]),Be=Object(o.useCallback)((function(e,t){return e.isCountColumn?Se(e,t):Ue(e,t)}),[Se,Ue]),He=Object(o.useMemo)((function(){return o.createElement(C.a,{className:"table-row additive-row"},o.createElement(h.a,{role:"cell",className:"empty-cell"},o.createElement("br",null)),null===n||void 0===n?void 0:n.map((function(e,t){return o.createElement(h.a,{role:"cell",key:t,className:"row-remainder-content",style:{width:Ie.allColumns[t+1].width,minWidth:Ie.allColumns[t+1].minWidth}},e)})))}),[n,Ie.allColumns]),Pe=Object(o.useMemo)((function(){return Ie.headerGroups.map((function(e){return o.createElement(C.a,Object.assign({key:e.accessor},e.getHeaderGroupProps()),e.headers.map((function(e,t){return Be(e,t)})))}))}),[Be,Ie.headerGroups]),Me=Object(o.useMemo)((function(){return o.createElement(C.a,null,f.last(Ie.headerGroups).headers.map((function(e,t){return Be(e,t)})))}),[Be,Ie.headerGroups]),Ae=Object(o.useCallback)((function(e){var n;e&&(z(e),null===(n=P.setContextByTableId)||void 0===n||n.call(P,U.updateContextByTableId(t,"tableWidth",e.getBoundingClientRect().width)))}),[]),We=Object(o.useCallback)((function(e){var n;e&&(null===(n=P.setContextByTableId)||void 0===n||n.call(P,U.updateContextByTableId(t,"tableHeaderWidth",e.getBoundingClientRect().width)))}),[]);return o.createElement("div",{className:"table-component ".concat(t)},o.createElement(w.a,Object.assign({variant:"compact"},Ie.getTableProps(),{ref:Ae}),o.createElement(R.a,{noWrap:!0,ref:We},D?Me:Pe),o.createElement(I.a,Ie.getTableBodyProps(),Ie.rows.map((function(e,t){return Ie.prepareRow(e),o.createElement(C.a,Object.assign({className:"table-row"},e.getRowProps(),{key:t,ouiaId:"expression-row-"+t}),e.cells.map((function(e,n){return o.createElement(h.a,Object.assign({},0===n?{}:e.getCellProps(),Ie.getTdProps(n,t),{key:n,"data-ouia-component-id":"expression-column-"+n,className:0===n?"counter-cell":"data-cell"}),0===n?t+1:e.render("Cell"))})))})),n?He:null)),Z?ke:null)},P=function(e){var t=Object(d.useBoxedExpressionEditorI18n)().i18n,n=[{group:t.columns,items:[{name:t.columnOperations.insertLeft,type:r.TableOperation.ColumnInsertLeft},{name:t.columnOperations.insertRight,type:r.TableOperation.ColumnInsertRight},{name:t.columnOperations.delete,type:r.TableOperation.ColumnDelete}]},{group:t.rows,items:[{name:t.rowOperations.insertAbove,type:r.TableOperation.RowInsertAbove},{name:t.rowOperations.insertBelow,type:r.TableOperation.RowInsertBelow},{name:t.rowOperations.delete,type:r.TableOperation.RowDelete}]}],i=Object(o.useState)(void 0===e.columns?[{name:"column-1",dataType:r.DataType.Undefined}]:e.columns),s=Object(a.a)(i,2),l=s[0],u=s[1],p=Object(o.useState)(void 0===e.rows?[[]]:e.rows),b=Object(a.a)(p,2),m=b[0],O=b[1];Object(o.useEffect)((function(){var t,n,a,o=Object(c.a)(Object(c.a)({},e),{},{columns:l,rows:m});e.isHeadless?null===(t=e.onUpdatingRecursiveExpression)||void 0===t||t.call(e,o):null===(n=window.beeApi)||void 0===n||null===(a=n.broadcastRelationExpressionDefinition)||void 0===a||a.call(n,o)}),[e,l,m]);var E=Object(o.useCallback)((function(){return f.map(l,(function(e){return Object(c.a)({label:e.name,accessor:e.name,dataType:e.dataType},e.width?{width:e.width}:{})}))}),[l]),x=Object(o.useCallback)((function(e){return u(f.map(e,(function(e){return{name:e.accessor,dataType:e.dataType,width:e.width}})))}),[]),v=Object(o.useCallback)((function(){return f.map(m,(function(e){return f.reduce(l,(function(t,n,a){return t[n.name]=e[a]||"",t}),{})}))}),[l,m]),y=Object(o.useCallback)((function(e){return O(f.map(e,(function(e){return f.reduce(l,(function(t,n){return t.push(e[n.name]||""),t}),[])})))}),[l]);return o.createElement("div",{className:"relation-expression"},o.createElement(H,{columnPrefix:"column-",editColumnLabel:t.editRelation,columns:E(),rows:v(),onColumnsUpdate:x,onRowsUpdate:y,handlerConfiguration:n}))},M=(n(277),function(e){var t=e.expression,n=e.onUpdatingRecursiveExpression,i=e.onExpressionResetting,s=Object(o.useRef)(null),l=Object(o.useState)(t),u=Object(a.a)(l,2),d=u[0],p=u[1],b=void 0===t.logicType;Object(o.useEffect)((function(){p(f.omit(t,"isHeadless"))}),[b]),Object(o.useEffect)((function(){n(f.omit(d,"isHeadless"))}),[n,d]);var m=Object(o.useCallback)((function(){return s.current}),[]),O=Object(o.useCallback)((function(e){p((function(t){var n=Object(c.a)(Object(c.a)({},t),{},{logicType:e});return f.omit(n,"isHeadless")}))}),[]),E=Object(o.useCallback)((function(){p((function(e){return{name:e.name,dataType:e.dataType,logicType:r.LogicType.Undefined}})),null===i||void 0===i||i()}),[i]);return o.createElement("div",{className:"entry-expression",ref:s},o.createElement(Z,{isHeadless:!0,onUpdatingRecursiveExpression:n,selectedExpression:d,onLogicTypeUpdating:O,onLogicTypeResetting:E,getPlacementRef:m}))}),A=function(e){var t=e.data,n=e.row.index,i=e.onRowUpdate,r=t[n],s=Object(o.useState)(r.entryExpression),l=Object(a.a)(s,2),u=l[0],d=l[1],p=void 0===r.entryExpression.logicType;Object(o.useEffect)((function(){d(r.entryExpression)}),[p]),Object(o.useEffect)((function(){i(n,Object(c.a)(Object(c.a)({},r),{},{entryExpression:u}))}),[u]);var b=Object(o.useCallback)((function(e){d(e)}),[]);return o.createElement("div",{className:"context-entry-expression-cell"},o.createElement(M,{expression:u,onUpdatingRecursiveExpression:b,onExpressionResetting:r.onExpressionResetting}))},W=(n(278),function(e){var t=e.name,n=e.dataType,i=e.onContextEntryUpdate,c=Object(d.useBoxedExpressionEditorI18n)().i18n,r=Object(o.useState)(t),s=Object(a.a)(r,2),l=s[0],u=s[1],p=Object(o.useState)(n),b=Object(a.a)(p,2),m=b[0],f=b[1];Object(o.useEffect)((function(){u(t)}),[t]),Object(o.useEffect)((function(){f(n)}),[n]);var O=Object(o.useCallback)((function(e){var t=e.name,n=e.dataType;u(t),f(n),i(t,n)}),[i]);return o.createElement("div",{className:"entry-info"},o.createElement(E,{title:c.editContextEntry,selectedExpressionName:l,selectedDataType:m,onExpressionUpdate:O},o.createElement("div",{className:"entry-definition"},o.createElement("p",{className:"entry-name pf-u-text-truncate",title:l},l),o.createElement("p",{className:"entry-data-type pf-u-text-truncate",title:m},"(",m,")"))))}),z=function(e){var t=e.data,n=e.row.index,i=e.onRowUpdate,r=t[n],s=Object(o.useState)(r.entryInfo),l=Object(a.a)(s,2),u=l[0],d=l[1];Object(o.useEffect)((function(){d(r.entryInfo)}),[r.entryInfo]);var p=Object(o.useCallback)((function(e,t){i(n,Object(c.a)(Object(c.a)({},r),{},{entryInfo:{name:e,dataType:t}}))}),[r,n,i]);return o.createElement("div",{className:"context-entry-info-cell"},o.createElement(W,{name:u.name,dataType:u.dataType,onContextEntryUpdate:p}))};function F(){var e,t,n=new MouseEvent("mouseup",{bubbles:!0,cancelable:!0});return{setResizerElement:function(n){!function(e){t=new MouseEvent("mousedown",{clientX:e.getBoundingClientRect().left,clientY:e.getBoundingClientRect().top,bubbles:!0,cancelable:!0})}(e=n)},dragItHorizontally:function(a){e.dispatchEvent(t),function(t){e.dispatchEvent(new MouseEvent("mousemove",{clientX:e.getBoundingClientRect().left+t,clientY:e.getBoundingClientRect().top,bubbles:!0,cancelable:!0}))}(a),e.dispatchEvent(n)}}}var _="ContextEntry-1",V=r.DataType.Undefined,Y=370,X=function(e){var t=e.uid,n=e.name,i=void 0===n?_:n,s=e.dataType,l=void 0===s?V:s,u=e.onUpdatingNameAndDataType,p=e.contextEntries,b=e.result,m=void 0===b?{}:b,O=e.entryInfoWidth,E=void 0===O?150:O,x=e.entryExpressionWidth,v=void 0===x?Y:x,y=e.isHeadless,j=void 0!==y&&y,g=e.onUpdatingRecursiveExpression,T=Object(d.useBoxedExpressionEditorI18n)().i18n,C=Object(o.useContext)(U.context),h=F(),w=h.setResizerElement,R=h.dragItHorizontally,I=[{group:T.contextEntry,items:[{name:T.rowOperations.insertAbove,type:r.TableOperation.RowInsertAbove},{name:T.rowOperations.insertBelow,type:r.TableOperation.RowInsertBelow},{name:T.rowOperations.delete,type:r.TableOperation.RowDelete}]}],k=Object(o.useCallback)((function(){K(Y)}),[]),N=Object(o.useState)(m),D=Object(a.a)(N,2),S=D[0],L=D[1],B=Object(o.useState)(E),P=Object(a.a)(B,2),W=P[0],X=P[1],G=Object(o.useState)(v),J=Object(a.a)(G,2),q=J[0],K=J[1],Q=Object(o.useState)([{label:i,accessor:i,dataType:l,disableHandlerOnHeader:!0,columns:[{label:"Name",accessor:"entryInfo",disableHandlerOnHeader:!0,width:W,minWidth:150},{label:"Value",accessor:"entryExpression",disableHandlerOnHeader:!0,width:q,minWidth:Y}]}]),Z=Object(a.a)(Q,2),$=Z[0],ee=Z[1],te=Object(o.useState)(p||[{entryInfo:{name:_,dataType:V},entryExpression:{},onExpressionResetting:k}]),ne=Object(a.a)(te,2),ae=ne[0],oe=ne[1],ie=Object(o.useCallback)((function(e){var t,n,o=Object(a.a)(e,1)[0];null===u||void 0===u||u(o.label,o.dataType),K(null===(t=f.find(o.columns,{accessor:"entryExpression"}))||void 0===t?void 0:t.width),X(null===(n=f.find(o.columns,{accessor:"entryInfo"}))||void 0===n?void 0:n.width),ee((function(e){var t=Object(a.a)(e,1)[0];return[Object(c.a)(Object(c.a)({},t),{},{label:o.label,accessor:o.accessor,dataType:o.dataType})]}))}),[u]),ce=Object(o.useCallback)((function(e){var t="ContextEntry-".concat(e);return f.find(ae,{entryInfo:{name:t}})?ce(e+1):t}),[ae]),re=Object(o.useCallback)((function(){return{entryInfo:{name:ce(ae.length),dataType:r.DataType.Undefined},entryExpression:{},onExpressionResetting:k}}),[ce,k,ae.length]),se=Object(o.useCallback)((function(){return Array.from(document.querySelectorAll(".context-expression.".concat(t," > .table-component > table > tbody > tr > td:last-of-type"))).reduce((function(e,t){var n=t.clientWidth,a=t.scrollWidth;return{isOverflow:e.isOverflow||a>n,contentWidth:Math.max(e.contentWidth,a-n)}}),{isOverflow:!1,contentWidth:0})}),[t]),le=Object(o.useCallback)((function(){if(C.contextByTableId&&C.contextByTableId[t]){var e=C.contextByTableId[t].tableWidth-C.contextByTableId[t].tableHeaderWidth;if(e>0)return{isSpareSpace:!0,spareSpace:e}}return{isSpareSpace:!1,spareSpace:0}}),[C.contextByTableId,t]),ue=Object(o.useCallback)((function(e){w(document.querySelector(".table-component.".concat(t," > table > thead > tr:last-of-type > th:last-of-type div.pf-c-drawer"))),R(e),K(e)}),[R,w,t]),de=Object(o.useCallback)((function(){var e=se(),t=e.isOverflow,n=e.contentWidth,a=le(),o=a.isSpareSpace,i=a.spareSpace;t?ue(n+7):o&&ue(i)}),[se,le,ue]);return Object(o.useEffect)((function(){de()}),[de]),Object(o.useEffect)((function(){var e,t,n=Object(a.a)($,1)[0],o=Object(c.a)(Object(c.a)({logicType:r.LogicType.Context,name:n.accessor,dataType:n.dataType,contextEntries:ae,result:f.omit(S,"isHeadless")},W>150?{entryInfoWidth:W}:{}),q>Y?{entryExpressionWidth:q}:{});j?null===g||void 0===g||g(f.omit(o,["name","dataType"])):null===(e=window.beeApi)||void 0===e||null===(t=e.broadcastContextExpressionDefinition)||void 0===t||t.call(e,o)}),[$,j,g,ae,S,W,q]),o.createElement("div",{className:"context-expression ".concat(t)},o.createElement(H,{tableId:t,headerHasMultipleLevels:!0,isHeadless:j,defaultCell:{entryInfo:z,entryExpression:A},columns:$,rows:ae,onColumnsUpdate:ie,onRowAdding:re,onRowsUpdate:oe,onSingleRowUpdate:de,handlerConfiguration:I},o.createElement("div",{className:"context-result"},"<result>"),o.createElement(M,{expression:S,onUpdatingRecursiveExpression:L,onExpressionResetting:k})))},G=n(294),J=n(161),q=n(90),K=n(158),Q=n.n(K),Z=function(e){var t=e.selectedExpression,n=e.onLogicTypeUpdating,i=e.onLogicTypeResetting,c=e.onUpdatingNameAndDataType,s=e.getPlacementRef,l=e.isHeadless,p=void 0!==l&&l,b=e.onUpdatingRecursiveExpression,m=Object(d.useBoxedExpressionEditorI18n)().i18n,O=f.extend(t,{isHeadless:p,onUpdatingNameAndDataType:c,onUpdatingRecursiveExpression:b}),E=function(e){return!f.isEmpty(e)&&e!==r.LogicType.Undefined},x=Object(o.useState)(E(O.logicType)),v=Object(a.a)(x,2),j=v[0],g=v[1];Object(o.useEffect)((function(){g(E(t.logicType))}),[t.logicType]);var T=function(){var e=Object(o.useRef)(null),t=Object(o.useState)("0px"),n=Object(a.a)(t,2),i=n[0],c=n[1],r=Object(o.useState)("0px"),s=Object(a.a)(r,2),l=s[0],u=s[1],d=Object(o.useState)(!1),p=Object(a.a)(d,2),b=p[0],m=p[1],f=Object(o.useCallback)((function(){b&&m(!1)}),[b]),O=Object(o.useCallback)((function(t){e.current&&e.current===t.target&&(t.preventDefault(),c("".concat(t.pageX,"px")),u("".concat(t.pageY,"px")),m(!0))}),[c,u]);return Object(o.useEffect)((function(){return document.addEventListener("click",f),document.addEventListener("contextmenu",f),document.addEventListener("contextmenu",O),function(){document.removeEventListener("click",f),document.removeEventListener("contextmenu",f),document.removeEventListener("contextmenu",O)}})),{contextMenuRef:e,contextMenuXPos:i,contextMenuYPos:l,contextMenuVisibility:b,setContextMenuVisibility:m}}(),C=T.contextMenuRef,h=T.contextMenuXPos,w=T.contextMenuYPos,R=T.contextMenuVisibility,I=T.setContextMenuVisibility,k=Object(o.useMemo)((function(){switch(O.logicType){case r.LogicType.LiteralExpression:return o.createElement(y,O);case r.LogicType.Relation:return o.createElement(P,O);case r.LogicType.Context:return o.createElement(X,Object.assign({},O,{uid:Q()()}));case r.LogicType.DecisionTable:case r.LogicType.Function:case r.LogicType.Invocation:case r.LogicType.List:default:return O.logicType}}),[O.logicType]),N=Object(o.useCallback)((function(){return Object.values(r.LogicType).filter((function(e){return e!==r.LogicType.Undefined}))}),[]),D=Object(o.useCallback)((function(){return f.map(N(),(function(e){return o.createElement(G.a,{key:e},e)}))}),[N]),S=Object(o.useCallback)((function(){return s()}),[s]),L=Object(o.useCallback)((function(e,t){g(!0);var a=t.children;n(a)}),[n]),U=Object(o.useCallback)((function(){return o.createElement(u,{title:m.selectLogicType,arrowPlacement:S,body:o.createElement(J.a,{onSelect:L},D())})}),[m.selectLogicType,S,L,D]),H=Object(o.useCallback)((function(){g(!1),I(!1),i()}),[i,I]),M=Object(o.useCallback)((function(){return o.createElement("div",{className:"context-menu-container no-table-context-menu",style:{top:w,left:h}},o.createElement(q.a,{isDisabled:!j,isSmall:!0,variant:q.b.primary,onClick:H},m.clear))}),[j,h,w,H,m.clear]);return o.createElement("div",{className:"logic-type-selector ".concat(B," ").concat(j?"logic-type-selected":"logic-type-not-present"),ref:C},j?k:m.selectExpression,j?null:U(),R?M():null)},$=function(e){var t=Object(o.useRef)(null),n=Object(o.useState)(e.selectedExpression),i=Object(a.a)(n,2),s=i[0],l=i[1],u=Object(o.useCallback)((function(e,t){l((function(n){return Object(c.a)(Object(c.a)({},n),{},{name:e,dataType:t})}))}),[]),d=Object(o.useCallback)((function(e){l((function(t){return Object(c.a)(Object(c.a)({},t),{},{logicType:e})}))}),[]),p=Object(o.useCallback)((function(){l((function(e){var t,n,a={name:e.name,dataType:e.dataType,logicType:r.LogicType.Undefined};return null===(t=window.beeApi)||void 0===t||null===(n=t.resetExpressionDefinition)||void 0===n||n.call(t,a),a}))}),[]),b=Object(o.useCallback)((function(){return t.current}),[]);return o.createElement("div",{className:"expression-container"},o.createElement("span",{className:"expression-title"},s.name),o.createElement("span",{className:"expression-type"},"(",s.logicType||r.LogicType.Undefined,")"),o.createElement("div",{className:"expression-container-box",ref:t},o.createElement(Z,{selectedExpression:s,onLogicTypeUpdating:d,onLogicTypeResetting:p,onUpdatingNameAndDataType:u,getPlacementRef:b})))},ee=function(e){var t=Object(o.useState)({}),n=Object(a.a)(t,2),c=n[0],r=n[1];return o.createElement(i.I18nDictionariesProvider,{defaults:d.boxedExpressionEditorI18nDefaults,dictionaries:d.boxedExpressionEditorDictionaries,initialLocale:navigator.language,ctx:d.BoxedExpressionEditorI18nContext},o.createElement(U.context.Provider,{value:{contextByTableId:c,setContextByTableId:r}},o.createElement($,e.expressionDefinition)))}},139:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return u}));var a=n(0),o=n(16),i=n(153),c=Object(o.a)(Object(o.a)({},i.en),{},{choose:"Choose...",clear:"Clear",columnOperations:{delete:"Delete",insertLeft:"Insert left",insertRight:"Insert right"},columns:"COLUMNS",context:"Context",contextEntry:"CONTEXT ENTRY",dataType:"Data Type",decisionTable:"Decision Table",editContextEntry:"Edit Context Entry",editExpression:"Edit Expression",editRelation:"Edit Relation",function:"Function",invocation:"Invocation",list:"List",literalExpression:"Literal expression",name:"Name",relation:"Relation",rowOperations:{delete:"Delete",insertAbove:"Insert above",insertBelow:"Insert below"},rows:"ROWS",selectExpression:"Select expression",selectLogicType:"Select logic type"}),r={locale:"en",dictionary:c},s=new Map([["en",c]]),l=a.createContext({});function u(){return Object(a.useContext)(l)}},163:function(e,t,n){"use strict";n.r(t),n.d(t,"App",(function(){return r}));var a=n(2),o=n(0),i=n(33),c=(n(169),n(104)),r=function(){var e={name:"Expression Name",dataType:c.DataType.Undefined},t=Object(o.useState)(e),n=Object(a.a)(t,2),i=n[0],r=n[1],s={selectedExpression:e};return window.beeApi={resetExpressionDefinition:function(e){return r(e)},broadcastLiteralExpressionDefinition:function(e){return r(e)},broadcastRelationExpressionDefinition:function(e){return r(e)},broadcastContextExpressionDefinition:function(e){return r(e)}},o.createElement("div",{className:"showcase"},o.createElement("div",{className:"boxed-expression"},o.createElement(c.BoxedExpressionEditor,{expressionDefinition:s})),o.createElement("div",{className:"updated-json"},o.createElement("p",{className:"disclaimer"},"\u26a0 Currently, JSON gets updated only for literal expression, relation and context logic types"),o.createElement("pre",null,JSON.stringify(i,null,2))))};i.render(o.createElement(r,null),document.getElementById("root"))},169:function(e,t,n){},170:function(e,t,n){},173:function(e,t,n){},174:function(e,t,n){},175:function(e,t,n){},176:function(e,t,n){},177:function(e,t,n){},200:function(e,t,n){},202:function(e,t,n){},206:function(e,t,n){},277:function(e,t,n){},278:function(e,t,n){},31:function(e,t,n){"use strict";var a=n(115);n.o(a,"BoxedExpressionEditorI18nContext")&&n.d(t,"BoxedExpressionEditorI18nContext",(function(){return a.BoxedExpressionEditorI18nContext})),n.o(a,"boxedExpressionEditorDictionaries")&&n.d(t,"boxedExpressionEditorDictionaries",(function(){return a.boxedExpressionEditorDictionaries})),n.o(a,"boxedExpressionEditorI18nDefaults")&&n.d(t,"boxedExpressionEditorI18nDefaults",(function(){return a.boxedExpressionEditorI18nDefaults})),n.o(a,"useBoxedExpressionEditorI18n")&&n.d(t,"useBoxedExpressionEditorI18n",(function(){return a.useBoxedExpressionEditorI18n}));var o=n(139);n.d(t,"BoxedExpressionEditorI18nContext",(function(){return o.a})),n.d(t,"boxedExpressionEditorDictionaries",(function(){return o.b})),n.d(t,"boxedExpressionEditorI18nDefaults",(function(){return o.c})),n.d(t,"useBoxedExpressionEditorI18n",(function(){return o.d}))},8:function(e,t,n){"use strict";n(110);var a=n(111);n.d(t,"DataType",(function(){return a.a}));var o=n(112);n.o(o,"LogicType")&&n.d(t,"LogicType",(function(){return o.LogicType})),n.o(o,"TableOperation")&&n.d(t,"TableOperation",(function(){return o.TableOperation}));var i=n(113);n.d(t,"LogicType",(function(){return i.a}));var c=n(114);n.d(t,"TableOperation",(function(){return c.a}))}},[[163,1,2]]]);
//# sourceMappingURL=main.505e5e22.chunk.js.map