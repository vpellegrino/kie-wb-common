(this["webpackJsonpboxed-expression-editor-showcase"]=this["webpackJsonpboxed-expression-editor-showcase"]||[]).push([[0],{105:function(e,t,n){"use strict";var a=n(80),r=n(0),o=n(32);n.d(t,"BoxedExpressionEditor",(function(){return a.a}));var i=n(2);n.o(i,"DataType")&&n.d(t,"DataType",(function(){return i.DataType})),window.renderBoxedExpressionEditor=function(e,t){o.render(r.createElement(a.a,{expressionDefinition:{selectedExpression:t}}),document.getElementById(e))}},112:function(e,t,n){},113:function(e,t,n){"use strict";var a;!function(e){e.Sum="+",e.Count="#",e.Min="<",e.Max=">"}(a||(a={}))},114:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"f",(function(){return d}));var a=n(11),r=n(5),o=n(49),i=150,c=370,l=function(e,t){return[{group:t,items:[{name:e.rowOperations.insertAbove,type:o.b.RowInsertAbove},{name:e.rowOperations.insertBelow,type:o.b.RowInsertBelow},{name:e.rowOperations.delete,type:o.b.RowDelete},{name:e.rowOperations.clear,type:o.b.RowClear}]}]},s=function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,o="".concat(n,"-").concat(0===a?1:a),i=r.find(t,{name:o});return i?e(t,n,a+1):o},u=function(e){return e.original.entryInfo.name},d=function(e){return Object(a.a)(Object(a.a)({},e),{},{entryExpression:{uid:e.entryExpression.uid}})}},116:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.Undefined="<Undefined>",e.Any="Any",e.Boolean="boolean",e.Context="context",e.Date="date",e.DateTime="date and time",e.DateTimeDuration="days and time duration",e.Number="number",e.String="string",e.Time="time",e.YearsMonthsDuration="years and months duration"}(a||(a={}))},117:function(e,t){},118:function(e,t){},119:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.Feel="FEEL",e.Java="JAVA",e.Pmml="PMML"}(a||(a={}))},120:function(e,t,n){"use strict";var a;!function(e){e.Unique="UNIQUE",e.First="FIRST",e.Priority="PRIORITY",e.Any="ANY",e.Collect="COLLECT",e.RuleOrder="RULE ORDER",e.OutputOrder="OUTPUT ORDER"}(a||(a={}))},121:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.Undefined="<Undefined>",e.LiteralExpression="Literal expression",e.Context="Context",e.DecisionTable="Decision Table",e.Relation="Relation",e.Function="Function",e.Invocation="Invocation",e.List="List"}(a||(a={}))},122:function(e,t){},144:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return u}));var a=n(0),r=n(11),o=n(146),i=Object(r.a)(Object(r.a)({},o.en),{},{addParameter:"Add parameter",choose:"Choose...",class:"class",clear:"Clear",columnOperations:{delete:"Delete",insertLeft:"Insert left",insertRight:"Insert right"},columns:"COLUMNS",context:"Context",contextEntry:"CONTEXT ENTRY",dataType:"Data Type",decisionTable:"Decision Table",delete:"Delete",editContextEntry:"Edit Context Entry",editExpression:"Edit Expression",editParameter:"Edit Parameter",editParameters:"Edit parameters",editRelation:"Edit Relation",enterFunction:"Enter function",function:"Function",invocation:"Invocation",list:"List",literalExpression:"Literal expression",methodSignature:"method signature",name:"Name",parameters:"PARAMETERS",relation:"Relation",rowOperations:{clear:"Clear",delete:"Delete",insertAbove:"Insert above",insertBelow:"Insert below"},rows:"ROWS",selectExpression:"Select expression",selectFunctionKind:"Select Function Kind",selectLogicType:"Select logic type"}),c={locale:"en",dictionary:i},l=new Map([["en",i]]),s=a.createContext({});function u(){return Object(a.useContext)(s)}},167:function(e,t,n){"use strict";n.r(t),n.d(t,"App",(function(){return c}));var a=n(3),r=n(0),o=n(32),i=(n(173),n(105)),c=function(){var e={name:"Expression Name",dataType:i.DataType.Undefined},t=Object(r.useState)(e),n=Object(a.a)(t,2),o=n[0],c=n[1],l={selectedExpression:e};return window.beeApi={resetExpressionDefinition:function(e){return c(e)},broadcastLiteralExpressionDefinition:function(e){return c(e)},broadcastRelationExpressionDefinition:function(e){return c(e)},broadcastContextExpressionDefinition:function(e){return c(e)},broadcastListExpressionDefinition:function(e){return c(e)},broadcastInvocationExpressionDefinition:function(e){return c(e)},broadcastFunctionExpressionDefinition:function(e){return c(e)}},r.createElement("div",{className:"showcase"},r.createElement("div",{className:"boxed-expression"},r.createElement(i.BoxedExpressionEditor,{expressionDefinition:l})),r.createElement("div",{className:"updated-json"},r.createElement("p",{className:"disclaimer"},"\u26a0 Currently, JSON gets updated only for literal expression, relation, context, list, invocation and function logic types"),r.createElement("pre",null,JSON.stringify(o,null,2))))};o.render(r.createElement(c,null),document.getElementById("root"))},173:function(e,t,n){},174:function(e,t,n){},177:function(e,t,n){},178:function(e,t,n){},179:function(e,t,n){},180:function(e,t,n){},193:function(e,t,n){},194:function(e,t,n){},197:function(e,t,n){},2:function(e,t,n){"use strict";n(112),n(113);var a=n(114);n.d(t,"DEFAULT_ENTRY_EXPRESSION_MIN_WIDTH",(function(){return a.a})),n.d(t,"DEFAULT_ENTRY_INFO_MIN_WIDTH",(function(){return a.b})),n.d(t,"generateNextAvailableEntryName",(function(){return a.c})),n.d(t,"getEntryKey",(function(){return a.d})),n.d(t,"getHandlerConfiguration",(function(){return a.e})),n.d(t,"resetEntry",(function(){return a.f}));var r=n(116);n.d(t,"DataType",(function(){return r.a}));var o=n(117);n.o(o,"FunctionKind")&&n.d(t,"FunctionKind",(function(){return o.FunctionKind})),n.o(o,"LogicType")&&n.d(t,"LogicType",(function(){return o.LogicType})),n.o(o,"TableHeaderVisibility")&&n.d(t,"TableHeaderVisibility",(function(){return o.TableHeaderVisibility})),n.o(o,"TableOperation")&&n.d(t,"TableOperation",(function(){return o.TableOperation}));var i=n(118);n.o(i,"FunctionKind")&&n.d(t,"FunctionKind",(function(){return i.FunctionKind})),n.o(i,"LogicType")&&n.d(t,"LogicType",(function(){return i.LogicType})),n.o(i,"TableHeaderVisibility")&&n.d(t,"TableHeaderVisibility",(function(){return i.TableHeaderVisibility})),n.o(i,"TableOperation")&&n.d(t,"TableOperation",(function(){return i.TableOperation}));var c=n(119);n.d(t,"FunctionKind",(function(){return c.a}));n(120);var l=n(121);n.d(t,"LogicType",(function(){return l.a}));var s=n(49);n.d(t,"TableHeaderVisibility",(function(){return s.a})),n.d(t,"TableOperation",(function(){return s.b}))},206:function(e,t,n){},208:function(e,t,n){},21:function(e,t,n){"use strict";var a=n(122);n.o(a,"BoxedExpressionEditorI18nContext")&&n.d(t,"BoxedExpressionEditorI18nContext",(function(){return a.BoxedExpressionEditorI18nContext})),n.o(a,"boxedExpressionEditorDictionaries")&&n.d(t,"boxedExpressionEditorDictionaries",(function(){return a.boxedExpressionEditorDictionaries})),n.o(a,"boxedExpressionEditorI18nDefaults")&&n.d(t,"boxedExpressionEditorI18nDefaults",(function(){return a.boxedExpressionEditorI18nDefaults})),n.o(a,"useBoxedExpressionEditorI18n")&&n.d(t,"useBoxedExpressionEditorI18n",(function(){return a.useBoxedExpressionEditorI18n}));var r=n(144);n.d(t,"BoxedExpressionEditorI18nContext",(function(){return r.a})),n.d(t,"boxedExpressionEditorDictionaries",(function(){return r.b})),n.d(t,"boxedExpressionEditorI18nDefaults",(function(){return r.c})),n.d(t,"useBoxedExpressionEditorI18n",(function(){return r.d}))},280:function(e,t,n){},283:function(e,t,n){},284:function(e,t,n){},285:function(e,t,n){},286:function(e,t,n){},287:function(e,t,n){},288:function(e,t,n){},289:function(e,t,n){},49:function(e,t,n){"use strict";var a,r;n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),function(e){e[e.Full=0]="Full",e[e.LastLevel=1]="LastLevel",e[e.SecondToLastLevel=2]="SecondToLastLevel",e[e.None=3]="None"}(a||(a={})),function(e){e[e.ColumnInsertLeft=0]="ColumnInsertLeft",e[e.ColumnInsertRight=1]="ColumnInsertRight",e[e.ColumnDelete=2]="ColumnDelete",e[e.RowInsertAbove=3]="RowInsertAbove",e[e.RowInsertBelow=4]="RowInsertBelow",e[e.RowDelete=5]="RowDelete",e[e.RowClear=6]="RowClear"}(r||(r={}))},80:function(e,t,n){"use strict";n.d(t,"a",(function(){return se}));n(174);var a=n(3),r=n(0),o=(n(175),n(176),n(177),n(145)),i=n(11),c=(n(178),n(2)),l=(n(179),n(180),n(297)),s=n(50),u=n(306),d=n(8),p=n(21),b=n(5),m=function(e){var t=e.selectedDataType,n=e.onDataTypeChange,o=e.menuAppendTo,i=Object(p.useBoxedExpressionEditorI18n)().i18n,l=Object(r.useState)(!1),m=Object(a.a)(l,2),f=m[0],E=m[1],O=Object(r.useCallback)((function(e,t){E(!1),n(t)}),[n]),y=Object(r.useCallback)((function(){return b.map(Object.values(c.DataType),(function(e){return r.createElement(s.a,{key:e,value:e,"data-ouia-component-id":e},e)}))}),[]),v=Object(r.useCallback)((function(e){var t;try{t=new RegExp(e.target.value,"i")}catch(n){return y()}return""!==e.target.value?y().filter((function(e){return t.test(e.props.value)})):y()}),[y]),x=Object(r.useCallback)((function(e){return E(e)}),[]);return r.createElement(u.a,{menuAppendTo:o,ouiaId:"edit-expression-data-type",variant:d.e.typeahead,typeAheadAriaLabel:i.choose,onToggle:x,onSelect:O,onFilter:v,isOpen:f,selections:t,hasInlineFilter:!0,inlineFilterPlaceholderText:i.choose},y())},f=(n(193),n(307)),E=(n(194),function(e){var t=e.children,n=e.arrowPlacement,a=e.body,o=e.title,i=e.appendTo,c=e.className,l=e.hasAutoWidth,s=e.minWidth;return r.createElement(f.a,{"data-ouia-component-id":"expression-popover-menu",className:"popover-menu-selector".concat(c?" "+c:""),hasAutoWidth:l,minWidth:s,position:"bottom",distance:0,id:"menu-selector",reference:n,appendTo:i,headerContent:r.createElement("div",{className:"selector-menu-title","data-ouia-component-id":"expression-popover-menu-title"},o),bodyContent:a},t)}),O=r.createContext({}),y="Expression Name",v=function(e){var t,n,o,i,l,s,u=e.children,d=e.appendTo,b=e.arrowPlacement,f=e.title,v=e.nameField,x=e.dataTypeField,T=e.selectedDataType,j=void 0===T?c.DataType.Undefined:T,C=e.selectedExpressionName,g=e.onExpressionUpdate,h=Object(r.useContext)(O),R=Object(p.useBoxedExpressionEditorI18n)().i18n;f=null!==(t=f)&&void 0!==t?t:R.editExpression,v=null!==(n=v)&&void 0!==n?n:R.name,x=null!==(o=x)&&void 0!==o?o:R.dataType,d=null!==(i=null!==(l=d)&&void 0!==l?l:null===(s=h.boxedExpressionEditorRef)||void 0===s?void 0:s.current)&&void 0!==i?i:void 0;var w=Object(r.useState)(j),I=Object(a.a)(w,2),N=I[0],k=I[1],L=Object(r.useState)(C),D=Object(a.a)(L,2),H=D[0],U=D[1];Object(r.useEffect)((function(){U(C)}),[C]),Object(r.useEffect)((function(){k(j)}),[j]);var S=Object(r.useCallback)((function(e){U(e.target.value),"blur"===e.type&&g({name:e.target.value,dataType:N})}),[N,g]),F=Object(r.useCallback)((function(e){k(e),g({name:H,dataType:e})}),[H,g]);return r.createElement(E,{title:f,arrowPlacement:b,appendTo:d,body:r.createElement("div",{className:"edit-expression-menu"},r.createElement("div",{className:"expression-name"},r.createElement("label",null,v),r.createElement("input",{type:"text",id:"expression-name","data-ouia-component-id":"edit-expression-name",value:H,onChange:S,onBlur:S,className:"form-control pf-c-form-control",placeholder:y})),r.createElement("div",{className:"expression-data-type"},r.createElement("label",null,x),r.createElement(m,{selectedDataType:N,onDataTypeChange:F})))},u)},x=(n(197),n(160)),T=r.createElement("div",{className:"pf-c-drawer__splitter pf-m-vertical"},r.createElement("div",{className:"pf-c-drawer__splitter-handle"})),j=function(e){var t=e.children,n=e.height,a=e.minHeight,o=void 0===a?0:a,i=e.minWidth,c=e.onHorizontalResizeStop,l=e.width,s="100%"===n?0:n,u=Object(r.useMemo)((function(){return r.createElement("div",{className:"pf-c-drawer"},T)}),[]),d=Object(r.useCallback)((function(e,t){return c(t.size.width)}),[c]);return r.createElement(x.ResizableBox,{className:"".concat("100%"===n?"height-based-on-content":""),width:l,height:s,minConstraints:[i,o],axis:"x",onResizeStop:d,handle:u},t)},C=function(e){var t=e.uid,n=e.content,o=void 0===n?"":n,s=e.dataType,u=void 0===s?c.DataType.Undefined:s,d=e.name,p=void 0===d?y:d,b=e.onUpdatingNameAndDataType,m=e.isHeadless,f=void 0!==m&&m,E=e.onUpdatingRecursiveExpression,O=e.width,x=Object(r.useState)(p),T=Object(a.a)(x,2),C=T[0],g=T[1],h=Object(r.useState)(u),R=Object(a.a)(h,2),w=R[0],I=R[1],N=Object(r.useRef)(o),k=Object(r.useRef)(O||250),L=Object(r.useCallback)((function(){var e,n,a=Object(i.a)({uid:t,name:C,dataType:w,logicType:c.LogicType.LiteralExpression,content:N.current},f||250===k.current?{}:{width:k.current});f?null===E||void 0===E||E(a):null===(e=window.beeApi)||void 0===e||null===(n=e.broadcastLiteralExpressionDefinition)||void 0===n||n.call(e,a)}),[w,C,f,E,t]),D=Object(r.useCallback)((function(e){var t=e.dataType,n=void 0===t?c.DataType.Undefined:t,a=e.name,r=void 0===a?y:a;g(r),I(n),null===b||void 0===b||b(r,n),L()}),[b,L]),H=Object(r.useCallback)((function(e){N.current=e.target.value,L()}),[L]),U=Object(r.useCallback)((function(e){k.current=e,L()}),[L]),S=Object(r.useCallback)((function(e){return r.createElement(j,{width:k.current,height:40,minWidth:250,minHeight:40,onHorizontalResizeStop:U},e)}),[U]),F=Object(r.useMemo)((function(){return r.createElement("div",{className:"literal-expression-header"},S(r.createElement(v,{selectedExpressionName:C,selectedDataType:w,onExpressionUpdate:D},r.createElement("div",{className:"expression-info"},r.createElement("p",{className:"expression-name pf-u-text-truncate"},C),r.createElement("p",{className:"expression-data-type pf-u-text-truncate"},"(",w,")")))))}),[w,C,D,S]),A=Object(r.useMemo)((function(){return r.createElement(l.a,{defaultValue:N.current,onBlur:H,"aria-label":"literal-expression-content"})}),[H]);return Object(r.useEffect)((function(){L()}),[L]),r.createElement("div",{className:"literal-expression"},f?null:F,r.createElement("div",{className:"literal-expression-body"},A))},g=(n(206),n(207),n(10)),h=(n(208),n(95)),R=n(311),w=n(305),I=n(298),N=n(299),k=function(e){var t=e.tableInstance,n=e.children,a=e.headerVisibility,o=void 0===a?c.TableHeaderVisibility.Full:a,i=e.getRowKey,l=e.getColumnKey,s=Object(r.useCallback)((function(e){return r.createElement("div",Object.assign({className:"pf-c-drawer drawer-on-body"},e.column.canResizeOnCell?e.column.getResizerProps():{}),T)}),[]),u=Object(r.useCallback)((function(e,n,a){var o=0===e?"counter-cell":"data-cell",i=n.column.canResizeOnCell?"has-resizer":"";return r.createElement(w.a,Object.assign({},0===e?{}:n.getCellProps(),t.getTdProps(e,a),{key:"".concat(l(n.column),"-").concat(e),"data-ouia-component-id":"expression-column-"+e,className:"".concat(o," ").concat(i)}),0===e?a+1:n.render("Cell"),n.column.canResizeOnCell?s(n):null)}),[l,s,t]),d=Object(r.useCallback)((function(e,t){return r.createElement(I.a,Object.assign({className:"table-row"},e.getRowProps(),{key:"".concat(i(e),"-").concat(t),ouiaId:"expression-row-"+t}),e.cells.map((function(e,n){return u(n,e,t)})))}),[i,u]),p=Object(r.useMemo)((function(){return r.createElement(I.a,{className:"table-row additive-row"},r.createElement(w.a,{role:"cell",className:"empty-cell"},r.createElement("br",null)),null===n||void 0===n?void 0:n.map((function(e,n){return r.createElement(w.a,{role:"cell",key:n,className:"row-remainder-content",style:{width:t.allColumns[n+1].width,minWidth:t.allColumns[n+1].minWidth}},e)})))}),[n,t.allColumns]);return r.createElement(N.a,Object.assign({className:"".concat(o===c.TableHeaderVisibility.None?"missing-header":"")},t.getTableBodyProps()),t.rows.map((function(e,n){return t.prepareRow(e),d(e,n)})),n?p:null)},L=(n(280),n(300)),D=n(301),H=n(302),U=n(309),S=function(e){var t=e.handlerConfiguration,n=e.allowedOperations,a=e.onOperation;return r.createElement(L.a,{ouiaId:"expression-table-handler-menu",className:"table-handler-menu",onSelect:function(e,t){return a(t)}},t.map((function(e){return r.createElement(D.a,{key:e.group,label:e.group,className:b.every(e.items,(function(e){return!b.includes(n,e.type)}))?"no-allowed-actions-in-group":""},r.createElement(H.a,null,e.items.map((function(e){return r.createElement(U.a,{"data-ouia-component-id":"expression-table-handler-menu-"+e.name,key:e.type,itemId:e.type,isDisabled:!b.includes(n,e.type)},e.name)}))))})))},F=function(e){var t=e.columnPrefix,n=e.tableColumns,o=e.lastSelectedColumnIndex,i=e.lastSelectedRowIndex,l=e.tableRows,s=e.onRowsUpdate,u=e.onRowAdding,d=e.showTableHandler,p=e.setShowTableHandler,m=e.tableHandlerTarget,E=e.handlerConfiguration,y=e.tableHandlerAllowedOperations,v=e.resetRowCustomFunction,x=void 0===v?function(){return{}}:v,T=e.onColumnsUpdate,j=Object(r.useContext)(O),C=Object(r.useState)(o),h=Object(a.a)(C,2),R=h[0],w=h[1],I=Object(r.useState)(i),N=Object(a.a)(I,2),k=N[0],L=N[1];Object(r.useEffect)((function(){w(o)}),[o]),Object(r.useEffect)((function(){L(i)}),[i]);var D=function(e,t,n){return[].concat(Object(g.a)(e.slice(0,t)),[n],Object(g.a)(e.slice(t)))},H=function(e,t,n){return[].concat(Object(g.a)(e.slice(0,t+1)),[n],Object(g.a)(e.slice(t+1)))},U=function(e,t){return[].concat(Object(g.a)(e.slice(0,t)),Object(g.a)(e.slice(t+1)))},F=Object(r.useCallback)((function(e){var a="".concat(t).concat(e);return b.find(n.current,{accessor:a})?F(e+1):a}),[t,n]),A=Object(r.useCallback)((function(e){return{accessor:F(e.length),label:F(e.length),dataType:c.DataType.Undefined}}),[F]),P=Object(r.useCallback)((function(e){T(e),s(l.current)}),[T,s,l]),_=Object(r.useCallback)((function(e){switch(e){case c.TableOperation.ColumnInsertLeft:P(D(n.current,R,A(n.current)));break;case c.TableOperation.ColumnInsertRight:P(H(n.current,R,A(n.current)));break;case c.TableOperation.ColumnDelete:P(U(n.current,R));break;case c.TableOperation.RowInsertAbove:s(D(l.current,k,u()));break;case c.TableOperation.RowInsertBelow:s(H(l.current,k,u()));break;case c.TableOperation.RowDelete:s(U(l.current,k));break;case c.TableOperation.RowClear:s((t=l.current,a=k,[].concat(Object(g.a)(t.slice(0,a)),[x(t[a])],Object(g.a)(t.slice(a+1)))))}var t,a;p(!1)}),[A,P,u,s,R,k,p,n,l]);return Object(r.useMemo)((function(){var e,t;return r.createElement(f.a,{className:"table-handler",hasNoPadding:!0,showClose:!1,distance:5,position:"right",isVisible:d,shouldClose:function(){return p(!1)},shouldOpen:function(e){return null===e||void 0===e?void 0:e()},reference:function(){return m},appendTo:null!==(e=null===(t=j.boxedExpressionEditorRef)||void 0===t?void 0:t.current)&&void 0!==e?e:void 0,bodyContent:r.createElement(S,{handlerConfiguration:E,allowedOperations:y,onOperation:_})})}),[d,j.boxedExpressionEditorRef,E,y,_,p,m])},A=n(308),P=n(303),_=function(e){var t=e.tableInstance,n=e.tableRows,a=e.onRowsUpdate,o=e.editColumnLabel,i=e.headerVisibility,l=void 0===i?c.TableHeaderVisibility.Full:i,s=e.skipLastHeaderGroup,u=e.getColumnKey,d=e.tableColumns,p=e.onColumnsUpdate,m=Object(r.useCallback)((function(e,t){return a(b.map(n.current,(function(n){var a=n[e];return delete n[e],n[t]=a,n})))}),[a,n]),f=Object(r.useCallback)((function(e){return function(t){var n=t.name,a=void 0===n?"":n,r=t.dataType,o=void 0===r?c.DataType.Undefined:r,i=d.current[e].accessor,l=Object(g.a)(d.current);l[e].label=a,l[e].accessor=a,l[e].dataType=o,p(l),a!==i&&m(i,a)}}),[p,d,m]),E=Object(r.useCallback)((function(e,t){return r.createElement(A.a,Object.assign({},e.getHeaderProps(),{className:"fixed-column no-clickable-cell",key:"".concat(u(e),"-").concat(t)}),r.createElement("div",{className:"header-cell","data-ouia-component-type":"expression-column-header"},e.label))}),[u]),O=Object(r.useCallback)((function(e){return r.createElement("div",{className:"header-cell-info","data-ouia-component-type":"expression-column-header-cell-info"},e.headerCellElement?e.headerCellElement:r.createElement("p",{className:"pf-u-text-truncate"},e.label),e.dataType?r.createElement("p",{className:"pf-u-text-truncate data-type"},"(",e.dataType,")"):null)}),[]),y=Object(r.useCallback)((function(e,n){return r.createElement(A.a,Object.assign({},e.getHeaderProps(),t.getThProps(e,n),{className:"resizable-column ".concat(e.dataType?null:"no-clickable-cell"),key:"".concat(u(e),"-").concat(n)}),r.createElement("div",{className:"header-cell","data-ouia-component-type":"expression-column-header"},e.dataType?r.createElement(v,{title:o,selectedExpressionName:e.label,selectedDataType:e.dataType,onExpressionUpdate:f(n),key:"".concat(u(e),"-").concat(n)},O(e)):O(e),r.createElement("div",Object.assign({className:"pf-c-drawer ".concat(e.canResize?"":"resizer-disabled")},e.canResize?e.getResizerProps():{}),T)))}),[o,u,f,O,t]),x=Object(r.useCallback)((function(e,t){return e.isCountColumn?E(e,t):y(e,t)}),[E,y]),j=Object(r.useCallback)((function(e){return s?b.dropRight(e.headerGroups):e.headerGroups}),[s]),C=Object(r.useMemo)((function(){return j(t).map((function(e){return r.createElement(I.a,Object.assign({key:e.getHeaderGroupProps().key},e.getHeaderGroupProps()),e.headers.map((function(e,t){return x(e,t)})))}))}),[j,x,t]),h=Object(r.useCallback)((function(e){return r.createElement(I.a,null,b.nth(t.headerGroups,e).headers.map((function(e,t){return x(e,t)})))}),[x,t.headerGroups]);switch(l){case c.TableHeaderVisibility.Full:return r.createElement(P.a,{noWrap:!0},C);case c.TableHeaderVisibility.LastLevel:return r.createElement(P.a,{noWrap:!0},h(-1));case c.TableHeaderVisibility.SecondToLastLevel:return r.createElement(P.a,{noWrap:!0},h(-2));default:return null}},W="no-table-context-menu",M=function(e){var t=e.tableId,n=e.children,o=e.columnPrefix,l=void 0===o?"column-":o,s=e.editColumnLabel,u=e.onColumnsUpdate,d=e.onRowsUpdate,p=e.onRowAdding,m=void 0===p?function(){return{}}:p,f=e.controllerCell,E=void 0===f?"#":f,y=e.defaultCell,v=e.rows,x=e.columns,T=e.handlerConfiguration,j=e.headerVisibility,C=e.headerLevels,w=void 0===C?0:C,I=e.skipLastHeaderGroup,N=void 0!==I&&I,L=e.getRowKey,D=void 0===L?function(e){return e.id}:L,H=e.getColumnKey,U=void 0===H?function(e){return e.id}:H,S=e.resetRowCustomFunction,A=Object(r.useRef)(null),P=Object(r.useContext)(O),M=Object(r.useState)(E),B=Object(a.a)(M,2),K=B[0],V=B[1],z=Object(r.useCallback)((function(e,t){t>0&&(b.assign(e,{columns:[{label:j===c.TableHeaderVisibility.Full?"0":K,accessor:"0",minWidth:60,width:60,disableResizing:!0,isCountColumn:!0,hideFilter:!0}]}),z(e.columns[0],t-1))}),[K,j]),Y=Object(r.useCallback)((function(e,t){var n={label:e,accessor:"#",width:60,minWidth:60,isCountColumn:!0};return z(n,w),[n].concat(Object(g.a)(t))}),[z,w]),X=Object(r.useRef)(Y(K,x)),G=Object(r.useRef)(v),J=Object(r.useState)(!1),q=Object(a.a)(J,2),Q=q[0],Z=q[1],$=Object(r.useState)(document.body),ee=Object(a.a)($,2),te=ee[0],ne=ee[1],ae=Object(r.useState)(b.values(c.TableOperation).map((function(e){return parseInt(e.toString())}))),re=Object(a.a)(ae,2),oe=re[0],ie=re[1],ce=Object(r.useState)(-1),le=Object(a.a)(ce,2),se=le[0],ue=le[1],de=Object(r.useState)(-1),pe=Object(a.a)(de,2),be=pe[0],me=pe[1];Object(r.useEffect)((function(){X.current=Y(E,X.current.slice(1)),V(E)}),[E,Y]),Object(r.useEffect)((function(){X.current=Y(K,x)}),[x]),Object(r.useEffect)((function(){G.current=v}),[v]);var fe=Object(r.useCallback)((function(e){X.current=e,null===u||void 0===u||u(e.slice(1))}),[u]),Ee=Object(r.useCallback)((function(e){G.current=e,null===d||void 0===d||d(e)}),[d]),Oe=Object(r.useCallback)((function(e,t,n){var a=Object(g.a)(G.current);a[e][t]=n,Ee(a)}),[Ee]),ye=Object(r.useCallback)((function(e,t){var n=Object(g.a)(G.current);n[e]=t,Ee(n)}),[Ee]),ve={minWidth:150,width:150,Cell:Object(r.useCallback)((function(e){var t=e.column;return t.isCountColumn?e.value:y?y[t.id](e):function(e){var t=e.value,n=e.row.index,o=e.column.id,i=e.onCellUpdate,c=r.useState(t),l=Object(a.a)(c,2),s=l[0],u=l[1];Object(r.useEffect)((function(){u(t)}),[t]);var d=Object(r.useCallback)((function(e){u(e.target.value)}),[]),p=Object(r.useCallback)((function(){i(n,o,s)}),[o,n,s,i]);return r.createElement("textarea",{value:s||"",onChange:d,onBlur:p})}(e)}),[])},xe=function(e){var t=e.closest("table")===A.current,n=!e.classList.contains(W);return t&&n},Te=function(e,t){var n,a;ne(e),null===(n=P.currentlyOpenedHandlerCallback)||void 0===n||n.call(P,!1),Z(!0),null===(a=P.setCurrentlyOpenedHandlerCallback)||void 0===a||a.call(P,(function(){return Z})),ue(t)},je=Object(h.useTable)({columns:X.current,data:G.current,defaultColumn:ve,onCellUpdate:Oe,onRowUpdate:ye,getThProps:function(e,t){return{onContextMenu:function(n){var a=n.target,r=!e.disableHandlerOnHeader;xe(a)&&r&&(n.preventDefault(),ie([c.TableOperation.ColumnInsertLeft,c.TableOperation.ColumnInsertRight].concat(Object(g.a)(X.current.length>2&&t>0?[c.TableOperation.ColumnDelete]:[]))),Te(a,t))}}},getTdProps:function(e,t){return{onContextMenu:function(n){var a=n.target;xe(a)&&(n.preventDefault(),ie([c.TableOperation.ColumnInsertLeft,c.TableOperation.ColumnInsertRight].concat(Object(g.a)(X.current.length>2&&e>0?[c.TableOperation.ColumnDelete]:[]),[c.TableOperation.RowInsertAbove,c.TableOperation.RowInsertBelow],Object(g.a)(G.current.length>1?[c.TableOperation.RowDelete]:[]),[c.TableOperation.RowClear])),Te(a,e),me(t))}}}},h.useBlockLayout,h.useResizeColumns),Ce=function e(t,n,a){var r=b.findIndex(t,{accessor:n});if(r>=0){var o=Object(i.a)({},t[r]);o.width=a,t.splice(r,1,o)}else b.forEach(t,(function(t){return e(t.columns,n,a)}))},ge=null===je.state.columnResizing.isResizingColumn&&!b.isEmpty(je.state.columnResizing.columnWidths);return Object(r.useEffect)((function(){ge&&(b.forEach(je.state.columnResizing.columnWidths,(function(e,t){return Ce(X.current,t,e)})),fe(X.current))}),[ge]),r.createElement("div",{className:"table-component ".concat(t)},r.createElement(R.a,Object.assign({variant:"compact"},je.getTableProps(),{ref:A}),r.createElement(_,{tableInstance:je,editColumnLabel:s,headerVisibility:j,skipLastHeaderGroup:N,tableRows:G,onRowsUpdate:Ee,tableColumns:X,getColumnKey:U,onColumnsUpdate:fe}),r.createElement(k,{tableInstance:je,getRowKey:D,getColumnKey:U,headerVisibility:j},n)),Q&&T?r.createElement(F,{tableColumns:X,columnPrefix:l,handlerConfiguration:T,lastSelectedColumnIndex:se,lastSelectedRowIndex:be,tableRows:G,onRowsUpdate:Ee,onRowAdding:m,showTableHandler:Q,setShowTableHandler:Z,tableHandlerAllowedOperations:oe,tableHandlerTarget:te,resetRowCustomFunction:S,onColumnsUpdate:fe}):null)},B=function(e){var t=Object(p.useBoxedExpressionEditorI18n)().i18n,n=[{group:t.columns,items:[{name:t.columnOperations.insertLeft,type:c.TableOperation.ColumnInsertLeft},{name:t.columnOperations.insertRight,type:c.TableOperation.ColumnInsertRight},{name:t.columnOperations.delete,type:c.TableOperation.ColumnDelete}]},{group:t.rows,items:[{name:t.rowOperations.insertAbove,type:c.TableOperation.RowInsertAbove},{name:t.rowOperations.insertBelow,type:c.TableOperation.RowInsertBelow},{name:t.rowOperations.delete,type:c.TableOperation.RowDelete}]}],a=Object(r.useRef)(void 0===e.columns?[{name:"column-1",dataType:c.DataType.Undefined}]:e.columns),o=Object(r.useRef)(void 0===e.rows?[[""]]:e.rows),l=Object(r.useCallback)((function(){var t,n,r,c=Object(i.a)(Object(i.a)({},e),{},{columns:a.current,rows:o.current});e.isHeadless?null===(t=e.onUpdatingRecursiveExpression)||void 0===t||t.call(e,c):null===(n=window.beeApi)||void 0===n||null===(r=n.broadcastRelationExpressionDefinition)||void 0===r||r.call(n,c)}),[e]),s=Object(r.useCallback)((function(){return b.map(a.current,(function(e){return Object(i.a)({label:e.name,accessor:e.name,dataType:e.dataType},e.width?{width:e.width}:{})}))}),[]),u=Object(r.useCallback)((function(){return b.map(o.current,(function(e){return b.reduce(a.current,(function(t,n,a){return t[n.name]=e[a]||"",t}),{})}))}),[]),d=Object(r.useCallback)((function(e){o.current=b.map(e,(function(e){return b.reduce(a.current,(function(t,n){return t.push(e[n.name]||""),t}),[])})),l()}),[l]),m=Object(r.useCallback)((function(e){a.current=b.map(e,(function(e){return{name:e.accessor,dataType:e.dataType,width:e.width}})),l()}),[l]);return Object(r.useEffect)((function(){l()}),[l]),r.createElement("div",{className:"relation-expression"},r.createElement(M,{columnPrefix:"column-",editColumnLabel:t.editRelation,columns:s(),rows:u(),onColumnsUpdate:m,onRowsUpdate:d,handlerConfiguration:n}))},K=(n(283),n(284),function(e){var t=e.expression,n=e.onUpdatingRecursiveExpression,a=e.onExpressionResetting,o=Object(r.useRef)(null),i=Object(r.useRef)(t);Object(r.useEffect)((function(){i.current=b.omit(t,"isHeadless")}),[t.logicType]);var l=Object(r.useCallback)((function(){return o.current}),[]),s=Object(r.useCallback)((function(e){i.current.logicType=e,n(b.omit(i.current,"isHeadless"))}),[n]),u=Object(r.useCallback)((function(){i.current.logicType=c.LogicType.Undefined,null===a||void 0===a||a(),n(b.omit(i.current,"isHeadless"))}),[a,n]);return r.createElement("div",{className:"entry-expression",ref:o},r.createElement(ce,{isHeadless:!0,onUpdatingRecursiveExpression:n,selectedExpression:i.current,onLogicTypeUpdating:s,onLogicTypeResetting:u,getPlacementRef:l}))}),V=function(e){var t=e.data,n=e.row.index,a=e.onRowUpdate,o=t[n],c=Object(r.useRef)(Object(i.a)({uid:o.entryExpression.uid},o.entryExpression));Object(r.useEffect)((function(){c.current=o.entryExpression,a(n,Object(i.a)(Object(i.a)({},o),{},{entryExpression:c.current}))}),[o.entryExpression.logicType]);var l=Object(r.useCallback)((function(e){c.current=e,a(n,Object(i.a)(Object(i.a)({},o),{},{entryExpression:e}))}),[]);return r.createElement("div",{className:"context-entry-expression-cell"},r.createElement(K,{expression:c.current,onUpdatingRecursiveExpression:l,onExpressionResetting:o.onExpressionResetting}))},z=(n(285),function(e){var t=e.name,n=e.dataType,o=e.onContextEntryUpdate,i=e.editInfoPopoverLabel,c=Object(r.useState)(t),l=Object(a.a)(c,2),s=l[0],u=l[1],d=Object(r.useState)(n),p=Object(a.a)(d,2),b=p[0],m=p[1];Object(r.useEffect)((function(){u(t)}),[t]),Object(r.useEffect)((function(){m(n)}),[n]);var f=Object(r.useCallback)((function(e){var t=e.name,n=e.dataType;u(t),m(n),o(t,n)}),[o]),E=Object(r.useCallback)((function(e){return r.createElement("div",{className:"entry-definition ".concat(e)},r.createElement("p",{className:"entry-name pf-u-text-truncate",title:s},s),r.createElement("p",{className:"entry-data-type pf-u-text-truncate",title:b},"(",b,")"))}),[b,s]),O=Object(r.useMemo)((function(){return r.createElement(v,{title:i,selectedExpressionName:s,selectedDataType:b,onExpressionUpdate:f},E("with-popover-menu"))}),[i,b,s,f,E]);return r.createElement("div",{className:"entry-info"},i?O:E())}),Y=function(e){var t=e.data,n=e.row.index,o=e.onRowUpdate,c=t[n],l=Object(r.useState)(c.entryInfo),s=Object(a.a)(l,2),u=s[0],d=s[1];Object(r.useEffect)((function(){d(c.entryInfo)}),[c.entryInfo]);var p=Object(r.useCallback)((function(e,t){o(n,Object(i.a)(Object(i.a)({},c),{},{entryInfo:{name:e,dataType:t}}))}),[c,n,o]);return r.createElement("div",{className:"context-entry-info-cell"},r.createElement(z,{name:u.name,dataType:u.dataType,onContextEntryUpdate:p,editInfoPopoverLabel:c.editInfoPopoverLabel}))},X="ContextEntry-1",G=c.DataType.Undefined,J=function(e){var t=e.uid,n=e.name,o=void 0===n?X:n,l=e.dataType,s=void 0===l?G:l,u=e.onUpdatingNameAndDataType,d=e.contextEntries,m=e.result,f=void 0===m?{}:m,E=e.renderResult,O=void 0===E||E,y=e.entryInfoWidth,v=void 0===y?c.DEFAULT_ENTRY_INFO_MIN_WIDTH:y,x=e.entryExpressionWidth,T=void 0===x?c.DEFAULT_ENTRY_EXPRESSION_MIN_WIDTH:x,j=e.isHeadless,C=void 0!==j&&j,g=e.onUpdatingRecursiveExpression,h=e.noHandlerMenu,R=void 0!==h&&h,w=Object(p.useBoxedExpressionEditorI18n)().i18n,I=Object(r.useState)(f),N=Object(a.a)(I,2),k=N[0],L=N[1],D=Object(r.useState)(v),H=Object(a.a)(D,2),U=H[0],S=H[1],F=Object(r.useState)(T),A=Object(a.a)(F,2),P=A[0],_=A[1],W=Object(r.useState)([{label:o,accessor:o,dataType:s,disableHandlerOnHeader:!0,columns:[{label:"Name",accessor:"entryInfo",disableHandlerOnHeader:!0,width:U,minWidth:c.DEFAULT_ENTRY_INFO_MIN_WIDTH},{label:"Value",accessor:"entryExpression",disableHandlerOnHeader:!0,width:P,minWidth:c.DEFAULT_ENTRY_EXPRESSION_MIN_WIDTH}]}]),B=Object(a.a)(W,2),z=B[0],J=B[1],q=Object(r.useState)(d||[{entryInfo:{name:X,dataType:G},entryExpression:{},editInfoPopoverLabel:w.editContextEntry}]),Q=Object(a.a)(q,2),Z=Q[0],$=Q[1],ee=Object(r.useCallback)((function(e){var t,n,r=Object(a.a)(e,1)[0];null===u||void 0===u||u(r.label,r.dataType),_(null===(t=b.find(r.columns,{accessor:"entryExpression"}))||void 0===t?void 0:t.width),S(null===(n=b.find(r.columns,{accessor:"entryInfo"}))||void 0===n?void 0:n.width),J((function(e){var t=Object(a.a)(e,1)[0];return[Object(i.a)(Object(i.a)({},t),{},{label:r.label,accessor:r.accessor,dataType:r.dataType})]}))}),[u]),te=Object(r.useCallback)((function(){return{entryInfo:{name:Object(c.generateNextAvailableEntryName)(b.map(Z,(function(e){return e.entryInfo})),"ContextEntry"),dataType:c.DataType.Undefined},entryExpression:{},editInfoPopoverLabel:w.editContextEntry}}),[w.editContextEntry,Z]),ne=Object(r.useCallback)((function(){return C?c.TableHeaderVisibility.LastLevel:c.TableHeaderVisibility.Full}),[C]);return Object(r.useEffect)((function(){var e,n,r=Object(a.a)(z,1)[0],o=Object(i.a)(Object(i.a)({uid:t,logicType:c.LogicType.Context,name:r.accessor,dataType:r.dataType,contextEntries:Z,result:b.omit(k,"isHeadless")},U>c.DEFAULT_ENTRY_INFO_MIN_WIDTH?{entryInfoWidth:U}:{}),P>c.DEFAULT_ENTRY_EXPRESSION_MIN_WIDTH?{entryExpressionWidth:P}:{});C?null===g||void 0===g||g(b.omit(o,["name","dataType"])):null===(e=window.beeApi)||void 0===e||null===(n=e.broadcastContextExpressionDefinition)||void 0===n||n.call(e,o)}),[z,C,g,Z,k,U,P,t]),r.createElement("div",{className:"context-expression ".concat(t)},r.createElement(M,{tableId:t,headerLevels:1,headerVisibility:ne(),defaultCell:{entryInfo:Y,entryExpression:V},columns:z,rows:Z,onColumnsUpdate:ee,onRowAdding:te,onRowsUpdate:$,handlerConfiguration:R?void 0:Object(c.getHandlerConfiguration)(w,w.contextEntry),getRowKey:Object(r.useCallback)(c.getEntryKey,[]),resetRowCustomFunction:Object(r.useCallback)(c.resetEntry,[])},O?[r.createElement("div",{key:"context-result",className:"context-result"},"<result>"),r.createElement(K,{key:"context-expression",expression:k,onUpdatingRecursiveExpression:L})]:void 0))},q=n(91);var Q=n(163),Z=n.n(Q),$=function(){return r.createElement("div",null,"Decision Table")},ee=(n(286),function(e){var t=e.isHeadless,n=e.items,o=e.onUpdatingRecursiveExpression,l=e.uid,s=e.width,u=void 0===s?430:s,d=Object(p.useBoxedExpressionEditorI18n)().i18n,m=[{group:d.rows,items:[{name:d.rowOperations.insertAbove,type:c.TableOperation.RowInsertAbove},{name:d.rowOperations.insertBelow,type:c.TableOperation.RowInsertBelow},{name:d.rowOperations.delete,type:c.TableOperation.RowDelete},{name:d.rowOperations.clear,type:c.TableOperation.RowClear}]}],f=function(){return{logicType:c.LogicType.LiteralExpression}},E=Object(r.useState)(b.isEmpty(n)?[{entryExpression:f()}]:b.map(n,(function(e){return{entryExpression:e}}))),O=Object(a.a)(E,2),y=O[0],v=O[1],x=Object(r.useRef)(u),T=Object(r.useCallback)((function(e){return e.original.entryExpression.uid}),[]),C=Object(r.useCallback)((function(){return{entryExpression:f()}}),[]),g=Object(r.useCallback)((function(){var e,n,a=Object(i.a)(Object(i.a)({uid:l},430!==x.current?{width:x.current}:{}),{},{logicType:c.LogicType.List,items:b.map(y,(function(e){return e.entryExpression}))});t?null===o||void 0===o||o(a):null===(e=window.beeApi)||void 0===e||null===(n=e.broadcastListExpressionDefinition)||void 0===n||n.call(e,a)}),[t,y,o,l]),h=Object(r.useCallback)((function(e){v(e)}),[]),R=Object(r.useCallback)((function(e){return{entryExpression:{uid:e.entryExpression.uid}}}),[]),w=Object(r.useCallback)((function(e){x.current=e,g()}),[g]);return Object(r.useEffect)((function(){g()}),[y,g]),r.createElement("div",{className:"list-expression"},r.createElement(j,{width:x.current,height:"100%",minWidth:430,onHorizontalResizeStop:w},r.createElement(M,{tableId:l,headerVisibility:c.TableHeaderVisibility.None,defaultCell:{list:V},columns:[{accessor:"list",width:"100%"}],rows:y,onRowsUpdate:h,onRowAdding:C,handlerConfiguration:m,getRowKey:T,resetRowCustomFunction:R})))}),te=(n(287),c.DataType.Undefined),ne=function(e){var t=e.bindingEntries,n=e.dataType,o=void 0===n?te:n,l=e.entryInfoWidth,s=void 0===l?c.DEFAULT_ENTRY_INFO_MIN_WIDTH:l,u=e.entryExpressionWidth,d=void 0===u?c.DEFAULT_ENTRY_EXPRESSION_MIN_WIDTH:u,m=e.invokedFunction,f=void 0===m?"":m,E=e.isHeadless,O=e.logicType,y=e.name,v=void 0===y?"p-1":y,x=e.onUpdatingNameAndDataType,T=e.onUpdatingRecursiveExpression,j=e.uid,C=Object(p.useBoxedExpressionEditorI18n)().i18n,g=Object(r.useState)(t||[{entryInfo:{name:"p-1",dataType:te},entryExpression:{},editInfoPopoverLabel:C.editParameter}]),h=Object(a.a)(g,2),R=h[0],w=h[1],I=Object(r.useRef)(f),N=Object(r.useRef)(s),k=Object(r.useRef)(d),L=Object(r.useCallback)((function(){var e,t,n=Object(a.a)(S.current,1)[0],r=Object(i.a)(Object(i.a)({uid:j,logicType:O,name:n.accessor,dataType:n.dataType,bindingEntries:R,invokedFunction:I.current},N.current>c.DEFAULT_ENTRY_INFO_MIN_WIDTH?{entryInfoWidth:N.current}:{}),k.current>c.DEFAULT_ENTRY_EXPRESSION_MIN_WIDTH?{entryExpressionWidth:k.current}:{});E?null===T||void 0===T||T(b.omit(r,["name","dataType"])):null===(e=window.beeApi)||void 0===e||null===(t=e.broadcastInvocationExpressionDefinition)||void 0===t||t.call(e,r)}),[I,E,O,T,R,j]),D=Object(r.useCallback)((function(e){I.current=e.target.value}),[]),H=Object(r.useCallback)((function(){L()}),[L]),U=r.createElement("div",{className:"function-definition-container"},r.createElement("input",{className:"function-definition pf-u-text-truncate",type:"text",placeholder:C.enterFunction,onChange:D,onBlur:H,defaultValue:I.current})),S=Object(r.useRef)([{label:v,accessor:v,dataType:o,disableHandlerOnHeader:!0,columns:[{headerCellElement:U,accessor:"functionDefinition",disableHandlerOnHeader:!0,columns:[{accessor:"entryInfo",disableHandlerOnHeader:!0,canResizeOnCell:!0,width:N.current,minWidth:c.DEFAULT_ENTRY_INFO_MIN_WIDTH},{accessor:"entryExpression",disableHandlerOnHeader:!0,canResizeOnCell:!0,width:k.current,minWidth:c.DEFAULT_ENTRY_EXPRESSION_MIN_WIDTH}]}]}]),F=Object(r.useCallback)((function(e){var t,n,r=Object(a.a)(e,1)[0];null===x||void 0===x||x(r.label,r.dataType),N.current=null===(t=b.find(r.columns,{accessor:"entryInfo"}))||void 0===t?void 0:t.width,k.current=null===(n=b.find(r.columns,{accessor:"entryExpression"}))||void 0===n?void 0:n.width;var o=Object(a.a)(S.current,1)[0];o.label=r.label,o.accessor=r.accessor,o.dataType=r.dataType,L()}),[x,L]),A=Object(r.useCallback)((function(){return{entryInfo:{name:Object(c.generateNextAvailableEntryName)(b.map(R,(function(e){return e.entryInfo})),"p"),dataType:te},entryExpression:{},editInfoPopoverLabel:C.editParameter}}),[C.editParameter,R]),P=Object(r.useCallback)((function(){return E?c.TableHeaderVisibility.SecondToLastLevel:c.TableHeaderVisibility.Full}),[E]);return Object(r.useEffect)((function(){L()}),[R,L]),r.createElement("div",{className:"invocation-expression ".concat(j)},r.createElement(M,{tableId:j,headerLevels:2,headerVisibility:P(),skipLastHeaderGroup:!0,defaultCell:{entryInfo:Y,entryExpression:V},columns:S.current,rows:R,onColumnsUpdate:F,onRowAdding:A,onRowsUpdate:w,handlerConfiguration:Object(c.getHandlerConfiguration)(C,C.parameters),getRowKey:Object(r.useCallback)(c.getEntryKey,[]),resetRowCustomFunction:Object(r.useCallback)(c.resetEntry,[])}))},ae=(n(288),n(304)),re=function(e){var t=e.parameters,n=e.setParameters,a=Object(p.useBoxedExpressionEditorI18n)().i18n,o=Object(r.useCallback)((function(){n((function(e){return[].concat(Object(g.a)(e),[{name:Object(c.generateNextAvailableEntryName)(e,"p"),dataType:c.DataType.Undefined}])}))}),[n]),i=Object(r.useCallback)((function(e){return function(t){return n((function(n){return n[e].name=t.target.value,Object(g.a)(n)}))}}),[n]),l=Object(r.useCallback)((function(e){return function(t){n((function(n){return n[e].dataType=t,Object(g.a)(n)}))}}),[n]),s=Object(r.useCallback)((function(e){return function(){return n((function(t){return[].concat(Object(g.a)(t.slice(0,e)),Object(g.a)(t.slice(e+1)))}))}}),[n]);return r.createElement("div",{className:"parameters-editor"},r.createElement(q.a,{variant:"tertiary",onClick:o,className:"add-parameter"},a.addParameter),r.createElement("div",{className:"parameters-container"},b.map(t,(function(e,t){return r.createElement("div",{key:"".concat(e.name,"_").concat(t),className:"parameter-entry"},r.createElement("input",{className:"parameter-name",type:"text",onBlur:i(t),defaultValue:e.name}),r.createElement(m,{selectedDataType:e.dataType,onDataTypeChange:l(t),menuAppendTo:"parent"}),r.createElement(q.a,{variant:"danger",className:"delete-parameter",icon:r.createElement(ae.a,null),iconPosition:"left",onClick:s(t)},a.delete))}))))},oe=(n(289),function(e){var t,n,a=e.selectedFunctionKind,o=e.onFunctionKindSelect,i=Object(p.useBoxedExpressionEditorI18n)().i18n,l=Object(r.useContext)(O),s=Object(r.useCallback)((function(e){return function(t,n){o(n),e()}}),[o]),u=Object(r.useCallback)((function(){return b.map(Object.values(c.FunctionKind),(function(e){return r.createElement(U.a,{key:e,itemId:e,"data-ouia-component-id":e},e)}))}),[]);return r.createElement(E,{title:i.selectFunctionKind,appendTo:null!==(t=null===(n=l.boxedExpressionEditorRef)||void 0===n?void 0:n.current)&&void 0!==t?t:void 0,className:"function-kind-popover",hasAutoWidth:!0,body:function(e){return r.createElement(L.a,{onSelect:s(e)},r.createElement(H.a,null,u()))}},r.createElement("div",{className:"selected-function-kind"},b.first(a)))}),ie=function(e){var t=void 0===e.parametersWidth?c.DEFAULT_ENTRY_EXPRESSION_MIN_WIDTH:e.parametersWidth,n=void 0===e.formalParameters?[]:e.formalParameters,o=void 0===e.functionKind?c.FunctionKind.Feel:e.functionKind,l=void 0===e.name?"p-1":e.name,s=Object(p.useBoxedExpressionEditorI18n)().i18n,u=Object(r.useContext)(O),d=Object(r.useState)(n),m=Object(a.a)(d,2),f=m[0],y=m[1],v=Object(r.useMemo)((function(){var e,t;return r.createElement(E,{title:s.editParameters,appendTo:null!==(e=null===(t=u.boxedExpressionEditorRef)||void 0===t?void 0:t.current)&&void 0!==e?e:void 0,className:"parameters-editor-popover",minWidth:"400px",body:r.createElement(re,{parameters:f,setParameters:y})},r.createElement("div",{className:"parameters-list ".concat(b.isEmpty(f)?"empty-parameters":"")},r.createElement("p",{className:"pf-u-text-truncate"},b.isEmpty(f)?s.editParameters:"(".concat(b.join(b.map(f,(function(e){return e.name})),", "),")"))))}),[u.boxedExpressionEditorRef,s.editParameters,f]),x=Object(r.useCallback)((function(){return[{label:l,accessor:l,dataType:e.dataType,disableHandlerOnHeader:!0,columns:[{headerCellElement:v,accessor:"parameters",disableHandlerOnHeader:!0,width:C.current,minWidth:c.DEFAULT_ENTRY_EXPRESSION_MIN_WIDTH}]}]}),[e.dataType,v,l]),T=Object(r.useCallback)((function(e){return[{entryInfo:{name:s.class,dataType:c.DataType.String},entryExpression:{noClearAction:!0,logicType:c.LogicType.LiteralExpression,content:e.class}},{entryInfo:{name:s.methodSignature,dataType:c.DataType.String},entryExpression:{noClearAction:!0,logicType:c.LogicType.LiteralExpression,content:e.method}}]}),[s.class,s.methodSignature]),j=Object(r.useCallback)((function(t){switch(t){case c.FunctionKind.Java:var n=e;return[{entryExpression:{logicType:c.LogicType.Context,noClearAction:!0,renderResult:!1,noHandlerMenu:!0,contextEntries:T(n)}}];case c.FunctionKind.Pmml:case c.FunctionKind.Feel:default:return[{entryExpression:e.expression||{logicType:c.LogicType.LiteralExpression}}]}}),[T,e]),C=Object(r.useRef)(t),g=Object(r.useRef)(x()),h=Object(r.useState)(o),R=Object(a.a)(h,2),w=R[0],I=R[1],N=Object(r.useState)(j(w)),k=Object(a.a)(N,2),L=k[0],D=k[1],H=Object(r.useCallback)((function(e,t){switch(t){case c.FunctionKind.Java:var n,a,r,o,i,l=null===(n=b.first(L))||void 0===n?void 0:n.entryExpression,s=(null===(a=b.nth(l.contextEntries,0))||void 0===a||null===(r=a.entryExpression)||void 0===r?void 0:r.content)||"",u=(null===(o=b.nth(l.contextEntries,1))||void 0===o||null===(i=o.entryExpression)||void 0===i?void 0:i.content)||"";return b.extend(e,{class:s,method:u});case c.FunctionKind.Pmml:case c.FunctionKind.Feel:default:var d;return b.extend(e,{expression:null===(d=b.first(L))||void 0===d?void 0:d.entryExpression})}}),[L]),U=Object(r.useCallback)((function(){var t,n,r,o=Object(a.a)(g.current,1)[0],l=H(Object(i.a)({uid:e.uid,logicType:e.logicType,name:o.accessor,dataType:o.dataType,functionKind:w,formalParameters:f},C.current>c.DEFAULT_ENTRY_EXPRESSION_MIN_WIDTH?{parametersWidth:C.current}:{}),w);e.isHeadless?null===(t=e.onUpdatingRecursiveExpression)||void 0===t||t.call(e,b.omit(l,["name","dataType"])):null===(n=window.beeApi)||void 0===n||null===(r=n.broadcastFunctionExpressionDefinition)||void 0===r||r.call(n,l)}),[H,f,e,w]),S=Object(r.useCallback)((function(){return e.isHeadless?c.TableHeaderVisibility.LastLevel:c.TableHeaderVisibility.Full}),[e.isHeadless]),F=Object(r.useCallback)((function(e){var t=e;I(t),D([{entryExpression:{logicType:c.LogicType.Undefined}}]),setTimeout((function(){D(j(t))}),0)}),[j]),A=Object(r.useCallback)((function(t){var n,r,o=Object(a.a)(t,1)[0];null===(n=e.onUpdatingNameAndDataType)||void 0===n||n.call(e,o.label,o.dataType),C.current=null===(r=b.find(o.columns,{accessor:"parameters"}))||void 0===r?void 0:r.width;var i=Object(a.a)(g.current,1)[0];i.label=o.label,i.accessor=o.accessor,i.dataType=o.dataType,U()}),[g,e,U]);Object(r.useEffect)((function(){U()}),[L,U]),Object(r.useEffect)((function(){g.current=x()}),[f]);var P=Object(r.useCallback)((function(e){return I(c.FunctionKind.Feel),Object(c.resetEntry)(e)}),[]);return r.createElement("div",{className:"function-expression ".concat(e.uid)},r.createElement(M,{handlerConfiguration:[{group:b.upperCase(s.function),items:[{name:s.rowOperations.clear,type:c.TableOperation.RowClear}]}],columns:g.current,onColumnsUpdate:A,rows:L,onRowsUpdate:D,headerLevels:1,headerVisibility:S(),controllerCell:r.createElement(oe,{selectedFunctionKind:w,onFunctionKindSelect:F}),defaultCell:{parameters:V},resetRowCustomFunction:P}))},ce=function(e){var t=e.selectedExpression,n=e.onLogicTypeUpdating,o=e.onLogicTypeResetting,i=e.onUpdatingNameAndDataType,l=e.getPlacementRef,s=e.isHeadless,u=void 0!==s&&s,d=e.onUpdatingRecursiveExpression,m=Object(p.useBoxedExpressionEditorI18n)().i18n,f=Object(r.useContext)(O),y=b.extend(t,{uid:t.uid||Z()(),isHeadless:u,onUpdatingNameAndDataType:i,onUpdatingRecursiveExpression:d}),v=function(e){return!b.isEmpty(e)&&e!==c.LogicType.Undefined},x=Object(r.useState)(v(y.logicType)),T=Object(a.a)(x,2),j=T[0],g=T[1];Object(r.useEffect)((function(){g(v(t.logicType))}),[t.logicType]);var h=function(){var e=Object(r.useRef)(null),t=Object(r.useState)("0px"),n=Object(a.a)(t,2),o=n[0],i=n[1],c=Object(r.useState)("0px"),l=Object(a.a)(c,2),s=l[0],u=l[1],d=Object(r.useState)(!1),p=Object(a.a)(d,2),b=p[0],m=p[1],f=Object(r.useCallback)((function(){b&&m(!1)}),[b]),E=Object(r.useCallback)((function(t){e.current&&e.current===t.target&&(t.preventDefault(),i("".concat(t.pageX,"px")),u("".concat(t.pageY,"px")),m(!0))}),[i,u]);return Object(r.useEffect)((function(){return document.addEventListener("click",f),document.addEventListener("contextmenu",f),document.addEventListener("contextmenu",E),function(){document.removeEventListener("click",f),document.removeEventListener("contextmenu",f),document.removeEventListener("contextmenu",E)}})),{contextMenuRef:e,contextMenuXPos:o,contextMenuYPos:s,contextMenuVisibility:b,setContextMenuVisibility:m}}(),R=h.contextMenuRef,w=h.contextMenuXPos,I=h.contextMenuYPos,N=h.contextMenuVisibility,k=h.setContextMenuVisibility,D=Object(r.useMemo)((function(){switch(y.logicType){case c.LogicType.LiteralExpression:return r.createElement(C,y);case c.LogicType.Relation:return r.createElement(B,y);case c.LogicType.Context:return r.createElement(J,y);case c.LogicType.DecisionTable:return r.createElement($,y);case c.LogicType.Invocation:return r.createElement(ne,y);case c.LogicType.List:return r.createElement(ee,y);case c.LogicType.Function:return r.createElement(ie,b.defaults(y,{functionKind:c.FunctionKind.Feel}));default:return y.logicType}}),[y.logicType]),S=Object(r.useCallback)((function(){return Object.values(c.LogicType).filter((function(e){return e!==c.LogicType.Undefined}))}),[]),F=Object(r.useCallback)((function(){return b.map(S(),(function(e){return r.createElement(U.a,{key:e,itemId:e},e)}))}),[S]),A=Object(r.useCallback)((function(){return l()}),[l]),P=Object(r.useCallback)((function(){var e,t;return null!==(e=null===(t=f.boxedExpressionEditorRef)||void 0===t?void 0:t.current)&&void 0!==e?e:A}),[A,f.boxedExpressionEditorRef]),_=Object(r.useCallback)((function(e,t){g(!0),n(t)}),[n]),M=Object(r.useCallback)((function(){return r.createElement(E,{title:m.selectLogicType,arrowPlacement:A,appendTo:P(),className:"logic-type-popover",hasAutoWidth:!0,body:r.createElement(L.a,{onSelect:_},r.createElement(H.a,null,F()))})}),[m.selectLogicType,A,P,_,F]),K=Object(r.useCallback)((function(){g(!1),k(!1),o()}),[o,k]),V=Object(r.useCallback)((function(){return r.createElement("div",{className:"context-menu-container no-table-context-menu",style:{top:I,left:w}},r.createElement(q.a,{isDisabled:!j,isSmall:!0,variant:q.b.primary,onClick:K},m.clear))}),[j,w,I,K,m.clear]);return r.createElement("div",{className:"logic-type-selector ".concat(W," ").concat(j?"logic-type-selected":"logic-type-not-present"),ref:R},j?D:m.selectExpression,j?null:M(),!t.noClearAction&&N?V():null)},le=function(e){var t=Object(r.useRef)(null),n=Object(r.useState)(e.selectedExpression),o=Object(a.a)(n,2),l=o[0],s=o[1],u=Object(r.useCallback)((function(e,t){s((function(n){return Object(i.a)(Object(i.a)({},n),{},{name:e,dataType:t})}))}),[]),d=Object(r.useCallback)((function(e){s((function(t){return Object(i.a)(Object(i.a)({},t),{},{logicType:e})}))}),[]),p=Object(r.useCallback)((function(){s((function(e){var t,n,a={uid:e.uid,name:e.name,dataType:e.dataType,logicType:c.LogicType.Undefined};return null===(t=window.beeApi)||void 0===t||null===(n=t.resetExpressionDefinition)||void 0===n||n.call(t,a),a}))}),[]),b=Object(r.useCallback)((function(){return t.current}),[]);return r.createElement("div",{className:"expression-container"},r.createElement("div",{className:"expression-name-and-logic-type"},r.createElement("span",{className:"expression-title"},l.name),r.createElement("span",{className:"expression-type"},"(",l.logicType||c.LogicType.Undefined,")")),r.createElement("div",{className:"expression-container-box",ref:t,"data-ouia-component-id":"expression-container"},r.createElement(ce,{selectedExpression:l,onLogicTypeUpdating:d,onLogicTypeResetting:p,onUpdatingNameAndDataType:u,getPlacementRef:b})))},se=function(e){var t=Object(r.useState)((function(){return b.identity})),n=Object(a.a)(t,2),i=n[0],c=n[1],l=Object(r.useRef)(null);return r.createElement(o.I18nDictionariesProvider,{defaults:p.boxedExpressionEditorI18nDefaults,dictionaries:p.boxedExpressionEditorDictionaries,initialLocale:navigator.language,ctx:p.BoxedExpressionEditorI18nContext},r.createElement(O.Provider,{value:{boxedExpressionEditorRef:l,currentlyOpenedHandlerCallback:i,setCurrentlyOpenedHandlerCallback:c}},r.createElement("div",{className:"boxed-expression-editor",ref:l},r.createElement(le,e.expressionDefinition))))}}},[[167,1,2]]]);
//# sourceMappingURL=main.2eb39a51.chunk.js.map