(this["webpackJsonpboxed-expression-editor-showcase"]=this["webpackJsonpboxed-expression-editor-showcase"]||[]).push([[0],{114:function(e,t,n){"use strict";var a=n(148);n.d(t,"BoxedExpressionEditor",(function(){return a.a}));var o=n(9);n.o(o,"DataType")&&n.d(t,"DataType",(function(){return o.DataType}))},120:function(e,t,n){},121:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.Undefined="<Undefined>",e.Any="Any",e.Boolean="boolean",e.Context="context",e.Date="date",e.DateTime="date and time",e.DateTimeDuration="days and time duration",e.Number="number",e.String="string",e.Time="time",e.YearsMonthsDuration="years and months duration"}(a||(a={}))},122:function(e,t){},123:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.Undefined="<Undefined>",e.LiteralExpression="Literal expression",e.Context="Context",e.DecisionTable="Decision Table",e.Relation="Relation",e.Function="Function",e.Invocation="Invocation",e.List="List"}(a||(a={}))},124:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e[e.ColumnInsertLeft=0]="ColumnInsertLeft",e[e.ColumnInsertRight=1]="ColumnInsertRight",e[e.ColumnDelete=2]="ColumnDelete",e[e.RowInsertAbove=3]="RowInsertAbove",e[e.RowInsertBelow=4]="RowInsertBelow",e[e.RowDelete=5]="RowDelete"}(a||(a={}))},125:function(e,t){},148:function(e,t,n){"use strict";n.d(t,"a",(function(){return te}));n(180);var a=n(0),o=(n(181),n(150)),i=n(7),c=n(2),r=(n(182),n(9)),s=(n(183),n(184),n(295)),l=(n(185),n(305)),u=(n(186),function(e){var t=e.children,n=e.arrowPlacement,o=e.body,i=e.title,c=e.appendTo;return a.createElement(l.a,{"data-ouia-component-id":"expression-popover-menu",className:"popover-menu-selector",position:"bottom",distance:0,id:"menu-selector",reference:n,appendTo:c,headerContent:a.createElement("div",{className:"selector-menu-title","data-ouia-component-id":"expression-popover-menu-title"},i),bodyContent:o},t)}),d=n(33),p=n(54),b=n(304),m=n(6),f=n(20),O=function(e){var t,n,o,i=e.children,s=e.appendTo,l=e.arrowPlacement,O=e.title,x=e.nameField,E=e.dataTypeField,j=e.selectedDataType,v=void 0===j?r.DataType.Undefined:j,y=e.selectedExpressionName,g=e.onExpressionUpdate,T=Object(d.useBoxedExpressionEditorI18n)().i18n;O=null!==(t=O)&&void 0!==t?t:T.editExpression,x=null!==(n=x)&&void 0!==n?n:T.name,E=null!==(o=E)&&void 0!==o?o:T.dataType;var h=Object(a.useState)(!1),C=Object(c.a)(h,2),w=C[0],R=C[1],N=Object(a.useState)(v),I=Object(c.a)(N,2),k=I[0],D=I[1],L=Object(a.useState)(y),S=Object(c.a)(L,2),U=S[0],B=S[1];Object(a.useEffect)((function(){B(y)}),[y]),Object(a.useEffect)((function(){D(v)}),[v]);var W=Object(a.useCallback)((function(e){B(e.target.value),"blur"===e.type&&g({name:e.target.value,dataType:k})}),[k,g]),A=Object(a.useCallback)((function(e,t){R(!1),D(t),g({name:U,dataType:t})}),[U,g]),P=Object(a.useCallback)((function(){return f.map(Object.values(r.DataType),(function(e){return a.createElement(p.a,{key:e,value:e},e)}))}),[]),z=Object(a.useCallback)((function(e){var t;try{t=new RegExp(e.target.value,"i")}catch(n){return P()}return""!==e.target.value?P().filter((function(e){return t.test(e.props.value)})):P()}),[P]),H=Object(a.useCallback)((function(e){return R(e)}),[]);return a.createElement(u,{title:O,arrowPlacement:l,appendTo:s,body:a.createElement("div",{className:"edit-expression-menu"},a.createElement("div",{className:"expression-name"},a.createElement("label",null,x),a.createElement("input",{type:"text",id:"expression-name","data-ouia-component-id":"edit-expression-name",value:U,onChange:W,onBlur:W,className:"form-control pf-c-form-control",placeholder:"Expression Name"})),a.createElement("div",{className:"expression-data-type"},a.createElement("label",null,E),a.createElement(b.a,{ouiaId:"edit-expression-data-type",variant:m.e.typeahead,typeAheadAriaLabel:T.choose,onToggle:H,onSelect:A,onFilter:z,isOpen:w,selections:k,hasInlineFilter:!0,inlineFilterPlaceholderText:T.choose},P())))},i)},x=n(165),E=function(e){var t=e.children,n=e.height,o=e.minHeight,i=e.minWidth,c=e.onHorizontalResizeStop,r=e.width,s=Object(a.useMemo)((function(){return a.createElement("div",{className:"pf-c-drawer"},a.createElement("div",{className:"pf-c-drawer__splitter pf-m-vertical"},a.createElement("div",{className:"pf-c-drawer__splitter-handle"})))}),[]),l=Object(a.useCallback)((function(e,t){return c(t.size.width)}),[c]);return a.createElement(x.ResizableBox,{width:r,height:n,minConstraints:[i,o],axis:"x",onResizeStop:l,handle:s},t)},j=function(e){var t=e.content,n=e.dataType,o=e.name,l=e.onUpdatingNameAndDataType,u=e.isHeadless,d=void 0!==u&&u,p=e.onUpdatingRecursiveExpression,b=e.width,m=Object(a.useState)(o),f=Object(c.a)(m,2),x=f[0],j=f[1],v=Object(a.useState)(n),y=Object(c.a)(v,2),g=y[0],T=y[1],h=Object(a.useState)(t),C=Object(c.a)(h,2),w=C[0],R=C[1],N=Object(a.useState)(b||250),I=Object(c.a)(N,2),k=I[0],D=I[1];Object(a.useEffect)((function(){var e,t,n=Object(i.a)({name:x,dataType:g,logicType:r.LogicType.LiteralExpression,content:w},d||250===k?{}:{width:k});d?null===p||void 0===p||p(n):null===(e=window.beeApi)||void 0===e||null===(t=e.broadcastLiteralExpressionDefinition)||void 0===t||t.call(e,n)}),[x,g,w,d,p,k]);var L=Object(a.useCallback)((function(e){var t=e.dataType,n=e.name;j(n),T(t),null===l||void 0===l||l(n,t)}),[l]),S=Object(a.useCallback)((function(e){var t=e.target.value;R(t)}),[]),U=Object(a.useCallback)((function(){return document.querySelector(".literal-expression-header")}),[]),B=Object(a.useCallback)((function(e){return D(e)}),[]),W=Object(a.useCallback)((function(e){return a.createElement(E,{width:k,height:40,minWidth:250,minHeight:40,onHorizontalResizeStop:B},e)}),[k,B]),A=Object(a.useMemo)((function(){return a.createElement("div",{className:"literal-expression-header"},W(a.createElement("div",{className:"expression-info"},a.createElement("p",{className:"expression-name pf-u-text-truncate"},x),a.createElement("p",{className:"expression-data-type pf-u-text-truncate"},"(",g,")"))))}),[g,x,W]),P=Object(a.useMemo)((function(){return a.createElement(s.a,{defaultValue:w,onBlur:S,"aria-label":"literal-expression-content"})}),[w,S]);return a.createElement("div",{className:"literal-expression"},d?null:A,a.createElement("div",{className:"literal-expression-body"},P),a.createElement(O,{arrowPlacement:U,selectedExpressionName:x,selectedDataType:g,onExpressionUpdate:L}))},v=(n(209),function(e){var t=e.value,n=e.row.index,o=e.column.id,i=e.onCellUpdate,r=a.useState(t),s=Object(c.a)(r,2),l=s[0],u=s[1];Object(a.useEffect)((function(){u(t)}),[t]);var d=Object(a.useCallback)((function(e){u(e.target.value)}),[]),p=Object(a.useCallback)((function(){i(n,o,l)}),[o,n,l,i]);return a.createElement("textarea",{value:l||"",onChange:d,onBlur:p})}),y=n(11),g=(n(210),n(104)),T=n(306),h=n(299),C=n(303),w=n(309),R=n(300),N=n(301),I=(n(213),n(296)),k=n(297),D=n(298),L=n(307),S=function(e){var t=e.handlerConfiguration,n=e.allowedOperations,o=e.onOperation;return a.createElement(I.a,{ouiaId:"expression-table-handler-menu",className:"table-handler-menu",onSelect:function(e,t){return o(t)}},t.map((function(e){return a.createElement(k.a,{key:e.group,label:e.group,className:f.every(e.items,(function(e){return!f.includes(n,e.type)}))?"no-allowed-actions-in-group":""},a.createElement(D.a,null,e.items.map((function(e){return a.createElement(L.a,{"data-ouia-component-id":"expression-table-handler-menu-"+e.name,key:e.type,itemId:e.type,isDisabled:!f.includes(n,e.type)},e.name)}))))})))},U="no-table-context-menu",B=function(e){var t=e.children,n=e.columnPrefix,o=void 0===n?"column-":n,s=e.editColumnLabel,u=e.onColumnsUpdate,d=e.onRowsUpdate,p=e.onRowAdding,b=void 0===p?function(){return{}}:p,m=e.defaultCell,x=void 0===m?v:m,E=e.rows,j=e.columns,I=e.handlerConfiguration,k=e.isHeadless,D=void 0!==k&&k,L="#",B=Object(a.useRef)(null),W=Object(a.useState)([{label:L,accessor:L,width:60,disableResizing:!0,isCountColumn:!0,hideFilter:!0}].concat(Object(y.a)(j))),A=Object(c.a)(W,2),P=A[0],z=A[1],H=Object(a.useState)(E),M=Object(c.a)(H,2),F=M[0],_=M[1],V=Object(a.useState)(!1),Y=Object(c.a)(V,2),q=Y[0],J=Y[1],X=Object(a.useState)(document.body),G=Object(c.a)(X,2),K=G[0],Q=G[1],Z=Object(a.useState)(f.values(r.TableOperation).map((function(e){return parseInt(e.toString())}))),$=Object(c.a)(Z,2),ee=$[0],te=$[1],ne=Object(a.useState)(-1),ae=Object(c.a)(ne,2),oe=ae[0],ie=ae[1],ce=Object(a.useState)(-1),re=Object(c.a)(ce,2),se=re[0],le=re[1],ue=function(e,t,n){return[].concat(Object(y.a)(e.slice(0,t)),[n],Object(y.a)(e.slice(t)))},de=function(e,t,n){return[].concat(Object(y.a)(e.slice(0,t+1)),[n],Object(y.a)(e.slice(t+1)))},pe=function(e,t){return[].concat(Object(y.a)(e.slice(0,t)),Object(y.a)(e.slice(t+1)))},be=Object(a.useCallback)((function(e,t){return _((function(n){return f.map(n,(function(n){var a=n[e];return delete n[e],n[t]=a,n}))}))}),[]),me=Object(a.useCallback)((function(e){return function(t){var n=t.name,a=void 0===n?"":n,o=t.dataType,i=void 0===o?r.DataType.Undefined:o,c=P[e].accessor;z((function(t){var n=Object(y.a)(t);return n[e].label=a,n[e].accessor=a,n[e].dataType=i,n})),a!==c&&be(c,a)}}),[P,be]),fe=Object(a.useCallback)((function(e,t,n){_((function(a){var o=Object(y.a)(a);return o[e][t]=n,o}))}),[]),Oe=Object(a.useCallback)((function(e,t){_((function(n){var a=Object(y.a)(n);return a[e]=t,a}))}),[]),xe=Object(a.useCallback)((function(e){var t="".concat(o).concat(e);return f.find(P,{accessor:t})?xe(e+1):t}),[o,P]),Ee=Object(a.useCallback)((function(e){return{accessor:xe(e.length),label:xe(e.length),dataType:r.DataType.Undefined}}),[xe]),je=Object(a.useCallback)((function(e){switch(e){case r.TableOperation.ColumnInsertLeft:z((function(e){return ue(e,oe,Ee(e))}));break;case r.TableOperation.ColumnInsertRight:z((function(e){return de(e,oe,Ee(e))}));break;case r.TableOperation.ColumnDelete:z((function(e){return pe(e,oe)}));break;case r.TableOperation.RowInsertAbove:_((function(e){return ue(e,se,b())}));break;case r.TableOperation.RowInsertBelow:_((function(e){return de(e,se,b())}));break;case r.TableOperation.RowDelete:_((function(e){return pe(e,se)}))}J(!1)}),[Ee,oe,se,b]),ve={minWidth:38,width:150,Cell:Object(a.useCallback)((function(e){return e.column.isCountColumn?e.value:x(e)}),[x])},ye=function(e){var t=e.closest("table")===B.current,n=!e.classList.contains(U);return t&&n},ge=Object(g.useTable)({columns:P,data:F,defaultColumn:ve,onCellUpdate:fe,onRowUpdate:Oe,getThProps:function(e){return{onContextMenu:function(t){var n=t.target,a=!P[e].disableHandlerOnHeader;ye(n)&&a&&(t.preventDefault(),te([r.TableOperation.ColumnInsertLeft,r.TableOperation.ColumnInsertRight].concat(Object(y.a)(P.length>2&&e>0?[r.TableOperation.ColumnDelete]:[]))),Q(n),J(!0),ie(e))}}},getTdProps:function(e,t){return{onContextMenu:function(n){var a=n.target;ye(a)&&(n.preventDefault(),te([r.TableOperation.ColumnInsertLeft,r.TableOperation.ColumnInsertRight].concat(Object(y.a)(P.length>2&&e>0?[r.TableOperation.ColumnDelete]:[]),[r.TableOperation.RowInsertAbove,r.TableOperation.RowInsertBelow],Object(y.a)(F.length>1?[r.TableOperation.RowDelete]:[]))),Q(a),J(!0),ie(e),le(t))}}}},g.useBlockLayout,g.useResizeColumns),Te=Object(a.useMemo)((function(){return a.createElement(l.a,{className:"table-handler",hasNoPadding:!0,showClose:!1,distance:5,position:"right",isVisible:q,shouldClose:function(){return J(!1)},shouldOpen:function(e){return null===e||void 0===e?void 0:e()},reference:function(){return K},bodyContent:a.createElement(S,{handlerConfiguration:I,allowedOperations:ee,onOperation:je})})}),[q,I,ee,je,K]);Object(a.useEffect)((function(){u(P.slice(1))}),[u,P]),Object(a.useEffect)((function(){d(F)}),[d,F]);var he=null===ge.state.columnResizing.isResizingColumn&&!f.isEmpty(ge.state.columnResizing.columnWidths);Object(a.useEffect)((function(){z((function(e){return f.forEach(ge.state.columnResizing.columnWidths,(function(t,n){var a=f.findIndex(e,{accessor:n}),o=Object(i.a)({},e[a]);o.width=t,e.splice(a,1,o)})),Object(y.a)(e)}))}),[he]);var Ce=Object(a.useCallback)((function(e,t){return a.createElement(T.a,Object.assign({},e.getHeaderProps(),{className:"fixed-column",key:t}),a.createElement("div",{className:"header-cell","data-ouia-component-type":"expression-column-header"},e.label))}),[]),we=Object(a.useCallback)((function(e,t){return a.createElement(O,{title:s,selectedExpressionName:e.label,selectedDataType:e.dataType,onExpressionUpdate:me(t),key:t},a.createElement(T.a,Object.assign({},e.getHeaderProps(),ge.getThProps(t),{className:"resizable-column",key:t}),a.createElement("div",{className:"header-cell","data-ouia-component-type":"expression-column-header"},a.createElement("div",null,a.createElement("p",{className:"pf-u-text-truncate"},e.label),a.createElement("p",{className:"pf-u-text-truncate data-type"},"(",e.dataType,")")),a.createElement("div",Object.assign({className:"pf-c-drawer ".concat(e.canResize?"":"resizer-disabled")},e.canResize?e.getResizerProps():{}),a.createElement("div",{className:"pf-c-drawer__splitter pf-m-vertical"},a.createElement("div",{className:"pf-c-drawer__splitter-handle"}))))))}),[s,me,ge]),Re=Object(a.useMemo)((function(){return a.createElement(h.a,{className:"table-row additive-row"},a.createElement(C.a,{role:"cell",className:"empty-cell"},a.createElement("br",null)),a.createElement(C.a,{role:"cell",className:"row-remainder-content"},t))}),[t]);return a.createElement("div",{className:"table-component"},a.createElement(w.a,Object.assign({variant:"compact"},ge.getTableProps(),{ref:B}),a.createElement(R.a,{noWrap:!0,className:D?"headless-table":""},a.createElement("tr",null,ge.headers.map((function(e,t){return e.isCountColumn?Ce(e,t):we(e,t)})))),a.createElement(N.a,ge.getTableBodyProps(),ge.rows.map((function(e,t){return ge.prepareRow(e),a.createElement(h.a,Object.assign({className:"table-row"},e.getRowProps(),{key:t,ouiaId:"expression-row-"+t}),e.cells.map((function(e,n){return a.createElement(C.a,Object.assign({},0===n?{}:e.getCellProps(),ge.getTdProps(n,t),{key:n,"data-ouia-component-id":"expression-column-"+n,className:0===n?"counter-cell":"data-cell"}),0===n?t+1:e.render("Cell"))})))})),t?Re:null)),q?Te:null)},W=function(e){var t=Object(d.useBoxedExpressionEditorI18n)().i18n,n=[{group:t.columns,items:[{name:t.columnOperations.insertLeft,type:r.TableOperation.ColumnInsertLeft},{name:t.columnOperations.insertRight,type:r.TableOperation.ColumnInsertRight},{name:t.columnOperations.delete,type:r.TableOperation.ColumnDelete}]},{group:t.rows,items:[{name:t.rowOperations.insertAbove,type:r.TableOperation.RowInsertAbove},{name:t.rowOperations.insertBelow,type:r.TableOperation.RowInsertBelow},{name:t.rowOperations.delete,type:r.TableOperation.RowDelete}]}],o=Object(a.useState)(void 0===e.columns?[{name:"column-1",dataType:r.DataType.Undefined}]:e.columns),s=Object(c.a)(o,2),l=s[0],u=s[1],p=Object(a.useState)(void 0===e.rows?[[]]:e.rows),b=Object(c.a)(p,2),m=b[0],O=b[1];Object(a.useEffect)((function(){var t,n,a,o=Object(i.a)(Object(i.a)({},e),{},{columns:l,rows:m});e.isHeadless?null===(t=e.onUpdatingRecursiveExpression)||void 0===t||t.call(e,o):null===(n=window.beeApi)||void 0===n||null===(a=n.broadcastRelationExpressionDefinition)||void 0===a||a.call(n,o)}),[e,l,m]);var x=Object(a.useCallback)((function(){return f.map(l,(function(e){return Object(i.a)({label:e.name,accessor:e.name,dataType:e.dataType},e.width?{width:e.width}:{})}))}),[l]),E=Object(a.useCallback)((function(e){return u(f.map(e,(function(e){return{name:e.accessor,dataType:e.dataType,width:e.width}})))}),[]),j=Object(a.useCallback)((function(){return f.map(m,(function(e){return f.reduce(l,(function(t,n,a){return t[n.name]=e[a]||"",t}),{})}))}),[l,m]),v=Object(a.useCallback)((function(e){return O(f.map(e,(function(e){return f.reduce(l,(function(t,n){return t.push(e[n.name]||""),t}),[])})))}),[l]);return a.createElement("div",{className:"relation-expression"},a.createElement(B,{columnPrefix:"column-",editColumnLabel:t.editRelation,columns:x(),rows:j(),onColumnsUpdate:E,onRowsUpdate:v,handlerConfiguration:n}))},A=(n(284),n(285),n(286),n(45)),P=[r.LogicType.LiteralExpression],z=function(e){var t=e.contextExpressionId,n=e.children,o=e.expression,s=e.onUpdatingRecursiveExpression,l=e.expressionWidth,u=e.onUpdatingInfoWidth,d=e.onUpdatingExpressionWidth,p=Object(a.useRef)(null),b=Object(a.useState)(o),m=Object(c.a)(b,2),f=m[0],O=m[1],x=Object(a.useState)(l||Y),j=Object(c.a)(x,2),v=j[0],y=j[1],g=Object(a.useState)(410),T=Object(c.a)(g,2),h=(T[0],T[1],Object(A.c)(q(t))),C=Object(c.a)(h,2),w=C[0],R=C[1];Object(a.useEffect)((function(){y(l||Y)}),[l]);var N=void 0===o.logicType;Object(a.useEffect)((function(){O(o)}),[N]),Object(a.useEffect)((function(){s(f)}),[s,f]);var I=Object(a.useCallback)((function(){return p.current}),[]),k=Object(a.useCallback)((function(e){O((function(t){return Object(i.a)(Object(i.a)({},t),{},{logicType:e})}))}),[]),D=Object(a.useCallback)((function(){y(Y),d(Y),O((function(e){return{name:e.name,dataType:e.dataType,logicType:r.LogicType.Undefined}}))}),[d]),L=Object(a.useCallback)((function(e){u(e),R(e)}),[u,R]),S=Object(a.useCallback)((function(e){y(e),d(e)}),[d]),U=Object(a.useMemo)((function(){return a.createElement($,{isHeadless:!0,onUpdatingRecursiveExpression:s,selectedExpression:f,onLogicTypeUpdating:k,onLogicTypeResetting:D,getPlacementRef:I})}),[f,I,D,k,s]);return a.createElement("div",{className:"context-entry"},a.createElement("div",{className:"entry-info"},a.createElement(E,{width:w,height:V,minWidth:_,minHeight:V,onHorizontalResizeStop:L},n)),a.createElement("div",{className:"entry-expression",ref:p},f.logicType&&P.includes(f.logicType)?function(e){var t,n=(null===(t=p.current)||void 0===t?void 0:t.getBoundingClientRect().width)||0;return n>v&&n-v>=1&&y(n),a.createElement(E,{width:v,height:V,minWidth:Y,minHeight:V,onHorizontalResizeStop:S},e)}(U):U))},H=function(e){var t=e.data,n=e.row.index,o=e.onRowUpdate,r=Object(d.useBoxedExpressionEditorI18n)().i18n,s=t[n],l=Object(a.useState)(s.name),u=Object(c.a)(l,2),p=u[0],b=u[1],m=Object(a.useState)(s.dataType),f=Object(c.a)(m,2),x=f[0],E=f[1],j=Object(a.useState)(s.expression),v=Object(c.a)(j,2),y=v[0],g=v[1],T=Object(a.useState)(s.infoWidth),h=Object(c.a)(T,2),C=h[0],w=h[1],R=Object(a.useState)(s.expressionWidth),N=Object(c.a)(R,2),I=N[0],k=N[1],D=Object(A.c)(q(s.contextExpressionId)),L=Object(c.a)(D,1)[0];Object(a.useEffect)((function(){b(s.name)}),[s.name]),Object(a.useEffect)((function(){E(s.dataType)}),[s.dataType]);var S=void 0===s.expression.logicType;Object(a.useEffect)((function(){g(s.expression)}),[S]),Object(a.useEffect)((function(){w(s.infoWidth)}),[s.infoWidth]),Object(a.useEffect)((function(){o(n,Object(i.a)(Object(i.a)({},s),{},{expression:y}))}),[y]),Object(a.useEffect)((function(){delete s.infoWidth,o(n,Object(i.a)(Object(i.a)({},s),C!==_?{infoWidth:C}:{}))}),[C]),Object(a.useEffect)((function(){delete s.infoWidth,o(n,Object(i.a)(Object(i.a)({},s),L!==_?{infoWidth:L}:{}))}),[L]),Object(a.useEffect)((function(){delete s.expressionWidth,o(n,Object(i.a)(Object(i.a)({},s),I!==Y?{expressionWidth:I}:{}))}),[I]);var U=Object(a.useCallback)((function(e){var t=e.name,a=e.dataType;b(t),E(a),o(n,Object(i.a)(Object(i.a)({},s),{},{name:t,dataType:a}))}),[s,n,o]),B=Object(a.useCallback)((function(e){g(e)}),[]);return a.createElement("div",{className:"context-entry-cell"},a.createElement(z,{contextExpressionId:s.contextExpressionId,expression:y,onUpdatingRecursiveExpression:B,expressionWidth:I,onUpdatingInfoWidth:w,onUpdatingExpressionWidth:k},a.createElement(O,{title:r.editContextEntry,selectedExpressionName:p,selectedDataType:x,onExpressionUpdate:U},a.createElement("div",{className:"entry-definition"},a.createElement("p",{className:"entry-name pf-u-text-truncate",title:p},p),a.createElement("p",{className:"entry-data-type pf-u-text-truncate",title:x},"(",x,")")))))},M="ContextEntry-1",F=r.DataType.Undefined,_=120,V=70,Y=210,q=Object(A.b)({key:"lastContextInfoWidthStateFamily",default:_}),J=function(e){var t=e.uid,n=e.name,o=void 0===n?M:n,s=e.dataType,l=void 0===s?F:s,u=e.onUpdatingNameAndDataType,p=e.contextEntries,b=e.result,m=void 0===b?{}:b,O=e.resultExpressionWidth,x=e.isHeadless,E=void 0!==x&&x,j=e.onUpdatingRecursiveExpression,v=Object(d.useBoxedExpressionEditorI18n)().i18n,y=[{group:v.contextEntry,items:[{name:v.rowOperations.insertAbove,type:r.TableOperation.RowInsertAbove},{name:v.rowOperations.insertBelow,type:r.TableOperation.RowInsertBelow},{name:v.rowOperations.delete,type:r.TableOperation.RowDelete}]}],g=Object(a.useState)([{label:o,accessor:o,dataType:l,disableHandlerOnHeader:!0,disableResizing:!0}]),T=Object(c.a)(g,2),h=T[0],C=T[1],w=Object(a.useState)(p||[{contextExpressionId:t,name:M,dataType:F,expression:{}}]),R=Object(c.a)(w,2),N=R[0],I=R[1],k=Object(a.useState)(m),D=Object(c.a)(k,2),L=D[0],S=D[1],U=Object(a.useState)(O),W=Object(c.a)(U,2),P=W[0],V=W[1],J=Object(A.c)(q(t)),X=Object(c.a)(J,2),G=X[0],K=X[1];Object(a.useEffect)((function(){var e,n,a=h[0],o=Object(i.a)(Object(i.a)({uid:t,logicType:r.LogicType.Context,name:a.accessor,dataType:a.dataType,contextEntries:N,result:L},G&&G!==_?{resultInfoWidth:G}:{}),P&&P!==Y?{resultExpressionWidth:P}:{});E?null===j||void 0===j||j(o):null===(e=window.beeApi)||void 0===e||null===(n=e.broadcastContextExpressionDefinition)||void 0===n||n.call(e,o)}),[h,E,j,N,L,P,G,t]),Object(a.useEffect)((function(){document.querySelectorAll(".context-expression > .table-component > table > tbody > tr > td.data-cell").forEach((function(e){return e.style.width="100%"})),document.querySelectorAll(".context-expression > .table-component > table > tbody > tr.table-row").forEach((function(e){return e.style.width="100%"})),document.querySelectorAll(".context-expression > .table-component > table > thead > tr > th.resizable-column").forEach((function(e){return e.style.width="calc((100% - 60px)"}))}));var Q=Object(a.useCallback)((function(e){var t=Object(c.a)(e,1)[0];null===u||void 0===u||u(t.label,t.dataType),C((function(e){var n=Object(c.a)(e,1)[0];return[Object(i.a)(Object(i.a)({},n),{},{label:t.label,accessor:t.accessor,dataType:t.dataType,width:t.width})]}))}),[u]),Z=Object(a.useCallback)((function(e){var t="ContextEntry-".concat(e);return f.find(N,{name:t})?Z(e+1):t}),[N]),$=Object(a.useCallback)((function(){return{contextExpressionId:t,name:Z(N.length),dataType:r.DataType.Undefined,expression:{}}}),[Z,N.length,t]);return a.createElement("div",{className:"context-expression"},a.createElement(B,{isHeadless:E,defaultCell:H,columns:h,rows:N,onColumnsUpdate:Q,onRowAdding:$,onRowsUpdate:I,handlerConfiguration:y},a.createElement(z,{contextExpressionId:t,expression:L,onUpdatingRecursiveExpression:S,expressionWidth:P,onUpdatingInfoWidth:K,onUpdatingExpressionWidth:V},a.createElement("div",{className:"context-result"},"<result>"))))},X=n(302),G=n(171),K=n(101);var Q=n(168),Z=n.n(Q),$=function(e){var t=e.selectedExpression,n=e.onLogicTypeUpdating,o=e.onLogicTypeResetting,i=e.onUpdatingNameAndDataType,s=e.getPlacementRef,l=e.isHeadless,p=void 0!==l&&l,b=e.onUpdatingRecursiveExpression,m=Object(d.useBoxedExpressionEditorI18n)().i18n,O=f.extend(t,{isHeadless:p,onUpdatingNameAndDataType:i,onUpdatingRecursiveExpression:b}),x=function(e){return!f.isEmpty(e)&&e!==r.LogicType.Undefined},E=Object(a.useState)(x(O.logicType)),v=Object(c.a)(E,2),y=v[0],g=v[1];Object(a.useEffect)((function(){g(x(t.logicType))}),[t.logicType]);var T=function(){var e=Object(a.useRef)(null),t=Object(a.useState)("0px"),n=Object(c.a)(t,2),o=n[0],i=n[1],r=Object(a.useState)("0px"),s=Object(c.a)(r,2),l=s[0],u=s[1],d=Object(a.useState)(!1),p=Object(c.a)(d,2),b=p[0],m=p[1],f=Object(a.useCallback)((function(){b&&m(!1)}),[b]),O=Object(a.useCallback)((function(t){e.current&&e.current===t.target&&(t.preventDefault(),i("".concat(t.pageX,"px")),u("".concat(t.pageY,"px")),m(!0))}),[i,u]);return Object(a.useEffect)((function(){return document.addEventListener("click",f),document.addEventListener("contextmenu",f),document.addEventListener("contextmenu",O),function(){document.removeEventListener("click",f),document.removeEventListener("contextmenu",f),document.removeEventListener("contextmenu",O)}})),{contextMenuRef:e,contextMenuXPos:o,contextMenuYPos:l,contextMenuVisibility:b,setContextMenuVisibility:m}}(),h=T.contextMenuRef,C=T.contextMenuXPos,w=T.contextMenuYPos,R=T.contextMenuVisibility,N=T.setContextMenuVisibility,I=Object(a.useMemo)((function(){switch(O.logicType){case r.LogicType.LiteralExpression:return a.createElement(j,O);case r.LogicType.Relation:return a.createElement(W,O);case r.LogicType.Context:return a.createElement(J,Object.assign({},O,{uid:Z()()}));case r.LogicType.DecisionTable:case r.LogicType.Function:case r.LogicType.Invocation:case r.LogicType.List:default:return O.logicType}}),[O.logicType]),k=Object(a.useCallback)((function(){return Object.values(r.LogicType).filter((function(e){return e!==r.LogicType.Undefined}))}),[]),D=Object(a.useCallback)((function(){return f.map(k(),(function(e){return a.createElement(X.a,{key:e},e)}))}),[k]),L=Object(a.useCallback)((function(){return s()}),[s]),S=Object(a.useCallback)((function(e,t){g(!0);var a=t.children;n(a)}),[n]),B=Object(a.useCallback)((function(){return a.createElement(u,{title:m.selectLogicType,arrowPlacement:L,body:a.createElement(G.a,{onSelect:S},D())})}),[m.selectLogicType,L,S,D]),A=Object(a.useCallback)((function(){g(!1),N(!1),o()}),[o,N]),P=Object(a.useCallback)((function(){return a.createElement("div",{className:"context-menu-container no-table-context-menu",style:{top:w,left:C}},a.createElement(K.a,{isDisabled:!y,isSmall:!0,variant:K.b.primary,onClick:A},m.clear))}),[y,C,w,A,m.clear]);return a.createElement("div",{className:"logic-type-selector ".concat(U," ").concat(y?"logic-type-selected":"logic-type-not-present"),ref:h},y?I:m.selectExpression,y?null:B(),R?P():null)},ee=function(e){var t=Object(a.useRef)(null),n=Object(a.useState)(e.selectedExpression),o=Object(c.a)(n,2),s=o[0],l=o[1],u=Object(a.useCallback)((function(e,t){l((function(n){return Object(i.a)(Object(i.a)({},n),{},{name:e,dataType:t})}))}),[]),d=Object(a.useCallback)((function(e){l((function(t){return Object(i.a)(Object(i.a)({},t),{},{logicType:e})}))}),[]),p=Object(a.useCallback)((function(){l((function(e){var t,n,a={name:e.name,dataType:e.dataType,logicType:r.LogicType.Undefined};return null===(t=window.beeApi)||void 0===t||null===(n=t.resetExpressionDefinition)||void 0===n||n.call(t,a),a}))}),[]),b=Object(a.useCallback)((function(){return t.current}),[]);return a.createElement("div",{className:"expression-container"},a.createElement("span",{className:"expression-title"},s.name),a.createElement("span",{className:"expression-type"},"(",s.logicType||r.LogicType.Undefined,")"),a.createElement("div",{className:"expression-container-box",ref:t},a.createElement($,{selectedExpression:s,onLogicTypeUpdating:d,onLogicTypeResetting:p,onUpdatingNameAndDataType:u,getPlacementRef:b})))},te=function(e){return a.createElement(A.a,null,a.createElement(o.I18nDictionariesProvider,{defaults:d.boxedExpressionEditorI18nDefaults,dictionaries:d.boxedExpressionEditorDictionaries,initialLocale:navigator.language,ctx:d.BoxedExpressionEditorI18nContext},a.createElement(ee,e.expressionDefinition)))}},149:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return u}));var a=n(0),o=n(7),i=n(163),c=Object(o.a)(Object(o.a)({},i.en),{},{choose:"Choose...",clear:"Clear",columnOperations:{delete:"Delete",insertLeft:"Insert left",insertRight:"Insert right"},columns:"COLUMNS",context:"Context",contextEntry:"CONTEXT ENTRY",dataType:"Data Type",decisionTable:"Decision Table",editContextEntry:"Edit Context Entry",editExpression:"Edit Expression",editRelation:"Edit Relation",function:"Function",invocation:"Invocation",list:"List",literalExpression:"Literal expression",name:"Name",relation:"Relation",rowOperations:{delete:"Delete",insertAbove:"Insert above",insertBelow:"Insert below"},rows:"ROWS",selectExpression:"Select expression",selectLogicType:"Select logic type"}),r={locale:"en",dictionary:c},s=new Map([["en",c]]),l=a.createContext({});function u(){return Object(a.useContext)(l)}},173:function(e,t,n){"use strict";n.r(t),n.d(t,"App",(function(){return r}));var a=n(2),o=n(0),i=n(32),c=(n(179),n(114)),r=function(){var e={name:"Expression Name",dataType:c.DataType.Undefined},t=Object(o.useState)(e),n=Object(a.a)(t,2),i=n[0],r=n[1],s={selectedExpression:e};return window.beeApi={resetExpressionDefinition:function(e){return r(e)},broadcastLiteralExpressionDefinition:function(e){return r(e)},broadcastRelationExpressionDefinition:function(e){return r(e)},broadcastContextExpressionDefinition:function(e){return r(e)}},o.createElement("div",{className:"showcase"},o.createElement("div",{className:"boxed-expression"},o.createElement(c.BoxedExpressionEditor,{expressionDefinition:s})),o.createElement("div",{className:"updated-json"},o.createElement("p",{className:"disclaimer"},"\u26a0 Currently, JSON gets updated only for literal expression, relation and context logic types"),o.createElement("pre",null,JSON.stringify(i,null,2))))};i.render(o.createElement(r,null),document.getElementById("root"))},179:function(e,t,n){},180:function(e,t,n){},182:function(e,t,n){},183:function(e,t,n){},184:function(e,t,n){},185:function(e,t,n){},186:function(e,t,n){},210:function(e,t,n){},213:function(e,t,n){},284:function(e,t,n){},285:function(e,t,n){},286:function(e,t,n){},33:function(e,t,n){"use strict";var a=n(125);n.o(a,"BoxedExpressionEditorI18nContext")&&n.d(t,"BoxedExpressionEditorI18nContext",(function(){return a.BoxedExpressionEditorI18nContext})),n.o(a,"boxedExpressionEditorDictionaries")&&n.d(t,"boxedExpressionEditorDictionaries",(function(){return a.boxedExpressionEditorDictionaries})),n.o(a,"boxedExpressionEditorI18nDefaults")&&n.d(t,"boxedExpressionEditorI18nDefaults",(function(){return a.boxedExpressionEditorI18nDefaults})),n.o(a,"useBoxedExpressionEditorI18n")&&n.d(t,"useBoxedExpressionEditorI18n",(function(){return a.useBoxedExpressionEditorI18n}));var o=n(149);n.d(t,"BoxedExpressionEditorI18nContext",(function(){return o.a})),n.d(t,"boxedExpressionEditorDictionaries",(function(){return o.b})),n.d(t,"boxedExpressionEditorI18nDefaults",(function(){return o.c})),n.d(t,"useBoxedExpressionEditorI18n",(function(){return o.d}))},9:function(e,t,n){"use strict";n(120);var a=n(121);n.d(t,"DataType",(function(){return a.a}));var o=n(122);n.o(o,"LogicType")&&n.d(t,"LogicType",(function(){return o.LogicType})),n.o(o,"TableOperation")&&n.d(t,"TableOperation",(function(){return o.TableOperation}));var i=n(123);n.d(t,"LogicType",(function(){return i.a}));var c=n(124);n.d(t,"TableOperation",(function(){return c.a}))}},[[173,1,2]]]);
//# sourceMappingURL=main.bac56397.chunk.js.map