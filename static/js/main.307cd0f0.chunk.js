(this["webpackJsonpboxed-expression-editor-showcase"]=this["webpackJsonpboxed-expression-editor-showcase"]||[]).push([[0],{113:function(e,t,n){"use strict";var a=n(147);n.d(t,"BoxedExpressionEditor",(function(){return a.a}));var o=n(9);n.o(o,"DataType")&&n.d(t,"DataType",(function(){return o.DataType}))},119:function(e,t,n){},120:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.Undefined="<Undefined>",e.Any="Any",e.Boolean="boolean",e.Context="context",e.Date="date",e.DateTime="date and time",e.DateTimeDuration="days and time duration",e.Number="number",e.String="string",e.Time="time",e.YearsMonthsDuration="years and months duration"}(a||(a={}))},121:function(e,t){},122:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.Undefined="<Undefined>",e.LiteralExpression="Literal expression",e.Context="Context",e.DecisionTable="Decision Table",e.Relation="Relation",e.Function="Function",e.Invocation="Invocation",e.List="List"}(a||(a={}))},123:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e[e.ColumnInsertLeft=0]="ColumnInsertLeft",e[e.ColumnInsertRight=1]="ColumnInsertRight",e[e.ColumnDelete=2]="ColumnDelete",e[e.RowInsertAbove=3]="RowInsertAbove",e[e.RowInsertBelow=4]="RowInsertBelow",e[e.RowDelete=5]="RowDelete"}(a||(a={}))},124:function(e,t){},147:function(e,t,n){"use strict";n.d(t,"a",(function(){return K}));n(179);var a=n(0),o=(n(180),n(181),n(149)),r=n(8),i=n(2),c=(n(182),n(9)),s=(n(183),n(184),n(295)),l=(n(185),n(305)),u=(n(186),function(e){var t=e.children,n=e.arrowPlacement,o=e.body,r=e.title,i=e.appendTo;return a.createElement(l.a,{"data-ouia-component-id":"expression-popover-menu",className:"popover-menu-selector",position:"bottom",distance:0,id:"menu-selector",reference:n,appendTo:i,headerContent:a.createElement("div",{className:"selector-menu-title","data-ouia-component-id":"expression-popover-menu-title"},r),bodyContent:o},t)}),d=n(33),p=n(53),b=n(304),m=n(6),f=n(17),O="Expression Name",E=function(e){var t,n,o,r=e.children,s=e.appendTo,l=e.arrowPlacement,E=e.title,x=e.nameField,y=e.dataTypeField,v=e.selectedDataType,j=void 0===v?c.DataType.Undefined:v,T=e.selectedExpressionName,g=e.onExpressionUpdate,C=Object(d.useBoxedExpressionEditorI18n)().i18n;E=null!==(t=E)&&void 0!==t?t:C.editExpression,x=null!==(n=x)&&void 0!==n?n:C.name,y=null!==(o=y)&&void 0!==o?o:C.dataType;var h=Object(a.useState)(!1),w=Object(i.a)(h,2),R=w[0],k=w[1],N=Object(a.useState)(j),D=Object(i.a)(N,2),I=D[0],L=D[1],U=Object(a.useState)(T),S=Object(i.a)(U,2),B=S[0],H=S[1];Object(a.useEffect)((function(){H(T)}),[T]),Object(a.useEffect)((function(){L(j)}),[j]);var P=Object(a.useCallback)((function(e){H(e.target.value),"blur"===e.type&&g({name:e.target.value,dataType:I})}),[I,g]),A=Object(a.useCallback)((function(e,t){k(!1),L(t),g({name:B,dataType:t})}),[B,g]),M=Object(a.useCallback)((function(){return f.map(Object.values(c.DataType),(function(e){return a.createElement(p.a,{key:e,value:e},e)}))}),[]),z=Object(a.useCallback)((function(e){var t;try{t=new RegExp(e.target.value,"i")}catch(n){return M()}return""!==e.target.value?M().filter((function(e){return t.test(e.props.value)})):M()}),[M]),W=Object(a.useCallback)((function(e){return k(e)}),[]);return a.createElement(u,{title:E,arrowPlacement:l,appendTo:s,body:a.createElement("div",{className:"edit-expression-menu"},a.createElement("div",{className:"expression-name"},a.createElement("label",null,x),a.createElement("input",{type:"text",id:"expression-name","data-ouia-component-id":"edit-expression-name",value:B,onChange:P,onBlur:P,className:"form-control pf-c-form-control",placeholder:O})),a.createElement("div",{className:"expression-data-type"},a.createElement("label",null,y),a.createElement(b.a,{ouiaId:"edit-expression-data-type",variant:m.e.typeahead,typeAheadAriaLabel:C.choose,onToggle:W,onSelect:A,onFilter:z,isOpen:R,selections:I,hasInlineFilter:!0,inlineFilterPlaceholderText:C.choose},M())))},r)},x=n(164),y=function(e){var t=e.children,n=e.height,o=e.minHeight,r=e.minWidth,i=e.onHorizontalResizeStop,c=e.width,s=Object(a.useMemo)((function(){return a.createElement("div",{className:"pf-c-drawer"},a.createElement("div",{className:"pf-c-drawer__splitter pf-m-vertical"},a.createElement("div",{className:"pf-c-drawer__splitter-handle"})))}),[]),l=Object(a.useCallback)((function(e,t){return i(t.size.width)}),[i]);return a.createElement(x.ResizableBox,{width:c,height:n,minConstraints:[r,o],axis:"x",onResizeStop:l,handle:s},t)},v=function(e){var t=e.content,n=e.dataType,o=e.name,l=void 0===o?O:o,u=e.onUpdatingNameAndDataType,d=e.isHeadless,p=void 0!==d&&d,b=e.onUpdatingRecursiveExpression,m=e.width,f=Object(a.useState)(l),x=Object(i.a)(f,2),v=x[0],j=x[1],T=Object(a.useState)(n),g=Object(i.a)(T,2),C=g[0],h=g[1],w=Object(a.useState)(t),R=Object(i.a)(w,2),k=R[0],N=R[1],D=Object(a.useState)(m||250),I=Object(i.a)(D,2),L=I[0],U=I[1];Object(a.useEffect)((function(){var e,t,n=Object(r.a)({name:v,dataType:C,logicType:c.LogicType.LiteralExpression,content:k},p||250===L?{}:{width:L});p?null===b||void 0===b||b(n):null===(e=window.beeApi)||void 0===e||null===(t=e.broadcastLiteralExpressionDefinition)||void 0===t||t.call(e,n)}),[v,C,k,p,b,L]);var S=Object(a.useCallback)((function(e){var t=e.dataType,n=void 0===t?c.DataType.Undefined:t,a=e.name,o=void 0===a?O:a;j(o),h(n),null===u||void 0===u||u(o,n)}),[u]),B=Object(a.useCallback)((function(e){var t=e.target.value;N(t)}),[]),H=Object(a.useCallback)((function(){return document.querySelector(".literal-expression-header")}),[]),P=Object(a.useCallback)((function(e){return U(e)}),[]),A=Object(a.useCallback)((function(e){return a.createElement(y,{width:L,height:40,minWidth:250,minHeight:40,onHorizontalResizeStop:P},e)}),[L,P]),M=Object(a.useMemo)((function(){return a.createElement("div",{className:"literal-expression-header"},A(a.createElement("div",{className:"expression-info"},a.createElement("p",{className:"expression-name pf-u-text-truncate"},v),a.createElement("p",{className:"expression-data-type pf-u-text-truncate"},"(",C,")"))))}),[C,v,A]),z=Object(a.useMemo)((function(){return a.createElement(s.a,{defaultValue:k,onBlur:B,"aria-label":"literal-expression-content"})}),[k,B]);return a.createElement("div",{className:"literal-expression"},p?null:M,a.createElement("div",{className:"literal-expression-body"},z),a.createElement(E,{arrowPlacement:H,selectedExpressionName:v,selectedDataType:C,onExpressionUpdate:S}))},j=(n(209),n(210),n(11)),T=(n(211),n(103)),g=n(306),C=n(299),h=n(303),w=n(309),R=n(300),k=n(301),N=(n(214),n(296)),D=n(297),I=n(298),L=n(307),U=function(e){var t=e.handlerConfiguration,n=e.allowedOperations,o=e.onOperation;return a.createElement(N.a,{ouiaId:"expression-table-handler-menu",className:"table-handler-menu",onSelect:function(e,t){return o(t)}},t.map((function(e){return a.createElement(D.a,{key:e.group,label:e.group,className:f.every(e.items,(function(e){return!f.includes(n,e.type)}))?"no-allowed-actions-in-group":""},a.createElement(I.a,null,e.items.map((function(e){return a.createElement(L.a,{"data-ouia-component-id":"expression-table-handler-menu-"+e.name,key:e.type,itemId:e.type,isDisabled:!f.includes(n,e.type)},e.name)}))))})))},S="no-table-context-menu",B=function(e){var t=e.children,n=e.columnPrefix,o=void 0===n?"column-":n,s=e.editColumnLabel,u=e.onColumnsUpdate,d=e.onRowsUpdate,p=e.onRowAdding,b=void 0===p?function(){return{}}:p,m=e.defaultCell,O=e.rows,x=e.columns,y=e.handlerConfiguration,v=e.isHeadless,N=void 0!==v&&v,D=e.headerHasMultipleLevels,I=void 0!==D&&D,L=Object(a.useRef)(null),B=Object(a.useState)([Object(r.a)({label:"#",accessor:"#",width:60,disableResizing:!0,isCountColumn:!0,hideFilter:!0},I?{columns:[{label:"0",accessor:"0",width:60,disableResizing:!0,isCountColumn:!0,hideFilter:!0}]}:{})].concat(Object(j.a)(x))),H=Object(i.a)(B,2),P=H[0],A=H[1],M=Object(a.useState)(O),z=Object(i.a)(M,2),W=z[0],F=z[1],_=Object(a.useState)(!1),V=Object(i.a)(_,2),G=V[0],Y=V[1],J=Object(a.useState)(document.body),X=Object(i.a)(J,2),q=X[0],K=X[1],Q=Object(a.useState)(f.values(c.TableOperation).map((function(e){return parseInt(e.toString())}))),Z=Object(i.a)(Q,2),$=Z[0],ee=Z[1],te=Object(a.useState)(-1),ne=Object(i.a)(te,2),ae=ne[0],oe=ne[1],re=Object(a.useState)(-1),ie=Object(i.a)(re,2),ce=ie[0],se=ie[1],le=function(e,t,n){return[].concat(Object(j.a)(e.slice(0,t)),[n],Object(j.a)(e.slice(t)))},ue=function(e,t,n){return[].concat(Object(j.a)(e.slice(0,t+1)),[n],Object(j.a)(e.slice(t+1)))},de=function(e,t){return[].concat(Object(j.a)(e.slice(0,t)),Object(j.a)(e.slice(t+1)))},pe=Object(a.useCallback)((function(e,t){return F((function(n){return f.map(n,(function(n){var a=n[e];return delete n[e],n[t]=a,n}))}))}),[]),be=Object(a.useCallback)((function(e){return function(t){var n=t.name,a=void 0===n?"":n,o=t.dataType,r=void 0===o?c.DataType.Undefined:o,i=P[e].accessor;A((function(t){var n=Object(j.a)(t);return n[e].label=a,n[e].accessor=a,n[e].dataType=r,n})),a!==i&&pe(i,a)}}),[P,pe]),me=Object(a.useCallback)((function(e,t,n){F((function(a){var o=Object(j.a)(a);return o[e][t]=n,o}))}),[]),fe=Object(a.useCallback)((function(e,t){F((function(n){var a=Object(j.a)(n);return a[e]=t,a}))}),[]),Oe=Object(a.useCallback)((function(e){var t="".concat(o).concat(e);return f.find(P,{accessor:t})?Oe(e+1):t}),[o,P]),Ee=Object(a.useCallback)((function(e){return{accessor:Oe(e.length),label:Oe(e.length),dataType:c.DataType.Undefined}}),[Oe]),xe=Object(a.useCallback)((function(e){switch(e){case c.TableOperation.ColumnInsertLeft:A((function(e){return le(e,ae,Ee(e))}));break;case c.TableOperation.ColumnInsertRight:A((function(e){return ue(e,ae,Ee(e))}));break;case c.TableOperation.ColumnDelete:A((function(e){return de(e,ae)}));break;case c.TableOperation.RowInsertAbove:F((function(e){return le(e,ce,b())}));break;case c.TableOperation.RowInsertBelow:F((function(e){return ue(e,ce,b())}));break;case c.TableOperation.RowDelete:F((function(e){return de(e,ce)}))}Y(!1)}),[Ee,ae,ce,b]),ye={minWidth:38,width:150,Cell:Object(a.useCallback)((function(e){var t=e.column;return t.isCountColumn?e.value:m?m[t.id](e):function(e){var t=e.value,n=e.row.index,o=e.column.id,r=e.onCellUpdate,c=a.useState(t),s=Object(i.a)(c,2),l=s[0],u=s[1];Object(a.useEffect)((function(){u(t)}),[t]);var d=Object(a.useCallback)((function(e){u(e.target.value)}),[]),p=Object(a.useCallback)((function(){r(n,o,l)}),[o,n,l,r]);return a.createElement("textarea",{value:l||"",onChange:d,onBlur:p})}(e)}),[m])},ve=function(e){var t=e.closest("table")===L.current,n=!e.classList.contains(S);return t&&n},je=Object(T.useTable)({columns:P,data:W,defaultColumn:ye,onCellUpdate:me,onRowUpdate:fe,getThProps:function(e,t){return{onContextMenu:function(n){var a=n.target,o=!e.disableHandlerOnHeader;ve(a)&&o&&(n.preventDefault(),ee([c.TableOperation.ColumnInsertLeft,c.TableOperation.ColumnInsertRight].concat(Object(j.a)(P.length>2&&t>0?[c.TableOperation.ColumnDelete]:[]))),K(a),Y(!0),oe(t))}}},getTdProps:function(e,t){return{onContextMenu:function(n){var a=n.target;ve(a)&&(n.preventDefault(),ee([c.TableOperation.ColumnInsertLeft,c.TableOperation.ColumnInsertRight].concat(Object(j.a)(P.length>2&&e>0?[c.TableOperation.ColumnDelete]:[]),[c.TableOperation.RowInsertAbove,c.TableOperation.RowInsertBelow],Object(j.a)(W.length>1?[c.TableOperation.RowDelete]:[]))),K(a),Y(!0),oe(e),se(t))}}}},T.useBlockLayout,T.useResizeColumns),Te=Object(a.useMemo)((function(){return a.createElement(l.a,{className:"table-handler",hasNoPadding:!0,showClose:!1,distance:5,position:"right",isVisible:G,shouldClose:function(){return Y(!1)},shouldOpen:function(e){return null===e||void 0===e?void 0:e()},reference:function(){return q},bodyContent:a.createElement(U,{handlerConfiguration:y,allowedOperations:$,onOperation:xe})})}),[G,y,$,xe,q]);Object(a.useEffect)((function(){u(P.slice(1))}),[u,P]),Object(a.useEffect)((function(){d(W)}),[d,W]);var ge=function e(t,n,a){var o=f.findIndex(t,{accessor:n});if(o>=0){var i=Object(r.a)({},t[o]);i.width=a,t.splice(o,1,i)}else f.forEach(t,(function(t){return e(t.columns,n,a)}))},Ce=null===je.state.columnResizing.isResizingColumn&&!f.isEmpty(je.state.columnResizing.columnWidths);Object(a.useEffect)((function(){A((function(e){return f.forEach(je.state.columnResizing.columnWidths,(function(t,n){return ge(e,n,t)})),Object(j.a)(e)}))}),[Ce]);var he=Object(a.useCallback)((function(e,t){return a.createElement(g.a,Object.assign({},e.getHeaderProps(),{className:"fixed-column no-clickable-cell",key:t}),a.createElement("div",{className:"header-cell","data-ouia-component-type":"expression-column-header"},e.label))}),[]),we=Object(a.useCallback)((function(e,t){return a.createElement(g.a,Object.assign({},e.getHeaderProps(),je.getThProps(e,t),{className:"resizable-column ".concat(e.dataType?null:"no-clickable-cell"),key:t}),a.createElement("div",{className:"header-cell","data-ouia-component-type":"expression-column-header"},a.createElement("div",null,a.createElement("p",{className:"pf-u-text-truncate"},e.label),e.dataType?a.createElement("p",{className:"pf-u-text-truncate data-type"},"(",e.dataType,")"):null),a.createElement("div",Object.assign({className:"pf-c-drawer ".concat(e.canResize?"":"resizer-disabled")},e.canResize?e.getResizerProps():{}),a.createElement("div",{className:"pf-c-drawer__splitter pf-m-vertical"},a.createElement("div",{className:"pf-c-drawer__splitter-handle"})))))}),[je]),Re=Object(a.useCallback)((function(e,t){return e.dataType?a.createElement(E,{title:s,selectedExpressionName:e.label,selectedDataType:e.dataType,onExpressionUpdate:be(t),key:t},we(e,t)):we(e,t)}),[s,be,we]),ke=Object(a.useCallback)((function(e,t){return e.isCountColumn?he(e,t):Re(e,t)}),[he,Re]),Ne=Object(a.useMemo)((function(){return a.createElement(C.a,{className:"table-row additive-row"},a.createElement(h.a,{role:"cell",className:"empty-cell"},a.createElement("br",null)),null===t||void 0===t?void 0:t.map((function(e,t){return a.createElement(h.a,{role:"cell",key:t,className:"row-remainder-content",style:{width:je.allColumns[t+1].width,minWidth:je.allColumns[t+1].minWidth}},e)})))}),[t,je.allColumns]),De=Object(a.useMemo)((function(){return je.headerGroups.map((function(e){return a.createElement(C.a,Object.assign({key:e.accessor},e.getHeaderGroupProps()),e.headers.map((function(e,t){return ke(e,t)})))}))}),[ke,je.headerGroups]),Ie=Object(a.useMemo)((function(){return a.createElement(C.a,null,f.last(je.headerGroups).headers.map((function(e,t){return ke(e,t)})))}),[ke,je.headerGroups]);return a.createElement("div",{className:"table-component"},a.createElement(w.a,Object.assign({variant:"compact"},je.getTableProps(),{ref:L}),a.createElement(R.a,{noWrap:!0},N?Ie:De),a.createElement(k.a,je.getTableBodyProps(),je.rows.map((function(e,t){return je.prepareRow(e),a.createElement(C.a,Object.assign({className:"table-row"},e.getRowProps(),{key:t,ouiaId:"expression-row-"+t}),e.cells.map((function(e,n){return a.createElement(h.a,Object.assign({},0===n?{}:e.getCellProps(),je.getTdProps(n,t),{key:n,"data-ouia-component-id":"expression-column-"+n,className:0===n?"counter-cell":"data-cell"}),0===n?t+1:e.render("Cell"))})))})),t?Ne:null)),G?Te:null)},H=function(e){var t=Object(d.useBoxedExpressionEditorI18n)().i18n,n=[{group:t.columns,items:[{name:t.columnOperations.insertLeft,type:c.TableOperation.ColumnInsertLeft},{name:t.columnOperations.insertRight,type:c.TableOperation.ColumnInsertRight},{name:t.columnOperations.delete,type:c.TableOperation.ColumnDelete}]},{group:t.rows,items:[{name:t.rowOperations.insertAbove,type:c.TableOperation.RowInsertAbove},{name:t.rowOperations.insertBelow,type:c.TableOperation.RowInsertBelow},{name:t.rowOperations.delete,type:c.TableOperation.RowDelete}]}],o=Object(a.useState)(void 0===e.columns?[{name:"column-1",dataType:c.DataType.Undefined}]:e.columns),s=Object(i.a)(o,2),l=s[0],u=s[1],p=Object(a.useState)(void 0===e.rows?[[]]:e.rows),b=Object(i.a)(p,2),m=b[0],O=b[1];Object(a.useEffect)((function(){var t,n,a,o=Object(r.a)(Object(r.a)({},e),{},{columns:l,rows:m});e.isHeadless?null===(t=e.onUpdatingRecursiveExpression)||void 0===t||t.call(e,o):null===(n=window.beeApi)||void 0===n||null===(a=n.broadcastRelationExpressionDefinition)||void 0===a||a.call(n,o)}),[e,l,m]);var E=Object(a.useCallback)((function(){return f.map(l,(function(e){return Object(r.a)({label:e.name,accessor:e.name,dataType:e.dataType},e.width?{width:e.width}:{})}))}),[l]),x=Object(a.useCallback)((function(e){return u(f.map(e,(function(e){return{name:e.accessor,dataType:e.dataType,width:e.width}})))}),[]),y=Object(a.useCallback)((function(){return f.map(m,(function(e){return f.reduce(l,(function(t,n,a){return t[n.name]=e[a]||"",t}),{})}))}),[l,m]),v=Object(a.useCallback)((function(e){return O(f.map(e,(function(e){return f.reduce(l,(function(t,n){return t.push(e[n.name]||""),t}),[])})))}),[l]);return a.createElement("div",{className:"relation-expression"},a.createElement(B,{columnPrefix:"column-",editColumnLabel:t.editRelation,columns:E(),rows:y(),onColumnsUpdate:x,onRowsUpdate:v,handlerConfiguration:n}))},P=(n(285),function(e){var t=e.expression,n=e.onUpdatingRecursiveExpression,o=Object(a.useRef)(null),s=Object(a.useState)(t),l=Object(i.a)(s,2),u=l[0],d=l[1],p=void 0===t.logicType;Object(a.useEffect)((function(){d(f.omit(t,"isHeadless"))}),[p]),Object(a.useEffect)((function(){n(f.omit(u,"isHeadless"))}),[n,u]);var b=Object(a.useCallback)((function(){return o.current}),[]),m=Object(a.useCallback)((function(e){d((function(t){var n=Object(r.a)(Object(r.a)({},t),{},{logicType:e});return f.omit(n,"isHeadless")}))}),[]),O=Object(a.useCallback)((function(){d((function(e){return{name:e.name,dataType:e.dataType,logicType:c.LogicType.Undefined}}))}),[]);return a.createElement("div",{className:"entry-expression",ref:o},a.createElement(J,{isHeadless:!0,onUpdatingRecursiveExpression:n,selectedExpression:u,onLogicTypeUpdating:m,onLogicTypeResetting:O,getPlacementRef:b}))}),A=function(e){var t=e.data,n=e.row.index,o=e.onRowUpdate,c=t[n],s=Object(a.useState)(c.entryExpression),l=Object(i.a)(s,2),u=l[0],d=l[1],p=void 0===c.entryExpression.logicType;Object(a.useEffect)((function(){d(c.entryExpression)}),[p]),Object(a.useEffect)((function(){o(n,Object(r.a)(Object(r.a)({},c),{},{entryExpression:u}))}),[u]);var b=Object(a.useCallback)((function(e){d(e)}),[]);return a.createElement("div",{className:"context-entry-expression-cell"},a.createElement(P,{expression:u,onUpdatingRecursiveExpression:b}))},M=(n(286),function(e){var t=e.name,n=e.dataType,o=e.onContextEntryUpdate,r=Object(d.useBoxedExpressionEditorI18n)().i18n,c=Object(a.useState)(t),s=Object(i.a)(c,2),l=s[0],u=s[1],p=Object(a.useState)(n),b=Object(i.a)(p,2),m=b[0],f=b[1];Object(a.useEffect)((function(){u(t)}),[t]),Object(a.useEffect)((function(){f(n)}),[n]);var O=Object(a.useCallback)((function(e){var t=e.name,n=e.dataType;u(t),f(n),o(t,n)}),[o]);return a.createElement("div",{className:"entry-info"},a.createElement(E,{title:r.editContextEntry,selectedExpressionName:l,selectedDataType:m,onExpressionUpdate:O},a.createElement("div",{className:"entry-definition"},a.createElement("p",{className:"entry-name pf-u-text-truncate",title:l},l),a.createElement("p",{className:"entry-data-type pf-u-text-truncate",title:m},"(",m,")"))))}),z=function(e){var t=e.data,n=e.row.index,o=e.onRowUpdate,c=t[n],s=Object(a.useState)(c.entryInfo),l=Object(i.a)(s,2),u=l[0],d=l[1];Object(a.useEffect)((function(){d(c.entryInfo)}),[c.entryInfo]);var p=Object(a.useCallback)((function(e,t){o(n,Object(r.a)(Object(r.a)({},c),{},{entryInfo:{name:e,dataType:t}}))}),[c,n,o]);return a.createElement("div",{className:"context-entry-info-cell"},a.createElement(M,{name:u.name,dataType:u.dataType,onContextEntryUpdate:p}))},W="ContextEntry-1",F=c.DataType.Undefined,_=function(e){var t=e.name,n=void 0===t?W:t,o=e.dataType,s=void 0===o?F:o,l=e.onUpdatingNameAndDataType,u=e.contextEntries,p=e.result,b=void 0===p?{}:p,m=e.entryInfoWidth,O=void 0===m?150:m,E=e.entryExpressionWidth,x=void 0===E?370:E,y=e.isHeadless,v=void 0!==y&&y,j=e.onUpdatingRecursiveExpression,T=Object(d.useBoxedExpressionEditorI18n)().i18n,g=[{group:T.contextEntry,items:[{name:T.rowOperations.insertAbove,type:c.TableOperation.RowInsertAbove},{name:T.rowOperations.insertBelow,type:c.TableOperation.RowInsertBelow},{name:T.rowOperations.delete,type:c.TableOperation.RowDelete}]}],C=Object(a.useState)(b),h=Object(i.a)(C,2),w=h[0],R=h[1],k=Object(a.useState)(O),N=Object(i.a)(k,2),D=N[0],I=N[1],L=Object(a.useState)(x),U=Object(i.a)(L,2),S=U[0],H=U[1],M=Object(a.useState)([{label:n,accessor:n,dataType:s,disableHandlerOnHeader:!0,columns:[{label:"Name",accessor:"entryInfo",disableHandlerOnHeader:!0,width:D,minWidth:150},{label:"Value",accessor:"entryExpression",disableHandlerOnHeader:!0,width:S,minWidth:370}]}]),_=Object(i.a)(M,2),V=_[0],G=_[1],Y=Object(a.useState)(u||[{entryInfo:{name:W,dataType:F},entryExpression:{}}]),J=Object(i.a)(Y,2),X=J[0],q=J[1];Object(a.useEffect)((function(){var e,t,n=Object(i.a)(V,1)[0],a=Object(r.a)(Object(r.a)({logicType:c.LogicType.Context,name:n.accessor,dataType:n.dataType,contextEntries:X,result:f.omit(w,"isHeadless")},D>150?{entryInfoWidth:D}:{}),S>370?{entryExpressionWidth:S}:{});v?null===j||void 0===j||j(f.omit(a,["name","dataType"])):null===(e=window.beeApi)||void 0===e||null===(t=e.broadcastContextExpressionDefinition)||void 0===t||t.call(e,a)}),[V,v,j,X,w,D,S]);var K=Object(a.useCallback)((function(e){var t,n,a=Object(i.a)(e,1)[0];null===l||void 0===l||l(a.label,a.dataType),H(null===(t=f.find(a.columns,{accessor:"entryExpression"}))||void 0===t?void 0:t.width),I(null===(n=f.find(a.columns,{accessor:"entryInfo"}))||void 0===n?void 0:n.width),G((function(e){var t=Object(i.a)(e,1)[0];return[Object(r.a)(Object(r.a)({},t),{},{label:a.label,accessor:a.accessor,dataType:a.dataType})]}))}),[l]),Q=Object(a.useCallback)((function(e){var t="ContextEntry-".concat(e);return f.find(X,{entryInfo:{name:t}})?Q(e+1):t}),[X]),Z=Object(a.useCallback)((function(){return{entryInfo:{name:Q(X.length),dataType:c.DataType.Undefined},entryExpression:{}}}),[Q,X.length]);return a.createElement("div",{className:"context-expression"},a.createElement(B,{headerHasMultipleLevels:!0,isHeadless:v,defaultCell:{entryInfo:z,entryExpression:A},columns:V,rows:X,onColumnsUpdate:K,onRowAdding:Z,onRowsUpdate:q,handlerConfiguration:g},a.createElement("div",{className:"context-result"},"<result>"),a.createElement(P,{expression:w,onUpdatingRecursiveExpression:R})))},V=n(302),G=n(170),Y=n(100);var J=function(e){var t=e.selectedExpression,n=e.onLogicTypeUpdating,o=e.onLogicTypeResetting,r=e.onUpdatingNameAndDataType,s=e.getPlacementRef,l=e.isHeadless,p=void 0!==l&&l,b=e.onUpdatingRecursiveExpression,m=Object(d.useBoxedExpressionEditorI18n)().i18n,O=f.extend(t,{isHeadless:p,onUpdatingNameAndDataType:r,onUpdatingRecursiveExpression:b}),E=function(e){return!f.isEmpty(e)&&e!==c.LogicType.Undefined},x=Object(a.useState)(E(O.logicType)),y=Object(i.a)(x,2),j=y[0],T=y[1];Object(a.useEffect)((function(){T(E(t.logicType))}),[t.logicType]);var g=function(){var e=Object(a.useRef)(null),t=Object(a.useState)("0px"),n=Object(i.a)(t,2),o=n[0],r=n[1],c=Object(a.useState)("0px"),s=Object(i.a)(c,2),l=s[0],u=s[1],d=Object(a.useState)(!1),p=Object(i.a)(d,2),b=p[0],m=p[1],f=Object(a.useCallback)((function(){b&&m(!1)}),[b]),O=Object(a.useCallback)((function(t){e.current&&e.current===t.target&&(t.preventDefault(),r("".concat(t.pageX,"px")),u("".concat(t.pageY,"px")),m(!0))}),[r,u]);return Object(a.useEffect)((function(){return document.addEventListener("click",f),document.addEventListener("contextmenu",f),document.addEventListener("contextmenu",O),function(){document.removeEventListener("click",f),document.removeEventListener("contextmenu",f),document.removeEventListener("contextmenu",O)}})),{contextMenuRef:e,contextMenuXPos:o,contextMenuYPos:l,contextMenuVisibility:b,setContextMenuVisibility:m}}(),C=g.contextMenuRef,h=g.contextMenuXPos,w=g.contextMenuYPos,R=g.contextMenuVisibility,k=g.setContextMenuVisibility,N=Object(a.useMemo)((function(){switch(O.logicType){case c.LogicType.LiteralExpression:return a.createElement(v,O);case c.LogicType.Relation:return a.createElement(H,O);case c.LogicType.Context:return a.createElement(_,O);case c.LogicType.DecisionTable:case c.LogicType.Function:case c.LogicType.Invocation:case c.LogicType.List:default:return O.logicType}}),[O.logicType]),D=Object(a.useCallback)((function(){return Object.values(c.LogicType).filter((function(e){return e!==c.LogicType.Undefined}))}),[]),I=Object(a.useCallback)((function(){return f.map(D(),(function(e){return a.createElement(V.a,{key:e},e)}))}),[D]),L=Object(a.useCallback)((function(){return s()}),[s]),U=Object(a.useCallback)((function(e,t){T(!0);var a=t.children;n(a)}),[n]),B=Object(a.useCallback)((function(){return a.createElement(u,{title:m.selectLogicType,arrowPlacement:L,body:a.createElement(G.a,{onSelect:U},I())})}),[m.selectLogicType,L,U,I]),P=Object(a.useCallback)((function(){T(!1),k(!1),o()}),[o,k]),A=Object(a.useCallback)((function(){return a.createElement("div",{className:"context-menu-container no-table-context-menu",style:{top:w,left:h}},a.createElement(Y.a,{isDisabled:!j,isSmall:!0,variant:Y.b.primary,onClick:P},m.clear))}),[j,h,w,P,m.clear]);return a.createElement("div",{className:"logic-type-selector ".concat(S," ").concat(j?"logic-type-selected":"logic-type-not-present"),ref:C},j?N:m.selectExpression,j?null:B(),R?A():null)},X=function(e){var t=Object(a.useRef)(null),n=Object(a.useState)(e.selectedExpression),o=Object(i.a)(n,2),s=o[0],l=o[1],u=Object(a.useCallback)((function(e,t){l((function(n){return Object(r.a)(Object(r.a)({},n),{},{name:e,dataType:t})}))}),[]),d=Object(a.useCallback)((function(e){l((function(t){return Object(r.a)(Object(r.a)({},t),{},{logicType:e})}))}),[]),p=Object(a.useCallback)((function(){l((function(e){var t,n,a={name:e.name,dataType:e.dataType,logicType:c.LogicType.Undefined};return null===(t=window.beeApi)||void 0===t||null===(n=t.resetExpressionDefinition)||void 0===n||n.call(t,a),a}))}),[]),b=Object(a.useCallback)((function(){return t.current}),[]);return a.createElement("div",{className:"expression-container"},a.createElement("span",{className:"expression-title"},s.name),a.createElement("span",{className:"expression-type"},"(",s.logicType||c.LogicType.Undefined,")"),a.createElement("div",{className:"expression-container-box",ref:t},a.createElement(J,{selectedExpression:s,onLogicTypeUpdating:d,onLogicTypeResetting:p,onUpdatingNameAndDataType:u,getPlacementRef:b})))},q=n(167),K=function(e){return a.createElement(q.a,null,a.createElement(o.I18nDictionariesProvider,{defaults:d.boxedExpressionEditorI18nDefaults,dictionaries:d.boxedExpressionEditorDictionaries,initialLocale:navigator.language,ctx:d.BoxedExpressionEditorI18nContext},a.createElement(X,e.expressionDefinition)))}},148:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return u}));var a=n(0),o=n(8),r=n(162),i=Object(o.a)(Object(o.a)({},r.en),{},{choose:"Choose...",clear:"Clear",columnOperations:{delete:"Delete",insertLeft:"Insert left",insertRight:"Insert right"},columns:"COLUMNS",context:"Context",contextEntry:"CONTEXT ENTRY",dataType:"Data Type",decisionTable:"Decision Table",editContextEntry:"Edit Context Entry",editExpression:"Edit Expression",editRelation:"Edit Relation",function:"Function",invocation:"Invocation",list:"List",literalExpression:"Literal expression",name:"Name",relation:"Relation",rowOperations:{delete:"Delete",insertAbove:"Insert above",insertBelow:"Insert below"},rows:"ROWS",selectExpression:"Select expression",selectLogicType:"Select logic type"}),c={locale:"en",dictionary:i},s=new Map([["en",i]]),l=a.createContext({});function u(){return Object(a.useContext)(l)}},172:function(e,t,n){"use strict";n.r(t),n.d(t,"App",(function(){return c}));var a=n(2),o=n(0),r=n(32),i=(n(178),n(113)),c=function(){var e={name:"Expression Name",dataType:i.DataType.Undefined},t=Object(o.useState)(e),n=Object(a.a)(t,2),r=n[0],c=n[1],s={selectedExpression:e};return window.beeApi={resetExpressionDefinition:function(e){return c(e)},broadcastLiteralExpressionDefinition:function(e){return c(e)},broadcastRelationExpressionDefinition:function(e){return c(e)},broadcastContextExpressionDefinition:function(e){return c(e)}},o.createElement("div",{className:"showcase"},o.createElement("div",{className:"boxed-expression"},o.createElement(i.BoxedExpressionEditor,{expressionDefinition:s})),o.createElement("div",{className:"updated-json"},o.createElement("p",{className:"disclaimer"},"\u26a0 Currently, JSON gets updated only for literal expression, relation and context logic types"),o.createElement("pre",null,JSON.stringify(r,null,2))))};r.render(o.createElement(c,null),document.getElementById("root"))},178:function(e,t,n){},179:function(e,t,n){},182:function(e,t,n){},183:function(e,t,n){},184:function(e,t,n){},185:function(e,t,n){},186:function(e,t,n){},209:function(e,t,n){},211:function(e,t,n){},214:function(e,t,n){},285:function(e,t,n){},286:function(e,t,n){},33:function(e,t,n){"use strict";var a=n(124);n.o(a,"BoxedExpressionEditorI18nContext")&&n.d(t,"BoxedExpressionEditorI18nContext",(function(){return a.BoxedExpressionEditorI18nContext})),n.o(a,"boxedExpressionEditorDictionaries")&&n.d(t,"boxedExpressionEditorDictionaries",(function(){return a.boxedExpressionEditorDictionaries})),n.o(a,"boxedExpressionEditorI18nDefaults")&&n.d(t,"boxedExpressionEditorI18nDefaults",(function(){return a.boxedExpressionEditorI18nDefaults})),n.o(a,"useBoxedExpressionEditorI18n")&&n.d(t,"useBoxedExpressionEditorI18n",(function(){return a.useBoxedExpressionEditorI18n}));var o=n(148);n.d(t,"BoxedExpressionEditorI18nContext",(function(){return o.a})),n.d(t,"boxedExpressionEditorDictionaries",(function(){return o.b})),n.d(t,"boxedExpressionEditorI18nDefaults",(function(){return o.c})),n.d(t,"useBoxedExpressionEditorI18n",(function(){return o.d}))},9:function(e,t,n){"use strict";n(119);var a=n(120);n.d(t,"DataType",(function(){return a.a}));var o=n(121);n.o(o,"LogicType")&&n.d(t,"LogicType",(function(){return o.LogicType})),n.o(o,"TableOperation")&&n.d(t,"TableOperation",(function(){return o.TableOperation}));var r=n(122);n.d(t,"LogicType",(function(){return r.a}));var i=n(123);n.d(t,"TableOperation",(function(){return i.a}))}},[[172,1,2]]]);
//# sourceMappingURL=main.307cd0f0.chunk.js.map