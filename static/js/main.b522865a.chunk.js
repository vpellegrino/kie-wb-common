(this["webpackJsonpboxed-expression-editor-showcase"]=this["webpackJsonpboxed-expression-editor-showcase"]||[]).push([[0],{113:function(e,t,n){"use strict";var a=n(147);n.d(t,"BoxedExpressionEditor",(function(){return a.a}));var o=n(9);n.o(o,"DataType")&&n.d(t,"DataType",(function(){return o.DataType}))},119:function(e,t,n){},120:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.Undefined="<Undefined>",e.Any="Any",e.Boolean="boolean",e.Context="context",e.Date="date",e.DateTime="date and time",e.DateTimeDuration="days and time duration",e.Number="number",e.String="string",e.Time="time",e.YearsMonthsDuration="years and months duration"}(a||(a={}))},121:function(e,t){},122:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.Undefined="<Undefined>",e.LiteralExpression="Literal expression",e.Context="Context",e.DecisionTable="Decision Table",e.Relation="Relation",e.Function="Function",e.Invocation="Invocation",e.List="List"}(a||(a={}))},123:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e[e.ColumnInsertLeft=0]="ColumnInsertLeft",e[e.ColumnInsertRight=1]="ColumnInsertRight",e[e.ColumnDelete=2]="ColumnDelete",e[e.RowInsertAbove=3]="RowInsertAbove",e[e.RowInsertBelow=4]="RowInsertBelow",e[e.RowDelete=5]="RowDelete"}(a||(a={}))},124:function(e,t){},147:function(e,t,n){"use strict";n.d(t,"a",(function(){return $}));n(180);var a=n(0),o=(n(181),n(182),n(149)),c=n(8),r=n(2),i=(n(183),n(9)),s=(n(184),n(185),n(296)),l=(n(186),n(306)),u=(n(187),function(e){var t=e.children,n=e.arrowPlacement,o=e.body,c=e.title,r=e.appendTo;return a.createElement(l.a,{"data-ouia-component-id":"expression-popover-menu",className:"popover-menu-selector",position:"bottom",distance:0,id:"menu-selector",reference:n,appendTo:r,headerContent:a.createElement("div",{className:"selector-menu-title","data-ouia-component-id":"expression-popover-menu-title"},c),bodyContent:o},t)}),d=n(33),p=n(53),b=n(305),m=n(6),f=n(17),O="Expression Name",E=function(e){var t,n,o,c=e.children,s=e.appendTo,l=e.arrowPlacement,E=e.title,x=e.nameField,v=e.dataTypeField,y=e.selectedDataType,j=void 0===y?i.DataType.Undefined:y,g=e.selectedExpressionName,T=e.onExpressionUpdate,C=Object(d.useBoxedExpressionEditorI18n)().i18n;E=null!==(t=E)&&void 0!==t?t:C.editExpression,x=null!==(n=x)&&void 0!==n?n:C.name,v=null!==(o=v)&&void 0!==o?o:C.dataType;var h=Object(a.useState)(!1),w=Object(r.a)(h,2),R=w[0],k=w[1],I=Object(a.useState)(j),N=Object(r.a)(I,2),D=N[0],S=N[1],L=Object(a.useState)(g),U=Object(r.a)(L,2),B=U[0],H=U[1];Object(a.useEffect)((function(){H(g)}),[g]),Object(a.useEffect)((function(){S(j)}),[j]);var M=Object(a.useCallback)((function(e){H(e.target.value),"blur"===e.type&&T({name:e.target.value,dataType:D})}),[D,T]),P=Object(a.useCallback)((function(e,t){k(!1),S(t),T({name:B,dataType:t})}),[B,T]),A=Object(a.useCallback)((function(){return f.map(Object.values(i.DataType),(function(e){return a.createElement(p.a,{key:e,value:e},e)}))}),[]),z=Object(a.useCallback)((function(e){var t;try{t=new RegExp(e.target.value,"i")}catch(n){return A()}return""!==e.target.value?A().filter((function(e){return t.test(e.props.value)})):A()}),[A]),W=Object(a.useCallback)((function(e){return k(e)}),[]);return a.createElement(u,{title:E,arrowPlacement:l,appendTo:s,body:a.createElement("div",{className:"edit-expression-menu"},a.createElement("div",{className:"expression-name"},a.createElement("label",null,x),a.createElement("input",{type:"text",id:"expression-name","data-ouia-component-id":"edit-expression-name",value:B,onChange:M,onBlur:M,className:"form-control pf-c-form-control",placeholder:O})),a.createElement("div",{className:"expression-data-type"},a.createElement("label",null,v),a.createElement(b.a,{ouiaId:"edit-expression-data-type",variant:m.e.typeahead,typeAheadAriaLabel:C.choose,onToggle:W,onSelect:P,onFilter:z,isOpen:R,selections:D,hasInlineFilter:!0,inlineFilterPlaceholderText:C.choose},A())))},c)},x=n(164),v=function(e){var t=e.children,n=e.height,o=e.minHeight,c=e.minWidth,r=e.onHorizontalResizeStop,i=e.width,s=Object(a.useMemo)((function(){return a.createElement("div",{className:"pf-c-drawer"},a.createElement("div",{className:"pf-c-drawer__splitter pf-m-vertical"},a.createElement("div",{className:"pf-c-drawer__splitter-handle"})))}),[]),l=Object(a.useCallback)((function(e,t){return r(t.size.width)}),[r]);return a.createElement(x.ResizableBox,{width:i,height:n,minConstraints:[c,o],axis:"x",onResizeStop:l,handle:s},t)},y=function(e){var t=e.content,n=e.dataType,o=e.name,l=void 0===o?O:o,u=e.onUpdatingNameAndDataType,d=e.isHeadless,p=void 0!==d&&d,b=e.onUpdatingRecursiveExpression,m=e.width,f=Object(a.useState)(l),x=Object(r.a)(f,2),y=x[0],j=x[1],g=Object(a.useState)(n),T=Object(r.a)(g,2),C=T[0],h=T[1],w=Object(a.useState)(t),R=Object(r.a)(w,2),k=R[0],I=R[1],N=Object(a.useState)(m||250),D=Object(r.a)(N,2),S=D[0],L=D[1];Object(a.useEffect)((function(){var e,t,n=Object(c.a)({name:y,dataType:C,logicType:i.LogicType.LiteralExpression,content:k},p||250===S?{}:{width:S});p?null===b||void 0===b||b(n):null===(e=window.beeApi)||void 0===e||null===(t=e.broadcastLiteralExpressionDefinition)||void 0===t||t.call(e,n)}),[y,C,k,p,b,S]);var U=Object(a.useCallback)((function(e){var t=e.dataType,n=void 0===t?i.DataType.Undefined:t,a=e.name,o=void 0===a?O:a;j(o),h(n),null===u||void 0===u||u(o,n)}),[u]),B=Object(a.useCallback)((function(e){var t=e.target.value;I(t)}),[]),H=Object(a.useCallback)((function(){return document.querySelector(".literal-expression-header")}),[]),M=Object(a.useCallback)((function(e){return L(e)}),[]),P=Object(a.useCallback)((function(e){return a.createElement(v,{width:S,height:40,minWidth:250,minHeight:40,onHorizontalResizeStop:M},e)}),[S,M]),A=Object(a.useMemo)((function(){return a.createElement("div",{className:"literal-expression-header"},P(a.createElement("div",{className:"expression-info"},a.createElement("p",{className:"expression-name pf-u-text-truncate"},y),a.createElement("p",{className:"expression-data-type pf-u-text-truncate"},"(",C,")"))))}),[C,y,P]),z=Object(a.useMemo)((function(){return a.createElement(s.a,{defaultValue:k,onBlur:B,"aria-label":"literal-expression-content"})}),[k,B]);return a.createElement("div",{className:"literal-expression"},p?null:A,a.createElement("div",{className:"literal-expression-body"},z),a.createElement(E,{arrowPlacement:H,selectedExpressionName:y,selectedDataType:C,onExpressionUpdate:U}))},j=(n(210),n(211),n(11)),g=(n(212),n(103)),T=n(307),C=n(300),h=n(304),w=n(310),R=n(301),k=n(302),I=(n(215),n(297)),N=n(298),D=n(299),S=n(308),L=function(e){var t=e.handlerConfiguration,n=e.allowedOperations,o=e.onOperation;return a.createElement(I.a,{ouiaId:"expression-table-handler-menu",className:"table-handler-menu",onSelect:function(e,t){return o(t)}},t.map((function(e){return a.createElement(N.a,{key:e.group,label:e.group,className:f.every(e.items,(function(e){return!f.includes(n,e.type)}))?"no-allowed-actions-in-group":""},a.createElement(D.a,null,e.items.map((function(e){return a.createElement(S.a,{"data-ouia-component-id":"expression-table-handler-menu-"+e.name,key:e.type,itemId:e.type,isDisabled:!f.includes(n,e.type)},e.name)}))))})))},U="no-table-context-menu",B=function(e){var t=e.tableId,n=e.children,o=e.columnPrefix,s=void 0===o?"column-":o,u=e.editColumnLabel,d=e.onColumnsUpdate,p=e.onRowsUpdate,b=e.onSingleRowUpdate,m=e.onRowAdding,O=void 0===m?function(){return{}}:m,x=e.defaultCell,v=e.rows,y=e.columns,I=e.handlerConfiguration,N=e.isHeadless,D=void 0!==N&&N,S=e.headerHasMultipleLevels,B=void 0!==S&&S,H=Object(a.useRef)(null),M=Object(a.useState)([Object(c.a)({label:"#",accessor:"#",width:60,disableResizing:!0,isCountColumn:!0,hideFilter:!0},B?{columns:[{label:"0",accessor:"0",width:60,disableResizing:!0,isCountColumn:!0,hideFilter:!0}]}:{})].concat(Object(j.a)(y))),P=Object(r.a)(M,2),A=P[0],z=P[1],W=Object(a.useState)(v),F=Object(r.a)(W,2),_=F[0],V=F[1],Y=Object(a.useState)(!1),X=Object(r.a)(Y,2),q=X[0],G=X[1],J=Object(a.useState)(document.body),K=Object(r.a)(J,2),Q=K[0],Z=K[1],$=Object(a.useState)(f.values(i.TableOperation).map((function(e){return parseInt(e.toString())}))),ee=Object(r.a)($,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(-1),oe=Object(r.a)(ae,2),ce=oe[0],re=oe[1],ie=Object(a.useState)(-1),se=Object(r.a)(ie,2),le=se[0],ue=se[1],de=function(e,t,n){return[].concat(Object(j.a)(e.slice(0,t)),[n],Object(j.a)(e.slice(t)))},pe=function(e,t,n){return[].concat(Object(j.a)(e.slice(0,t+1)),[n],Object(j.a)(e.slice(t+1)))},be=function(e,t){return[].concat(Object(j.a)(e.slice(0,t)),Object(j.a)(e.slice(t+1)))},me=Object(a.useCallback)((function(e,t){return V((function(n){return f.map(n,(function(n){var a=n[e];return delete n[e],n[t]=a,n}))}))}),[]),fe=Object(a.useCallback)((function(e){return function(t){var n=t.name,a=void 0===n?"":n,o=t.dataType,c=void 0===o?i.DataType.Undefined:o,r=A[e].accessor;z((function(t){var n=Object(j.a)(t);return n[e].label=a,n[e].accessor=a,n[e].dataType=c,n})),a!==r&&me(r,a)}}),[A,me]),Oe=Object(a.useCallback)((function(e,t,n){V((function(a){var o=Object(j.a)(a);return o[e][t]=n,o}))}),[]),Ee=Object(a.useCallback)((function(e,t){null===b||void 0===b||b(e,t),V((function(n){var a=Object(j.a)(n);return a[e]=t,a}))}),[b]),xe=Object(a.useCallback)((function(e){var t="".concat(s).concat(e);return f.find(A,{accessor:t})?xe(e+1):t}),[s,A]),ve=Object(a.useCallback)((function(e){return{accessor:xe(e.length),label:xe(e.length),dataType:i.DataType.Undefined}}),[xe]),ye=Object(a.useCallback)((function(e){switch(e){case i.TableOperation.ColumnInsertLeft:z((function(e){return de(e,ce,ve(e))}));break;case i.TableOperation.ColumnInsertRight:z((function(e){return pe(e,ce,ve(e))}));break;case i.TableOperation.ColumnDelete:z((function(e){return be(e,ce)}));break;case i.TableOperation.RowInsertAbove:V((function(e){return de(e,le,O())}));break;case i.TableOperation.RowInsertBelow:V((function(e){return pe(e,le,O())}));break;case i.TableOperation.RowDelete:V((function(e){return be(e,le)}))}G(!1)}),[ve,ce,le,O]),je={minWidth:38,width:150,Cell:Object(a.useCallback)((function(e){var t=e.column;return t.isCountColumn?e.value:x?x[t.id](e):function(e){var t=e.value,n=e.row.index,o=e.column.id,c=e.onCellUpdate,i=a.useState(t),s=Object(r.a)(i,2),l=s[0],u=s[1];Object(a.useEffect)((function(){u(t)}),[t]);var d=Object(a.useCallback)((function(e){u(e.target.value)}),[]),p=Object(a.useCallback)((function(){c(n,o,l)}),[o,n,l,c]);return a.createElement("textarea",{value:l||"",onChange:d,onBlur:p})}(e)}),[x])},ge=function(e){var t=e.closest("table")===H.current,n=!e.classList.contains(U);return t&&n},Te=Object(g.useTable)({columns:A,data:_,defaultColumn:je,onCellUpdate:Oe,onRowUpdate:Ee,getThProps:function(e,t){return{onContextMenu:function(n){var a=n.target,o=!e.disableHandlerOnHeader;ge(a)&&o&&(n.preventDefault(),ne([i.TableOperation.ColumnInsertLeft,i.TableOperation.ColumnInsertRight].concat(Object(j.a)(A.length>2&&t>0?[i.TableOperation.ColumnDelete]:[]))),Z(a),G(!0),re(t))}}},getTdProps:function(e,t){return{onContextMenu:function(n){var a=n.target;ge(a)&&(n.preventDefault(),ne([i.TableOperation.ColumnInsertLeft,i.TableOperation.ColumnInsertRight].concat(Object(j.a)(A.length>2&&e>0?[i.TableOperation.ColumnDelete]:[]),[i.TableOperation.RowInsertAbove,i.TableOperation.RowInsertBelow],Object(j.a)(_.length>1?[i.TableOperation.RowDelete]:[]))),Z(a),G(!0),re(e),ue(t))}}}},g.useBlockLayout,g.useResizeColumns),Ce=Object(a.useMemo)((function(){return a.createElement(l.a,{className:"table-handler",hasNoPadding:!0,showClose:!1,distance:5,position:"right",isVisible:q,shouldClose:function(){return G(!1)},shouldOpen:function(e){return null===e||void 0===e?void 0:e()},reference:function(){return Q},bodyContent:a.createElement(L,{handlerConfiguration:I,allowedOperations:te,onOperation:ye})})}),[q,I,te,ye,Q]);Object(a.useEffect)((function(){d(A.slice(1))}),[d,A]),Object(a.useEffect)((function(){null===p||void 0===p||p(_)}),[p,_]);var he=function e(t,n,a){var o=f.findIndex(t,{accessor:n});if(o>=0){var r=Object(c.a)({},t[o]);r.width=a,t.splice(o,1,r)}else f.forEach(t,(function(t){return e(t.columns,n,a)}))},we=null===Te.state.columnResizing.isResizingColumn&&!f.isEmpty(Te.state.columnResizing.columnWidths);Object(a.useEffect)((function(){z((function(e){return f.forEach(Te.state.columnResizing.columnWidths,(function(t,n){return he(e,n,t)})),Object(j.a)(e)}))}),[we]);var Re=Object(a.useCallback)((function(e,t){return a.createElement(T.a,Object.assign({},e.getHeaderProps(),{className:"fixed-column no-clickable-cell",key:t}),a.createElement("div",{className:"header-cell","data-ouia-component-type":"expression-column-header"},e.label))}),[]),ke=Object(a.useCallback)((function(e,t){return a.createElement(T.a,Object.assign({},e.getHeaderProps(),Te.getThProps(e,t),{className:"resizable-column ".concat(e.dataType?null:"no-clickable-cell"),key:t}),a.createElement("div",{className:"header-cell","data-ouia-component-type":"expression-column-header"},a.createElement("div",null,a.createElement("p",{className:"pf-u-text-truncate"},e.label),e.dataType?a.createElement("p",{className:"pf-u-text-truncate data-type"},"(",e.dataType,")"):null),a.createElement("div",Object.assign({className:"pf-c-drawer ".concat(e.canResize?"":"resizer-disabled")},e.canResize?e.getResizerProps():{}),a.createElement("div",{className:"pf-c-drawer__splitter pf-m-vertical"},a.createElement("div",{className:"pf-c-drawer__splitter-handle"})))))}),[Te]),Ie=Object(a.useCallback)((function(e,t){return e.dataType?a.createElement(E,{title:u,selectedExpressionName:e.label,selectedDataType:e.dataType,onExpressionUpdate:fe(t),key:t},ke(e,t)):ke(e,t)}),[u,fe,ke]),Ne=Object(a.useCallback)((function(e,t){return e.isCountColumn?Re(e,t):Ie(e,t)}),[Re,Ie]),De=Object(a.useMemo)((function(){return a.createElement(C.a,{className:"table-row additive-row"},a.createElement(h.a,{role:"cell",className:"empty-cell"},a.createElement("br",null)),null===n||void 0===n?void 0:n.map((function(e,t){return a.createElement(h.a,{role:"cell",key:t,className:"row-remainder-content",style:{width:Te.allColumns[t+1].width,minWidth:Te.allColumns[t+1].minWidth}},e)})))}),[n,Te.allColumns]),Se=Object(a.useMemo)((function(){return Te.headerGroups.map((function(e){return a.createElement(C.a,Object.assign({key:e.accessor},e.getHeaderGroupProps()),e.headers.map((function(e,t){return Ne(e,t)})))}))}),[Ne,Te.headerGroups]),Le=Object(a.useMemo)((function(){return a.createElement(C.a,null,f.last(Te.headerGroups).headers.map((function(e,t){return Ne(e,t)})))}),[Ne,Te.headerGroups]);return a.createElement("div",{className:"table-component ".concat(t)},a.createElement(w.a,Object.assign({variant:"compact"},Te.getTableProps(),{ref:H}),a.createElement(R.a,{noWrap:!0},D?Le:Se),a.createElement(k.a,Te.getTableBodyProps(),Te.rows.map((function(e,t){return Te.prepareRow(e),a.createElement(C.a,Object.assign({className:"table-row"},e.getRowProps(),{key:t,ouiaId:"expression-row-"+t}),e.cells.map((function(e,n){return a.createElement(h.a,Object.assign({},0===n?{}:e.getCellProps(),Te.getTdProps(n,t),{key:n,"data-ouia-component-id":"expression-column-"+n,className:0===n?"counter-cell":"data-cell"}),0===n?t+1:e.render("Cell"))})))})),n?De:null)),q?Ce:null)},H=function(e){var t=Object(d.useBoxedExpressionEditorI18n)().i18n,n=[{group:t.columns,items:[{name:t.columnOperations.insertLeft,type:i.TableOperation.ColumnInsertLeft},{name:t.columnOperations.insertRight,type:i.TableOperation.ColumnInsertRight},{name:t.columnOperations.delete,type:i.TableOperation.ColumnDelete}]},{group:t.rows,items:[{name:t.rowOperations.insertAbove,type:i.TableOperation.RowInsertAbove},{name:t.rowOperations.insertBelow,type:i.TableOperation.RowInsertBelow},{name:t.rowOperations.delete,type:i.TableOperation.RowDelete}]}],o=Object(a.useState)(void 0===e.columns?[{name:"column-1",dataType:i.DataType.Undefined}]:e.columns),s=Object(r.a)(o,2),l=s[0],u=s[1],p=Object(a.useState)(void 0===e.rows?[[]]:e.rows),b=Object(r.a)(p,2),m=b[0],O=b[1];Object(a.useEffect)((function(){var t,n,a,o=Object(c.a)(Object(c.a)({},e),{},{columns:l,rows:m});e.isHeadless?null===(t=e.onUpdatingRecursiveExpression)||void 0===t||t.call(e,o):null===(n=window.beeApi)||void 0===n||null===(a=n.broadcastRelationExpressionDefinition)||void 0===a||a.call(n,o)}),[e,l,m]);var E=Object(a.useCallback)((function(){return f.map(l,(function(e){return Object(c.a)({label:e.name,accessor:e.name,dataType:e.dataType},e.width?{width:e.width}:{})}))}),[l]),x=Object(a.useCallback)((function(e){return u(f.map(e,(function(e){return{name:e.accessor,dataType:e.dataType,width:e.width}})))}),[]),v=Object(a.useCallback)((function(){return f.map(m,(function(e){return f.reduce(l,(function(t,n,a){return t[n.name]=e[a]||"",t}),{})}))}),[l,m]),y=Object(a.useCallback)((function(e){return O(f.map(e,(function(e){return f.reduce(l,(function(t,n){return t.push(e[n.name]||""),t}),[])})))}),[l]);return a.createElement("div",{className:"relation-expression"},a.createElement(B,{columnPrefix:"column-",editColumnLabel:t.editRelation,columns:E(),rows:v(),onColumnsUpdate:x,onRowsUpdate:y,handlerConfiguration:n}))},M=(n(286),function(e){var t=e.expression,n=e.onUpdatingRecursiveExpression,o=Object(a.useRef)(null),s=Object(a.useState)(t),l=Object(r.a)(s,2),u=l[0],d=l[1],p=void 0===t.logicType;Object(a.useEffect)((function(){d(f.omit(t,"isHeadless"))}),[p]),Object(a.useEffect)((function(){n(f.omit(u,"isHeadless"))}),[n,u]);var b=Object(a.useCallback)((function(){return o.current}),[]),m=Object(a.useCallback)((function(e){d((function(t){var n=Object(c.a)(Object(c.a)({},t),{},{logicType:e});return f.omit(n,"isHeadless")}))}),[]),O=Object(a.useCallback)((function(){d((function(e){return{name:e.name,dataType:e.dataType,logicType:i.LogicType.Undefined}}))}),[]);return a.createElement("div",{className:"entry-expression",ref:o},a.createElement(K,{isHeadless:!0,onUpdatingRecursiveExpression:n,selectedExpression:u,onLogicTypeUpdating:m,onLogicTypeResetting:O,getPlacementRef:b}))}),P=function(e){var t=e.data,n=e.row.index,o=e.onRowUpdate,i=t[n],s=Object(a.useState)(i.entryExpression),l=Object(r.a)(s,2),u=l[0],d=l[1],p=void 0===i.entryExpression.logicType;Object(a.useEffect)((function(){d(i.entryExpression)}),[p]),Object(a.useEffect)((function(){o(n,Object(c.a)(Object(c.a)({},i),{},{entryExpression:u}))}),[u]);var b=Object(a.useCallback)((function(e){d(e)}),[]);return a.createElement("div",{className:"context-entry-expression-cell"},a.createElement(M,{expression:u,onUpdatingRecursiveExpression:b}))},A=(n(287),function(e){var t=e.name,n=e.dataType,o=e.onContextEntryUpdate,c=Object(d.useBoxedExpressionEditorI18n)().i18n,i=Object(a.useState)(t),s=Object(r.a)(i,2),l=s[0],u=s[1],p=Object(a.useState)(n),b=Object(r.a)(p,2),m=b[0],f=b[1];Object(a.useEffect)((function(){u(t)}),[t]),Object(a.useEffect)((function(){f(n)}),[n]);var O=Object(a.useCallback)((function(e){var t=e.name,n=e.dataType;u(t),f(n),o(t,n)}),[o]);return a.createElement("div",{className:"entry-info"},a.createElement(E,{title:c.editContextEntry,selectedExpressionName:l,selectedDataType:m,onExpressionUpdate:O},a.createElement("div",{className:"entry-definition"},a.createElement("p",{className:"entry-name pf-u-text-truncate",title:l},l),a.createElement("p",{className:"entry-data-type pf-u-text-truncate",title:m},"(",m,")"))))}),z=function(e){var t=e.data,n=e.row.index,o=e.onRowUpdate,i=t[n],s=Object(a.useState)(i.entryInfo),l=Object(r.a)(s,2),u=l[0],d=l[1];Object(a.useEffect)((function(){d(i.entryInfo)}),[i.entryInfo]);var p=Object(a.useCallback)((function(e,t){o(n,Object(c.a)(Object(c.a)({},i),{},{entryInfo:{name:e,dataType:t}}))}),[i,n,o]);return a.createElement("div",{className:"context-entry-info-cell"},a.createElement(A,{name:u.name,dataType:u.dataType,onContextEntryUpdate:p}))};function W(){var e,t,n=new MouseEvent("mouseup",{bubbles:!0,cancelable:!0});return{setResizerElement:function(n){!function(e){t=new MouseEvent("mousedown",{clientX:e.getBoundingClientRect().left,clientY:e.getBoundingClientRect().top,bubbles:!0,cancelable:!0})}(e=n)},dragItHorizontally:function(a){e.dispatchEvent(t),function(t){e.dispatchEvent(new MouseEvent("mousemove",{clientX:e.getBoundingClientRect().left+t,clientY:e.getBoundingClientRect().top,bubbles:!0,cancelable:!0}))}(a),e.dispatchEvent(n)}}}var F="ContextEntry-1",_=i.DataType.Undefined,V=function(e){var t=e.uid,n=e.name,o=void 0===n?F:n,s=e.dataType,l=void 0===s?_:s,u=e.onUpdatingNameAndDataType,p=e.contextEntries,b=e.result,m=void 0===b?{}:b,O=e.entryInfoWidth,E=void 0===O?150:O,x=e.entryExpressionWidth,v=void 0===x?370:x,y=e.isHeadless,j=void 0!==y&&y,g=e.onUpdatingRecursiveExpression,T=Object(d.useBoxedExpressionEditorI18n)().i18n,C=W(),h=C.setResizerElement,w=C.dragItHorizontally,R=[{group:T.contextEntry,items:[{name:T.rowOperations.insertAbove,type:i.TableOperation.RowInsertAbove},{name:T.rowOperations.insertBelow,type:i.TableOperation.RowInsertBelow},{name:T.rowOperations.delete,type:i.TableOperation.RowDelete}]}],k=Object(a.useState)(m),I=Object(r.a)(k,2),N=I[0],D=I[1],S=Object(a.useState)(E),L=Object(r.a)(S,2),U=L[0],H=L[1],A=Object(a.useState)(v),V=Object(r.a)(A,2),Y=V[0],X=V[1],q=Object(a.useState)(370),G=Object(r.a)(q,2),J=G[0],K=G[1],Q=Object(a.useState)([{label:o,accessor:o,dataType:l,disableHandlerOnHeader:!0,columns:[{label:"Name",accessor:"entryInfo",disableHandlerOnHeader:!0,width:U,minWidth:150},{label:"Value",accessor:"entryExpression",disableHandlerOnHeader:!0,width:Y,minWidth:J}]}]),Z=Object(r.a)(Q,2),$=Z[0],ee=Z[1],te=Object(a.useState)(p||[{entryInfo:{name:F,dataType:_},entryExpression:{}}]),ne=Object(r.a)(te,2),ae=ne[0],oe=ne[1],ce=Object(a.useCallback)((function(e){var t,n,a=Object(r.a)(e,1)[0];null===u||void 0===u||u(a.label,a.dataType),X(null===(t=f.find(a.columns,{accessor:"entryExpression"}))||void 0===t?void 0:t.width),H(null===(n=f.find(a.columns,{accessor:"entryInfo"}))||void 0===n?void 0:n.width),ee((function(e){var t=Object(r.a)(e,1)[0];return[Object(c.a)(Object(c.a)({},t),{},{label:a.label,accessor:a.accessor,dataType:a.dataType})]}))}),[u]),re=Object(a.useCallback)((function(e){var t="ContextEntry-".concat(e);return f.find(ae,{entryInfo:{name:t}})?re(e+1):t}),[ae]),ie=Object(a.useCallback)((function(){return{entryInfo:{name:re(ae.length),dataType:i.DataType.Undefined},entryExpression:{}}}),[re,ae.length]),se=Object(a.useCallback)((function(){return Array.from(document.querySelectorAll(".context-expression.".concat(t," > .table-component > table > tbody > tr > td:last-of-type"))).reduce((function(e,t){var n=t.clientWidth,a=t.scrollWidth;return{isOverflow:e.isOverflow||a>n,contentWidth:Math.max(e.contentWidth,a-n)}}),{isOverflow:!1,contentWidth:0})}),[t]),le=Object(a.useCallback)((function(){var e=document.querySelector(".context-expression.".concat(t," > .table-component > table")).getBoundingClientRect().width-document.querySelector(".context-expression.".concat(t," > .table-component > table > thead")).getBoundingClientRect().width;return e>0?{isSpareSpace:!0,spareSpace:e}:{isSpareSpace:!1,spareSpace:0}}),[t]),ue=Object(a.useCallback)((function(e){h(document.querySelector(".table-component.".concat(t," > table > thead > tr:last-of-type > th:last-of-type div.pf-c-drawer"))),w(e),X(e),K(e)}),[w,h,t]),de=Object(a.useCallback)((function(){var e=se(),t=e.isOverflow,n=e.contentWidth,a=le(),o=a.isSpareSpace,c=a.spareSpace;t?ue(n+7):o&&ue(c)}),[se,le,ue]);return Object(a.useEffect)((function(){de()}),[de]),Object(a.useEffect)((function(){var e,t,n=Object(r.a)($,1)[0],a=Object(c.a)(Object(c.a)({logicType:i.LogicType.Context,name:n.accessor,dataType:n.dataType,contextEntries:ae,result:f.omit(N,"isHeadless")},U>150?{entryInfoWidth:U}:{}),Y>370?{entryExpressionWidth:Y}:{});j?null===g||void 0===g||g(f.omit(a,["name","dataType"])):null===(e=window.beeApi)||void 0===e||null===(t=e.broadcastContextExpressionDefinition)||void 0===t||t.call(e,a)}),[$,j,g,ae,N,U,Y]),a.createElement("div",{className:"context-expression ".concat(t)},a.createElement(B,{tableId:t,headerHasMultipleLevels:!0,isHeadless:j,defaultCell:{entryInfo:z,entryExpression:P},columns:$,rows:ae,onColumnsUpdate:ce,onRowAdding:ie,onRowsUpdate:oe,onSingleRowUpdate:de,handlerConfiguration:R},a.createElement("div",{className:"context-result"},"<result>"),a.createElement(M,{expression:N,onUpdatingRecursiveExpression:D})))},Y=n(303),X=n(171),q=n(100),G=n(167),J=n.n(G),K=function(e){var t=e.selectedExpression,n=e.onLogicTypeUpdating,o=e.onLogicTypeResetting,c=e.onUpdatingNameAndDataType,s=e.getPlacementRef,l=e.isHeadless,p=void 0!==l&&l,b=e.onUpdatingRecursiveExpression,m=Object(d.useBoxedExpressionEditorI18n)().i18n,O=f.extend(t,{isHeadless:p,onUpdatingNameAndDataType:c,onUpdatingRecursiveExpression:b}),E=function(e){return!f.isEmpty(e)&&e!==i.LogicType.Undefined},x=Object(a.useState)(E(O.logicType)),v=Object(r.a)(x,2),j=v[0],g=v[1];Object(a.useEffect)((function(){g(E(t.logicType))}),[t.logicType]);var T=function(){var e=Object(a.useRef)(null),t=Object(a.useState)("0px"),n=Object(r.a)(t,2),o=n[0],c=n[1],i=Object(a.useState)("0px"),s=Object(r.a)(i,2),l=s[0],u=s[1],d=Object(a.useState)(!1),p=Object(r.a)(d,2),b=p[0],m=p[1],f=Object(a.useCallback)((function(){b&&m(!1)}),[b]),O=Object(a.useCallback)((function(t){e.current&&e.current===t.target&&(t.preventDefault(),c("".concat(t.pageX,"px")),u("".concat(t.pageY,"px")),m(!0))}),[c,u]);return Object(a.useEffect)((function(){return document.addEventListener("click",f),document.addEventListener("contextmenu",f),document.addEventListener("contextmenu",O),function(){document.removeEventListener("click",f),document.removeEventListener("contextmenu",f),document.removeEventListener("contextmenu",O)}})),{contextMenuRef:e,contextMenuXPos:o,contextMenuYPos:l,contextMenuVisibility:b,setContextMenuVisibility:m}}(),C=T.contextMenuRef,h=T.contextMenuXPos,w=T.contextMenuYPos,R=T.contextMenuVisibility,k=T.setContextMenuVisibility,I=Object(a.useMemo)((function(){switch(O.logicType){case i.LogicType.LiteralExpression:return a.createElement(y,O);case i.LogicType.Relation:return a.createElement(H,O);case i.LogicType.Context:return a.createElement(V,Object.assign({},O,{uid:J()()}));case i.LogicType.DecisionTable:case i.LogicType.Function:case i.LogicType.Invocation:case i.LogicType.List:default:return O.logicType}}),[O.logicType]),N=Object(a.useCallback)((function(){return Object.values(i.LogicType).filter((function(e){return e!==i.LogicType.Undefined}))}),[]),D=Object(a.useCallback)((function(){return f.map(N(),(function(e){return a.createElement(Y.a,{key:e},e)}))}),[N]),S=Object(a.useCallback)((function(){return s()}),[s]),L=Object(a.useCallback)((function(e,t){g(!0);var a=t.children;n(a)}),[n]),B=Object(a.useCallback)((function(){return a.createElement(u,{title:m.selectLogicType,arrowPlacement:S,body:a.createElement(X.a,{onSelect:L},D())})}),[m.selectLogicType,S,L,D]),M=Object(a.useCallback)((function(){g(!1),k(!1),o()}),[o,k]),P=Object(a.useCallback)((function(){return a.createElement("div",{className:"context-menu-container no-table-context-menu",style:{top:w,left:h}},a.createElement(q.a,{isDisabled:!j,isSmall:!0,variant:q.b.primary,onClick:M},m.clear))}),[j,h,w,M,m.clear]);return a.createElement("div",{className:"logic-type-selector ".concat(U," ").concat(j?"logic-type-selected":"logic-type-not-present"),ref:C},j?I:m.selectExpression,j?null:B(),R?P():null)},Q=function(e){var t=Object(a.useRef)(null),n=Object(a.useState)(e.selectedExpression),o=Object(r.a)(n,2),s=o[0],l=o[1],u=Object(a.useCallback)((function(e,t){l((function(n){return Object(c.a)(Object(c.a)({},n),{},{name:e,dataType:t})}))}),[]),d=Object(a.useCallback)((function(e){l((function(t){return Object(c.a)(Object(c.a)({},t),{},{logicType:e})}))}),[]),p=Object(a.useCallback)((function(){l((function(e){var t,n,a={name:e.name,dataType:e.dataType,logicType:i.LogicType.Undefined};return null===(t=window.beeApi)||void 0===t||null===(n=t.resetExpressionDefinition)||void 0===n||n.call(t,a),a}))}),[]),b=Object(a.useCallback)((function(){return t.current}),[]);return a.createElement("div",{className:"expression-container"},a.createElement("span",{className:"expression-title"},s.name),a.createElement("span",{className:"expression-type"},"(",s.logicType||i.LogicType.Undefined,")"),a.createElement("div",{className:"expression-container-box",ref:t},a.createElement(K,{selectedExpression:s,onLogicTypeUpdating:d,onLogicTypeResetting:p,onUpdatingNameAndDataType:u,getPlacementRef:b})))},Z=n(168),$=function(e){return a.createElement(Z.a,null,a.createElement(o.I18nDictionariesProvider,{defaults:d.boxedExpressionEditorI18nDefaults,dictionaries:d.boxedExpressionEditorDictionaries,initialLocale:navigator.language,ctx:d.BoxedExpressionEditorI18nContext},a.createElement(Q,e.expressionDefinition)))}},148:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return u}));var a=n(0),o=n(8),c=n(162),r=Object(o.a)(Object(o.a)({},c.en),{},{choose:"Choose...",clear:"Clear",columnOperations:{delete:"Delete",insertLeft:"Insert left",insertRight:"Insert right"},columns:"COLUMNS",context:"Context",contextEntry:"CONTEXT ENTRY",dataType:"Data Type",decisionTable:"Decision Table",editContextEntry:"Edit Context Entry",editExpression:"Edit Expression",editRelation:"Edit Relation",function:"Function",invocation:"Invocation",list:"List",literalExpression:"Literal expression",name:"Name",relation:"Relation",rowOperations:{delete:"Delete",insertAbove:"Insert above",insertBelow:"Insert below"},rows:"ROWS",selectExpression:"Select expression",selectLogicType:"Select logic type"}),i={locale:"en",dictionary:r},s=new Map([["en",r]]),l=a.createContext({});function u(){return Object(a.useContext)(l)}},173:function(e,t,n){"use strict";n.r(t),n.d(t,"App",(function(){return i}));var a=n(2),o=n(0),c=n(32),r=(n(179),n(113)),i=function(){var e={name:"Expression Name",dataType:r.DataType.Undefined},t=Object(o.useState)(e),n=Object(a.a)(t,2),c=n[0],i=n[1],s={selectedExpression:e};return window.beeApi={resetExpressionDefinition:function(e){return i(e)},broadcastLiteralExpressionDefinition:function(e){return i(e)},broadcastRelationExpressionDefinition:function(e){return i(e)},broadcastContextExpressionDefinition:function(e){return i(e)}},o.createElement("div",{className:"showcase"},o.createElement("div",{className:"boxed-expression"},o.createElement(r.BoxedExpressionEditor,{expressionDefinition:s})),o.createElement("div",{className:"updated-json"},o.createElement("p",{className:"disclaimer"},"\u26a0 Currently, JSON gets updated only for literal expression, relation and context logic types"),o.createElement("pre",null,JSON.stringify(c,null,2))))};c.render(o.createElement(i,null),document.getElementById("root"))},179:function(e,t,n){},180:function(e,t,n){},183:function(e,t,n){},184:function(e,t,n){},185:function(e,t,n){},186:function(e,t,n){},187:function(e,t,n){},210:function(e,t,n){},212:function(e,t,n){},215:function(e,t,n){},286:function(e,t,n){},287:function(e,t,n){},33:function(e,t,n){"use strict";var a=n(124);n.o(a,"BoxedExpressionEditorI18nContext")&&n.d(t,"BoxedExpressionEditorI18nContext",(function(){return a.BoxedExpressionEditorI18nContext})),n.o(a,"boxedExpressionEditorDictionaries")&&n.d(t,"boxedExpressionEditorDictionaries",(function(){return a.boxedExpressionEditorDictionaries})),n.o(a,"boxedExpressionEditorI18nDefaults")&&n.d(t,"boxedExpressionEditorI18nDefaults",(function(){return a.boxedExpressionEditorI18nDefaults})),n.o(a,"useBoxedExpressionEditorI18n")&&n.d(t,"useBoxedExpressionEditorI18n",(function(){return a.useBoxedExpressionEditorI18n}));var o=n(148);n.d(t,"BoxedExpressionEditorI18nContext",(function(){return o.a})),n.d(t,"boxedExpressionEditorDictionaries",(function(){return o.b})),n.d(t,"boxedExpressionEditorI18nDefaults",(function(){return o.c})),n.d(t,"useBoxedExpressionEditorI18n",(function(){return o.d}))},9:function(e,t,n){"use strict";n(119);var a=n(120);n.d(t,"DataType",(function(){return a.a}));var o=n(121);n.o(o,"LogicType")&&n.d(t,"LogicType",(function(){return o.LogicType})),n.o(o,"TableOperation")&&n.d(t,"TableOperation",(function(){return o.TableOperation}));var c=n(122);n.d(t,"LogicType",(function(){return c.a}));var r=n(123);n.d(t,"TableOperation",(function(){return r.a}))}},[[173,1,2]]]);
//# sourceMappingURL=main.b522865a.chunk.js.map