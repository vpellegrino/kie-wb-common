(this["webpackJsonpboxed-expression-editor-showcase"]=this["webpackJsonpboxed-expression-editor-showcase"]||[]).push([[0],{104:function(e,t,n){"use strict";var a=n(79),o=n(0),c=n(31);n.d(t,"BoxedExpressionEditor",(function(){return a.a}));var i=n(7);n.o(i,"DataType")&&n.d(t,"DataType",(function(){return i.DataType})),window.renderBoxedExpressionEditor=function(e,t){c.render(o.createElement(a.a,{expressionDefinition:{selectedExpression:t}}),document.getElementById(e))}},110:function(e,t,n){},111:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.Undefined="<Undefined>",e.Any="Any",e.Boolean="boolean",e.Context="context",e.Date="date",e.DateTime="date and time",e.DateTimeDuration="days and time duration",e.Number="number",e.String="string",e.Time="time",e.YearsMonthsDuration="years and months duration"}(a||(a={}))},112:function(e,t){},113:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.Undefined="<Undefined>",e.LiteralExpression="Literal expression",e.Context="Context",e.DecisionTable="Decision Table",e.Relation="Relation",e.Function="Function",e.Invocation="Invocation",e.List="List"}(a||(a={}))},114:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e[e.ColumnInsertLeft=0]="ColumnInsertLeft",e[e.ColumnInsertRight=1]="ColumnInsertRight",e[e.ColumnDelete=2]="ColumnDelete",e[e.RowInsertAbove=3]="RowInsertAbove",e[e.RowInsertBelow=4]="RowInsertBelow",e[e.RowDelete=5]="RowDelete"}(a||(a={}))},115:function(e,t){},138:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return u}));var a=n(0),o=n(17),c=n(152),i=Object(o.a)(Object(o.a)({},c.en),{},{choose:"Choose...",clear:"Clear",columnOperations:{delete:"Delete",insertLeft:"Insert left",insertRight:"Insert right"},columns:"COLUMNS",context:"Context",contextEntry:"CONTEXT ENTRY",dataType:"Data Type",decisionTable:"Decision Table",editContextEntry:"Edit Context Entry",editExpression:"Edit Expression",editRelation:"Edit Relation",function:"Function",invocation:"Invocation",list:"List",literalExpression:"Literal expression",name:"Name",relation:"Relation",rowOperations:{delete:"Delete",insertAbove:"Insert above",insertBelow:"Insert below"},rows:"ROWS",selectExpression:"Select expression",selectLogicType:"Select logic type"}),r={locale:"en",dictionary:i},s=new Map([["en",i]]),l=a.createContext({});function u(){return Object(a.useContext)(l)}},161:function(e,t,n){"use strict";n.r(t),n.d(t,"App",(function(){return r}));var a=n(2),o=n(0),c=n(31),i=(n(168),n(104)),r=function(){var e={name:"Expression Name",dataType:i.DataType.Undefined},t=Object(o.useState)(e),n=Object(a.a)(t,2),c=n[0],r=n[1],s={selectedExpression:e};return window.beeApi={resetExpressionDefinition:function(e){return r(e)},broadcastLiteralExpressionDefinition:function(e){return r(e)},broadcastRelationExpressionDefinition:function(e){return r(e)},broadcastContextExpressionDefinition:function(e){return r(e)}},o.createElement("div",{className:"showcase"},o.createElement("div",{className:"boxed-expression"},o.createElement(i.BoxedExpressionEditor,{expressionDefinition:s})),o.createElement("div",{className:"updated-json"},o.createElement("p",{className:"disclaimer"},"\u26a0 Currently, JSON gets updated only for literal expression, relation and context logic types"),o.createElement("pre",null,JSON.stringify(c,null,2))))};c.render(o.createElement(r,null),document.getElementById("root"))},168:function(e,t,n){},169:function(e,t,n){},172:function(e,t,n){},173:function(e,t,n){},174:function(e,t,n){},175:function(e,t,n){},176:function(e,t,n){},199:function(e,t,n){},201:function(e,t,n){},273:function(e,t,n){},276:function(e,t,n){},277:function(e,t,n){},32:function(e,t,n){"use strict";var a=n(115);n.o(a,"BoxedExpressionEditorI18nContext")&&n.d(t,"BoxedExpressionEditorI18nContext",(function(){return a.BoxedExpressionEditorI18nContext})),n.o(a,"boxedExpressionEditorDictionaries")&&n.d(t,"boxedExpressionEditorDictionaries",(function(){return a.boxedExpressionEditorDictionaries})),n.o(a,"boxedExpressionEditorI18nDefaults")&&n.d(t,"boxedExpressionEditorI18nDefaults",(function(){return a.boxedExpressionEditorI18nDefaults})),n.o(a,"useBoxedExpressionEditorI18n")&&n.d(t,"useBoxedExpressionEditorI18n",(function(){return a.useBoxedExpressionEditorI18n}));var o=n(138);n.d(t,"BoxedExpressionEditorI18nContext",(function(){return o.a})),n.d(t,"boxedExpressionEditorDictionaries",(function(){return o.b})),n.d(t,"boxedExpressionEditorI18nDefaults",(function(){return o.c})),n.d(t,"useBoxedExpressionEditorI18n",(function(){return o.d}))},7:function(e,t,n){"use strict";n(110);var a=n(111);n.d(t,"DataType",(function(){return a.a}));var o=n(112);n.o(o,"LogicType")&&n.d(t,"LogicType",(function(){return o.LogicType})),n.o(o,"TableOperation")&&n.d(t,"TableOperation",(function(){return o.TableOperation}));var c=n(113);n.d(t,"LogicType",(function(){return c.a}));var i=n(114);n.d(t,"TableOperation",(function(){return i.a}))},79:function(e,t,n){"use strict";n.d(t,"a",(function(){return ee}));n(169);var a=n(2),o=n(0),c=(n(170),n(171),n(139)),i=n(17),r=(n(172),n(7)),s=(n(173),n(174),n(284)),l=(n(175),n(293)),u=(n(176),function(e){var t=e.children,n=e.arrowPlacement,a=e.body,c=e.title,i=e.appendTo,r=e.className,s=e.hasAutoWidth;return o.createElement(l.a,{"data-ouia-component-id":"expression-popover-menu",className:"popover-menu-selector".concat(r?" "+r:""),hasAutoWidth:s,position:"bottom",distance:0,id:"menu-selector",reference:n,appendTo:i,headerContent:o.createElement("div",{className:"selector-menu-title","data-ouia-component-id":"expression-popover-menu-title"},c),bodyContent:a},t)}),d=n(32),p=n(49),b=n(292),m=n(6),f=n(10),O="Expression Name",E=function(e){var t,n,c,i=e.children,s=e.appendTo,l=e.arrowPlacement,E=e.title,x=e.nameField,v=e.dataTypeField,y=e.selectedDataType,j=void 0===y?r.DataType.Undefined:y,g=e.selectedExpressionName,C=e.onExpressionUpdate,T=Object(d.useBoxedExpressionEditorI18n)().i18n;E=null!==(t=E)&&void 0!==t?t:T.editExpression,x=null!==(n=x)&&void 0!==n?n:T.name,v=null!==(c=v)&&void 0!==c?c:T.dataType;var h=Object(o.useState)(!1),w=Object(a.a)(h,2),R=w[0],I=w[1],k=Object(o.useState)(j),N=Object(a.a)(k,2),D=N[0],S=N[1],L=Object(o.useState)(g),U=Object(a.a)(L,2),H=U[0],B=U[1];Object(o.useEffect)((function(){B(g)}),[g]),Object(o.useEffect)((function(){S(j)}),[j]);var A=Object(o.useCallback)((function(e){B(e.target.value),"blur"===e.type&&C({name:e.target.value,dataType:D})}),[D,C]),P=Object(o.useCallback)((function(e,t){I(!1),S(t),C({name:H,dataType:t})}),[H,C]),M=Object(o.useCallback)((function(){return f.map(Object.values(r.DataType),(function(e){return o.createElement(p.a,{key:e,value:e},e)}))}),[]),W=Object(o.useCallback)((function(e){var t;try{t=new RegExp(e.target.value,"i")}catch(n){return M()}return""!==e.target.value?M().filter((function(e){return t.test(e.props.value)})):M()}),[M]),z=Object(o.useCallback)((function(e){return I(e)}),[]);return o.createElement(u,{title:E,arrowPlacement:l,appendTo:s,body:o.createElement("div",{className:"edit-expression-menu"},o.createElement("div",{className:"expression-name"},o.createElement("label",null,x),o.createElement("input",{type:"text",id:"expression-name","data-ouia-component-id":"edit-expression-name",value:H,onChange:A,onBlur:A,className:"form-control pf-c-form-control",placeholder:O})),o.createElement("div",{className:"expression-data-type"},o.createElement("label",null,v),o.createElement(b.a,{ouiaId:"edit-expression-data-type",variant:m.e.typeahead,typeAheadAriaLabel:T.choose,onToggle:z,onSelect:P,onFilter:W,isOpen:R,selections:D,hasInlineFilter:!0,inlineFilterPlaceholderText:T.choose},M())))},i)},x=n(154),v=function(e){var t=e.children,n=e.height,a=e.minHeight,c=e.minWidth,i=e.onHorizontalResizeStop,r=e.width,s=Object(o.useMemo)((function(){return o.createElement("div",{className:"pf-c-drawer"},o.createElement("div",{className:"pf-c-drawer__splitter pf-m-vertical"},o.createElement("div",{className:"pf-c-drawer__splitter-handle"})))}),[]),l=Object(o.useCallback)((function(e,t){return i(t.size.width)}),[i]);return o.createElement(x.ResizableBox,{width:r,height:n,minConstraints:[c,a],axis:"x",onResizeStop:l,handle:s},t)},y=function(e){var t=e.content,n=e.dataType,c=e.name,l=void 0===c?O:c,u=e.onUpdatingNameAndDataType,d=e.isHeadless,p=void 0!==d&&d,b=e.onUpdatingRecursiveExpression,m=e.width,f=Object(o.useState)(l),x=Object(a.a)(f,2),y=x[0],j=x[1],g=Object(o.useState)(n),C=Object(a.a)(g,2),T=C[0],h=C[1],w=Object(o.useState)(t),R=Object(a.a)(w,2),I=R[0],k=R[1],N=Object(o.useState)(m||250),D=Object(a.a)(N,2),S=D[0],L=D[1];Object(o.useEffect)((function(){var e,t,n=Object(i.a)({name:y,dataType:T,logicType:r.LogicType.LiteralExpression,content:I},p||250===S?{}:{width:S});p?null===b||void 0===b||b(n):null===(e=window.beeApi)||void 0===e||null===(t=e.broadcastLiteralExpressionDefinition)||void 0===t||t.call(e,n)}),[y,T,I,p,b,S]);var U=Object(o.useCallback)((function(e){var t=e.dataType,n=void 0===t?r.DataType.Undefined:t,a=e.name,o=void 0===a?O:a;j(o),h(n),null===u||void 0===u||u(o,n)}),[u]),H=Object(o.useCallback)((function(e){var t=e.target.value;k(t)}),[]),B=Object(o.useCallback)((function(e){return L(e)}),[]),A=Object(o.useCallback)((function(e){return o.createElement(v,{width:S,height:40,minWidth:250,minHeight:40,onHorizontalResizeStop:B},e)}),[S,B]),P=Object(o.useMemo)((function(){return o.createElement("div",{className:"literal-expression-header"},A(o.createElement(E,{selectedExpressionName:y,selectedDataType:T,onExpressionUpdate:U},o.createElement("div",{className:"expression-info"},o.createElement("p",{className:"expression-name pf-u-text-truncate"},y),o.createElement("p",{className:"expression-data-type pf-u-text-truncate"},"(",T,")")))))}),[T,y,U,A]),M=Object(o.useMemo)((function(){return o.createElement(s.a,{defaultValue:I,onBlur:H,"aria-label":"literal-expression-content"})}),[I,H]);return o.createElement("div",{className:"literal-expression"},p?null:P,o.createElement("div",{className:"literal-expression-body"},M))},j=(n(199),n(200),n(9)),g=(n(201),n(94)),C=n(285),T=n(291),h=n(297),w=n(290),R=n(294),I=n(286),k=function(e){var t=e.tableInstance,n=e.tableColumns,a=e.setTableColumns,c=e.setTableRows,i=e.editColumnLabel,s=e.isHeadless,l=void 0!==s&&s,u=e.getColumnKey,d=Object(o.useCallback)((function(e,t){return c((function(n){return f.map(n,(function(n){var a=n[e];return delete n[e],n[t]=a,n}))}))}),[c]),p=Object(o.useCallback)((function(e){return function(t){var o=t.name,c=void 0===o?"":o,i=t.dataType,s=void 0===i?r.DataType.Undefined:i,l=n[e].accessor;a((function(t){var n=Object(j.a)(t);return n[e].label=c,n[e].accessor=c,n[e].dataType=s,n})),c!==l&&d(l,c)}}),[a,n,d]),b=Object(o.useCallback)((function(e,t){return o.createElement(R.a,Object.assign({},e.getHeaderProps(),{className:"fixed-column no-clickable-cell",key:"".concat(u(e),"-").concat(t)}),o.createElement("div",{className:"header-cell","data-ouia-component-type":"expression-column-header"},e.label))}),[u]),m=Object(o.useCallback)((function(e){return o.createElement("div",{className:"header-cell-info","data-ouia-component-type":"expression-column-header-cell-info"},o.createElement("p",{className:"pf-u-text-truncate"},e.label),e.dataType?o.createElement("p",{className:"pf-u-text-truncate data-type"},"(",e.dataType,")"):null)}),[]),O=Object(o.useCallback)((function(e,n){return o.createElement(R.a,Object.assign({},e.getHeaderProps(),t.getThProps(e,n),{className:"resizable-column ".concat(e.dataType?null:"no-clickable-cell"),key:"".concat(u(e),"-").concat(n)}),o.createElement("div",{className:"header-cell","data-ouia-component-type":"expression-column-header"},e.dataType?o.createElement(E,{title:i,selectedExpressionName:e.label,selectedDataType:e.dataType,onExpressionUpdate:p(n),key:"".concat(u(e),"-").concat(n)},m(e)):m(e),o.createElement("div",Object.assign({className:"pf-c-drawer ".concat(e.canResize?"":"resizer-disabled")},e.canResize?e.getResizerProps():{}),o.createElement("div",{className:"pf-c-drawer__splitter pf-m-vertical"},o.createElement("div",{className:"pf-c-drawer__splitter-handle"})))))}),[i,u,p,m,t]),x=Object(o.useCallback)((function(e,t){return e.isCountColumn?b(e,t):O(e,t)}),[b,O]),v=Object(o.useMemo)((function(){return t.headerGroups.map((function(e){return o.createElement(C.a,Object.assign({key:e.accessor},e.getHeaderGroupProps()),e.headers.map((function(e,t){return x(e,t)})))}))}),[x,t.headerGroups]),y=Object(o.useMemo)((function(){return o.createElement(C.a,null,f.last(t.headerGroups).headers.map((function(e,t){return x(e,t)})))}),[x,t.headerGroups]);return o.createElement(I.a,{noWrap:!0},l?y:v)},N=(n(273),n(287)),D=n(288),S=n(289),L=n(295),U=function(e){var t=e.handlerConfiguration,n=e.allowedOperations,a=e.onOperation;return o.createElement(N.a,{ouiaId:"expression-table-handler-menu",className:"table-handler-menu",onSelect:function(e,t){return a(t)}},t.map((function(e){return o.createElement(D.a,{key:e.group,label:e.group,className:f.every(e.items,(function(e){return!f.includes(n,e.type)}))?"no-allowed-actions-in-group":""},o.createElement(S.a,null,e.items.map((function(e){return o.createElement(L.a,{"data-ouia-component-id":"expression-table-handler-menu-"+e.name,key:e.type,itemId:e.type,isDisabled:!f.includes(n,e.type)},e.name)}))))})))},H=function(e){var t=e.columnPrefix,n=e.tableColumns,c=e.setTableColumns,i=e.setTableRows,s=e.lastSelectedColumnIndex,u=e.lastSelectedRowIndex,d=e.onRowAdding,p=e.showTableHandler,b=e.setShowTableHandler,m=e.tableHandlerTarget,O=e.handlerConfiguration,E=e.tableHandlerAllowedOperations,x=Object(o.useState)(s),v=Object(a.a)(x,2),y=v[0],g=v[1],C=Object(o.useState)(u),T=Object(a.a)(C,2),h=T[0],w=T[1];Object(o.useEffect)((function(){g(s)}),[s]),Object(o.useEffect)((function(){w(u)}),[u]);var R=function(e,t,n){return[].concat(Object(j.a)(e.slice(0,t)),[n],Object(j.a)(e.slice(t)))},I=function(e,t,n){return[].concat(Object(j.a)(e.slice(0,t+1)),[n],Object(j.a)(e.slice(t+1)))},k=function(e,t){return[].concat(Object(j.a)(e.slice(0,t)),Object(j.a)(e.slice(t+1)))},N=Object(o.useCallback)((function(e){var a="".concat(t).concat(e);return f.find(n,{accessor:a})?N(e+1):a}),[t,n]),D=Object(o.useCallback)((function(e){return{accessor:N(e.length),label:N(e.length),dataType:r.DataType.Undefined}}),[N]),S=Object(o.useCallback)((function(e){switch(e){case r.TableOperation.ColumnInsertLeft:c((function(e){return R(e,y,D(e))}));break;case r.TableOperation.ColumnInsertRight:c((function(e){return I(e,y,D(e))}));break;case r.TableOperation.ColumnDelete:c((function(e){return k(e,y)}));break;case r.TableOperation.RowInsertAbove:i((function(e){return R(e,h,d())}));break;case r.TableOperation.RowInsertBelow:i((function(e){return I(e,h,d())}));break;case r.TableOperation.RowDelete:i((function(e){return k(e,h)}))}b(!1)}),[b,c,i,y,D,h,d]);return Object(o.useMemo)((function(){return o.createElement(l.a,{className:"table-handler",hasNoPadding:!0,showClose:!1,distance:5,position:"right",isVisible:p,shouldClose:function(){return b(!1)},shouldOpen:function(e){return null===e||void 0===e?void 0:e()},reference:function(){return m},bodyContent:o.createElement(U,{handlerConfiguration:O,allowedOperations:E,onOperation:S})})}),[p,O,E,S,b,m])},B=o.createContext({}),A="no-table-context-menu",P=function(e){var t=e.tableId,n=e.children,c=e.columnPrefix,s=void 0===c?"column-":c,l=e.editColumnLabel,u=e.onColumnsUpdate,d=e.onRowsUpdate,p=e.onSingleRowUpdate,b=e.onRowAdding,m=void 0===b?function(){return{}}:b,O=e.defaultCell,E=e.rows,x=e.columns,v=e.handlerConfiguration,y=e.isHeadless,R=void 0!==y&&y,I=e.headerHasMultipleLevels,N=void 0!==I&&I,D=e.getRowKey,S=void 0===D?function(e){return e.id}:D,L=e.getColumnKey,U=void 0===L?function(e){return e.id}:L,P=Object(o.useRef)(null),M=Object(o.useContext)(B),W=Object(o.useState)([Object(i.a)({label:"#",accessor:"#",width:60,minWidth:60,disableResizing:!0,isCountColumn:!0,hideFilter:!0},N?{columns:[{label:"0",accessor:"0",minWidth:60,width:60,disableResizing:!0,isCountColumn:!0,hideFilter:!0}]}:{})].concat(Object(j.a)(x))),z=Object(a.a)(W,2),F=z[0],_=z[1],V=Object(o.useState)(E),Y=Object(a.a)(V,2),X=Y[0],G=Y[1],K=Object(o.useState)(!1),q=Object(a.a)(K,2),J=q[0],Q=q[1],Z=Object(o.useState)(document.body),$=Object(a.a)(Z,2),ee=$[0],te=$[1],ne=Object(o.useState)(f.values(r.TableOperation).map((function(e){return parseInt(e.toString())}))),ae=Object(a.a)(ne,2),oe=ae[0],ce=ae[1],ie=Object(o.useState)(-1),re=Object(a.a)(ie,2),se=re[0],le=re[1],ue=Object(o.useState)(-1),de=Object(a.a)(ue,2),pe=de[0],be=de[1],me=Object(o.useCallback)((function(e,t,n){G((function(a){var o=Object(j.a)(a);return o[e][t]=n,o}))}),[]),fe=Object(o.useCallback)((function(e,t){null===p||void 0===p||p(e,t),G((function(n){var a=Object(j.a)(n);return a[e]=t,a}))}),[p]),Oe={minWidth:150,width:150,Cell:Object(o.useCallback)((function(e){var t=e.column;return t.isCountColumn?e.value:O?O[t.id](e):function(e){var t=e.value,n=e.row.index,c=e.column.id,i=e.onCellUpdate,r=o.useState(t),s=Object(a.a)(r,2),l=s[0],u=s[1];Object(o.useEffect)((function(){u(t)}),[t]);var d=Object(o.useCallback)((function(e){u(e.target.value)}),[]),p=Object(o.useCallback)((function(){i(n,c,l)}),[c,n,l,i]);return o.createElement("textarea",{value:l||"",onChange:d,onBlur:p})}(e)}),[])},Ee=function(e){var t=e.closest("table")===P.current,n=!e.classList.contains(A);return t&&n},xe=function(e,t){var n,a;te(e),null===(n=M.currentlyOpenedHandlerCallback)||void 0===n||n.call(M,!1),Q(!0),null===(a=M.setCurrentlyOpenedHandlerCallback)||void 0===a||a.call(M,(function(){return Q})),le(t)},ve=Object(g.useTable)({columns:F,data:X,defaultColumn:Oe,onCellUpdate:me,onRowUpdate:fe,getThProps:function(e,t){return{onContextMenu:function(n){var a=n.target,o=!e.disableHandlerOnHeader;Ee(a)&&o&&(n.preventDefault(),ce([r.TableOperation.ColumnInsertLeft,r.TableOperation.ColumnInsertRight].concat(Object(j.a)(F.length>2&&t>0?[r.TableOperation.ColumnDelete]:[]))),xe(a,t))}}},getTdProps:function(e,t){return{onContextMenu:function(n){var a=n.target;Ee(a)&&(n.preventDefault(),ce([r.TableOperation.ColumnInsertLeft,r.TableOperation.ColumnInsertRight].concat(Object(j.a)(F.length>2&&e>0?[r.TableOperation.ColumnDelete]:[]),[r.TableOperation.RowInsertAbove,r.TableOperation.RowInsertBelow],Object(j.a)(X.length>1?[r.TableOperation.RowDelete]:[]))),xe(a,e),be(t))}}}},g.useBlockLayout,g.useResizeColumns);Object(o.useEffect)((function(){u(F.slice(1))}),[u,F]),Object(o.useEffect)((function(){null===d||void 0===d||d(X)}),[d,X]);var ye=function e(t,n,a){var o=f.findIndex(t,{accessor:n});if(o>=0){var c=Object(i.a)({},t[o]);c.width=a,t.splice(o,1,c)}else f.forEach(t,(function(t){return e(t.columns,n,a)}))},je=null===ve.state.columnResizing.isResizingColumn&&!f.isEmpty(ve.state.columnResizing.columnWidths);Object(o.useEffect)((function(){je&&_((function(e){return f.forEach(ve.state.columnResizing.columnWidths,(function(t,n){return ye(e,n,t)})),Object(j.a)(e)}))}),[je]);var ge=Object(o.useMemo)((function(){return o.createElement(C.a,{className:"table-row additive-row"},o.createElement(T.a,{role:"cell",className:"empty-cell"},o.createElement("br",null)),null===n||void 0===n?void 0:n.map((function(e,t){return o.createElement(T.a,{role:"cell",key:t,className:"row-remainder-content",style:{width:ve.allColumns[t+1].width,minWidth:ve.allColumns[t+1].minWidth}},e)})))}),[n,ve.allColumns]);return o.createElement("div",{className:"table-component ".concat(t)},o.createElement(h.a,Object.assign({variant:"compact"},ve.getTableProps(),{ref:P}),o.createElement(k,{tableInstance:ve,editColumnLabel:l,isHeadless:R,tableColumns:F,setTableColumns:_,setTableRows:G,getColumnKey:U}),o.createElement(w.a,ve.getTableBodyProps(),ve.rows.map((function(e,t){return ve.prepareRow(e),o.createElement(C.a,Object.assign({className:"table-row"},e.getRowProps(),{key:"".concat(S(e),"-").concat(t),ouiaId:"expression-row-"+t}),e.cells.map((function(e,n){return o.createElement(T.a,Object.assign({},0===n?{}:e.getCellProps(),ve.getTdProps(n,t),{key:"".concat(U(e.column),"-").concat(n),"data-ouia-component-id":"expression-column-"+n,className:0===n?"counter-cell":"data-cell"}),0===n?t+1:e.render("Cell"))})))})),n?ge:null)),J?o.createElement(H,{tableColumns:F,setTableColumns:_,setTableRows:G,columnPrefix:s,handlerConfiguration:v,lastSelectedColumnIndex:se,lastSelectedRowIndex:pe,onRowAdding:m,showTableHandler:J,setShowTableHandler:Q,tableHandlerAllowedOperations:oe,tableHandlerTarget:ee}):null)},M=function(e){var t=Object(d.useBoxedExpressionEditorI18n)().i18n,n=[{group:t.columns,items:[{name:t.columnOperations.insertLeft,type:r.TableOperation.ColumnInsertLeft},{name:t.columnOperations.insertRight,type:r.TableOperation.ColumnInsertRight},{name:t.columnOperations.delete,type:r.TableOperation.ColumnDelete}]},{group:t.rows,items:[{name:t.rowOperations.insertAbove,type:r.TableOperation.RowInsertAbove},{name:t.rowOperations.insertBelow,type:r.TableOperation.RowInsertBelow},{name:t.rowOperations.delete,type:r.TableOperation.RowDelete}]}],c=Object(o.useState)(void 0===e.columns?[{name:"column-1",dataType:r.DataType.Undefined}]:e.columns),s=Object(a.a)(c,2),l=s[0],u=s[1],p=Object(o.useState)(void 0===e.rows?[[]]:e.rows),b=Object(a.a)(p,2),m=b[0],O=b[1];Object(o.useEffect)((function(){var t,n,a,o=Object(i.a)(Object(i.a)({},e),{},{columns:l,rows:m});e.isHeadless?null===(t=e.onUpdatingRecursiveExpression)||void 0===t||t.call(e,o):null===(n=window.beeApi)||void 0===n||null===(a=n.broadcastRelationExpressionDefinition)||void 0===a||a.call(n,o)}),[e,l,m]);var E=Object(o.useCallback)((function(){return f.map(l,(function(e){return Object(i.a)({label:e.name,accessor:e.name,dataType:e.dataType},e.width?{width:e.width}:{})}))}),[l]),x=Object(o.useCallback)((function(e){return u(f.map(e,(function(e){return{name:e.accessor,dataType:e.dataType,width:e.width}})))}),[]),v=Object(o.useCallback)((function(){return f.map(m,(function(e){return f.reduce(l,(function(t,n,a){return t[n.name]=e[a]||"",t}),{})}))}),[l,m]),y=Object(o.useCallback)((function(e){return O(f.map(e,(function(e){return f.reduce(l,(function(t,n){return t.push(e[n.name]||""),t}),[])})))}),[l]);return o.createElement("div",{className:"relation-expression"},o.createElement(P,{columnPrefix:"column-",editColumnLabel:t.editRelation,columns:E(),rows:v(),onColumnsUpdate:x,onRowsUpdate:y,handlerConfiguration:n}))},W=(n(276),function(e){var t=e.expression,n=e.onUpdatingRecursiveExpression,c=e.onExpressionResetting,s=Object(o.useRef)(null),l=Object(o.useState)(t),u=Object(a.a)(l,2),d=u[0],p=u[1],b=void 0===t.logicType;Object(o.useEffect)((function(){p(f.omit(t,"isHeadless"))}),[b]),Object(o.useEffect)((function(){n(f.omit(d,"isHeadless"))}),[n,d]);var m=Object(o.useCallback)((function(){return s.current}),[]),O=Object(o.useCallback)((function(e){p((function(t){var n=Object(i.a)(Object(i.a)({},t),{},{logicType:e});return f.omit(n,"isHeadless")}))}),[]),E=Object(o.useCallback)((function(){p((function(e){return{name:e.name,dataType:e.dataType,logicType:r.LogicType.Undefined}})),null===c||void 0===c||c()}),[c]);return o.createElement("div",{className:"entry-expression",ref:s},o.createElement(Z,{isHeadless:!0,onUpdatingRecursiveExpression:n,selectedExpression:d,onLogicTypeUpdating:O,onLogicTypeResetting:E,getPlacementRef:m}))}),z=function(e){var t=e.data,n=e.row.index,c=e.onRowUpdate,r=t[n],s=Object(o.useState)(r.entryExpression),l=Object(a.a)(s,2),u=l[0],d=l[1],p=void 0===r.entryExpression.logicType;Object(o.useEffect)((function(){d(r.entryExpression)}),[p]),Object(o.useEffect)((function(){c(n,Object(i.a)(Object(i.a)({},r),{},{entryExpression:u}))}),[u]);var b=Object(o.useCallback)((function(e){d(e)}),[]);return o.createElement("div",{className:"context-entry-expression-cell"},o.createElement(W,{expression:u,onUpdatingRecursiveExpression:b,onExpressionResetting:r.onExpressionResetting}))},F=(n(277),function(e){var t=e.name,n=e.dataType,c=e.onContextEntryUpdate,i=Object(d.useBoxedExpressionEditorI18n)().i18n,r=Object(o.useState)(t),s=Object(a.a)(r,2),l=s[0],u=s[1],p=Object(o.useState)(n),b=Object(a.a)(p,2),m=b[0],f=b[1];Object(o.useEffect)((function(){u(t)}),[t]),Object(o.useEffect)((function(){f(n)}),[n]);var O=Object(o.useCallback)((function(e){var t=e.name,n=e.dataType;u(t),f(n),c(t,n)}),[c]);return o.createElement("div",{className:"entry-info"},o.createElement(E,{title:i.editContextEntry,selectedExpressionName:l,selectedDataType:m,onExpressionUpdate:O},o.createElement("div",{className:"entry-definition"},o.createElement("p",{className:"entry-name pf-u-text-truncate",title:l},l),o.createElement("p",{className:"entry-data-type pf-u-text-truncate",title:m},"(",m,")"))))}),_=function(e){var t=e.data,n=e.row.index,c=e.onRowUpdate,r=t[n],s=Object(o.useState)(r.entryInfo),l=Object(a.a)(s,2),u=l[0],d=l[1];Object(o.useEffect)((function(){d(r.entryInfo)}),[r.entryInfo]);var p=Object(o.useCallback)((function(e,t){c(n,Object(i.a)(Object(i.a)({},r),{},{entryInfo:{name:e,dataType:t}}))}),[r,n,c]);return o.createElement("div",{className:"context-entry-info-cell"},o.createElement(F,{name:u.name,dataType:u.dataType,onContextEntryUpdate:p}))};function V(){var e,t,n=new MouseEvent("mouseup",{bubbles:!0,cancelable:!0});return{setResizerElement:function(n){!function(e){t=new MouseEvent("mousedown",{clientX:e.getBoundingClientRect().left,clientY:e.getBoundingClientRect().top,bubbles:!0,cancelable:!0})}(e=n)},dragItHorizontally:function(a){e.dispatchEvent(t),function(t){e.dispatchEvent(new MouseEvent("mousemove",{clientX:e.getBoundingClientRect().left+t,clientY:e.getBoundingClientRect().top,bubbles:!0,cancelable:!0}))}(a),e.dispatchEvent(n)}}}var Y="ContextEntry-1",X=r.DataType.Undefined,G=370,K=function(e){var t=e.uid,n=e.name,c=void 0===n?Y:n,s=e.dataType,l=void 0===s?X:s,u=e.onUpdatingNameAndDataType,p=e.contextEntries,b=e.result,m=void 0===b?{}:b,O=e.entryInfoWidth,E=void 0===O?150:O,x=e.entryExpressionWidth,v=void 0===x?G:x,y=e.isHeadless,j=void 0!==y&&y,g=e.onUpdatingRecursiveExpression,C=Object(d.useBoxedExpressionEditorI18n)().i18n,T=V(),h=T.setResizerElement,w=T.dragItHorizontally,R=[{group:C.contextEntry,items:[{name:C.rowOperations.insertAbove,type:r.TableOperation.RowInsertAbove},{name:C.rowOperations.insertBelow,type:r.TableOperation.RowInsertBelow},{name:C.rowOperations.delete,type:r.TableOperation.RowDelete}]}],I=Object(o.useCallback)((function(){K(G)}),[]),k=Object(o.useState)(m),N=Object(a.a)(k,2),D=N[0],S=N[1],L=Object(o.useState)(E),U=Object(a.a)(L,2),H=U[0],B=U[1],A=Object(o.useState)(v),M=Object(a.a)(A,2),F=M[0],K=M[1],q=Object(o.useState)([{label:c,accessor:c,dataType:l,disableHandlerOnHeader:!0,columns:[{label:"Name",accessor:"entryInfo",disableHandlerOnHeader:!0,width:H,minWidth:150},{label:"Value",accessor:"entryExpression",disableHandlerOnHeader:!0,width:F,minWidth:G}]}]),J=Object(a.a)(q,2),Q=J[0],Z=J[1],$=Object(o.useState)(p||[{entryInfo:{name:Y,dataType:X},entryExpression:{},onExpressionResetting:I}]),ee=Object(a.a)($,2),te=ee[0],ne=ee[1],ae=Object(o.useCallback)((function(e){var t,n,o=Object(a.a)(e,1)[0];null===u||void 0===u||u(o.label,o.dataType),K(null===(t=f.find(o.columns,{accessor:"entryExpression"}))||void 0===t?void 0:t.width),B(null===(n=f.find(o.columns,{accessor:"entryInfo"}))||void 0===n?void 0:n.width),Z((function(e){var t=Object(a.a)(e,1)[0];return[Object(i.a)(Object(i.a)({},t),{},{label:o.label,accessor:o.accessor,dataType:o.dataType})]}))}),[u]),oe=Object(o.useCallback)((function(e){var t="ContextEntry-".concat(e);return f.find(te,{entryInfo:{name:t}})?oe(e+1):t}),[te]),ce=Object(o.useCallback)((function(){return{entryInfo:{name:oe(te.length),dataType:r.DataType.Undefined},entryExpression:{},onExpressionResetting:I}}),[oe,I,te.length]),ie=Object(o.useCallback)((function(){return Array.from(document.querySelectorAll(".context-expression.".concat(t," > .table-component > table > tbody > tr > td:last-of-type .table-component:first-of-type"))).reduce((function(e,t){var n=t.clientWidth,a=t.scrollWidth;return{isOverflow:e.isOverflow||a>n,contentWidth:Math.max(e.contentWidth,a-n)}}),{isOverflow:!1,contentWidth:0})}),[t]),re=Object(o.useCallback)((function(){var e=document.querySelector(".context-expression.".concat(t," > .table-component > table")).getBoundingClientRect().width-document.querySelector(".context-expression.".concat(t," > .table-component > table > thead")).getBoundingClientRect().width;return e>0?{isSpareSpace:!0,spareSpace:e}:{isSpareSpace:!1,spareSpace:0}}),[t]),se=Object(o.useCallback)((function(e){h(document.querySelector(".table-component.".concat(t," > table > thead > tr:last-of-type > th:last-of-type div.pf-c-drawer"))),w(e)}),[w,h,t]),le=Object(o.useCallback)((function(e){return e.original.entryInfo.name}),[]),ue=Object(o.useCallback)((function(){var e=ie(),t=e.isOverflow,n=e.contentWidth,a=re(),o=a.isSpareSpace,c=a.spareSpace;t?se(n+7):o&&se(c)}),[ie,re,se]);return Object(o.useEffect)((function(){ue()}),[ue]),Object(o.useEffect)((function(){var e,t,n=Object(a.a)(Q,1)[0],o=Object(i.a)(Object(i.a)({logicType:r.LogicType.Context,name:n.accessor,dataType:n.dataType,contextEntries:te,result:f.omit(D,"isHeadless")},H>150?{entryInfoWidth:H}:{}),F>G?{entryExpressionWidth:F}:{});j?null===g||void 0===g||g(f.omit(o,["name","dataType"])):null===(e=window.beeApi)||void 0===e||null===(t=e.broadcastContextExpressionDefinition)||void 0===t||t.call(e,o)}),[Q,j,g,te,D,H,F]),o.createElement("div",{className:"context-expression ".concat(t)},o.createElement(P,{tableId:t,headerHasMultipleLevels:!0,isHeadless:j,defaultCell:{entryInfo:_,entryExpression:z},columns:Q,rows:te,onColumnsUpdate:ae,onRowAdding:ce,onRowsUpdate:ne,onSingleRowUpdate:ue,handlerConfiguration:R,getRowKey:le},o.createElement("div",{className:"context-result"},"<result>"),o.createElement(W,{expression:D,onUpdatingRecursiveExpression:S,onExpressionResetting:I})))},q=n(90),J=n(157),Q=n.n(J),Z=function(e){var t=e.selectedExpression,n=e.onLogicTypeUpdating,c=e.onLogicTypeResetting,i=e.onUpdatingNameAndDataType,s=e.getPlacementRef,l=e.isHeadless,p=void 0!==l&&l,b=e.onUpdatingRecursiveExpression,m=Object(d.useBoxedExpressionEditorI18n)().i18n,O=f.extend(t,{isHeadless:p,onUpdatingNameAndDataType:i,onUpdatingRecursiveExpression:b}),E=function(e){return!f.isEmpty(e)&&e!==r.LogicType.Undefined},x=Object(o.useState)(E(O.logicType)),v=Object(a.a)(x,2),j=v[0],g=v[1];Object(o.useEffect)((function(){g(E(t.logicType))}),[t.logicType]);var C=function(){var e=Object(o.useRef)(null),t=Object(o.useState)("0px"),n=Object(a.a)(t,2),c=n[0],i=n[1],r=Object(o.useState)("0px"),s=Object(a.a)(r,2),l=s[0],u=s[1],d=Object(o.useState)(!1),p=Object(a.a)(d,2),b=p[0],m=p[1],f=Object(o.useCallback)((function(){b&&m(!1)}),[b]),O=Object(o.useCallback)((function(t){e.current&&e.current===t.target&&(t.preventDefault(),i("".concat(t.pageX,"px")),u("".concat(t.pageY,"px")),m(!0))}),[i,u]);return Object(o.useEffect)((function(){return document.addEventListener("click",f),document.addEventListener("contextmenu",f),document.addEventListener("contextmenu",O),function(){document.removeEventListener("click",f),document.removeEventListener("contextmenu",f),document.removeEventListener("contextmenu",O)}})),{contextMenuRef:e,contextMenuXPos:c,contextMenuYPos:l,contextMenuVisibility:b,setContextMenuVisibility:m}}(),T=C.contextMenuRef,h=C.contextMenuXPos,w=C.contextMenuYPos,R=C.contextMenuVisibility,I=C.setContextMenuVisibility,k=Object(o.useMemo)((function(){switch(O.logicType){case r.LogicType.LiteralExpression:return o.createElement(y,O);case r.LogicType.Relation:return o.createElement(M,O);case r.LogicType.Context:return o.createElement(K,Object.assign({},O,{uid:Q()()}));case r.LogicType.DecisionTable:case r.LogicType.Function:case r.LogicType.Invocation:case r.LogicType.List:default:return O.logicType}}),[O.logicType]),D=Object(o.useCallback)((function(){return Object.values(r.LogicType).filter((function(e){return e!==r.LogicType.Undefined}))}),[]),U=Object(o.useCallback)((function(){return f.map(D(),(function(e){return o.createElement(L.a,{key:e,itemId:e},e)}))}),[D]),H=Object(o.useCallback)((function(){return s()}),[s]),B=Object(o.useCallback)((function(e,t){g(!0),n(t)}),[n]),P=Object(o.useCallback)((function(){return o.createElement(u,{title:m.selectLogicType,arrowPlacement:H,className:"logic-type-popover",hasAutoWidth:!0,body:o.createElement(N.a,{onSelect:B},o.createElement(S.a,null,U()))})}),[m.selectLogicType,H,B,U]),W=Object(o.useCallback)((function(){g(!1),I(!1),c()}),[c,I]),z=Object(o.useCallback)((function(){return o.createElement("div",{className:"context-menu-container no-table-context-menu",style:{top:w,left:h}},o.createElement(q.a,{isDisabled:!j,isSmall:!0,variant:q.b.primary,onClick:W},m.clear))}),[j,h,w,W,m.clear]);return o.createElement("div",{className:"logic-type-selector ".concat(A," ").concat(j?"logic-type-selected":"logic-type-not-present"),ref:T},j?k:m.selectExpression,j?null:P(),R?z():null)},$=function(e){var t=Object(o.useRef)(null),n=Object(o.useState)(e.selectedExpression),c=Object(a.a)(n,2),s=c[0],l=c[1],u=Object(o.useCallback)((function(e,t){l((function(n){return Object(i.a)(Object(i.a)({},n),{},{name:e,dataType:t})}))}),[]),d=Object(o.useCallback)((function(e){l((function(t){return Object(i.a)(Object(i.a)({},t),{},{logicType:e})}))}),[]),p=Object(o.useCallback)((function(){l((function(e){var t,n,a={name:e.name,dataType:e.dataType,logicType:r.LogicType.Undefined};return null===(t=window.beeApi)||void 0===t||null===(n=t.resetExpressionDefinition)||void 0===n||n.call(t,a),a}))}),[]),b=Object(o.useCallback)((function(){return t.current}),[]);return o.createElement("div",{className:"expression-container"},o.createElement("div",{className:"expression-name-and-logic-type"},o.createElement("span",{className:"expression-title"},s.name),o.createElement("span",{className:"expression-type"},"(",s.logicType||r.LogicType.Undefined,")")),o.createElement("div",{className:"expression-container-box",ref:t,"data-ouia-component-id":"expression-container"},o.createElement(Z,{selectedExpression:s,onLogicTypeUpdating:d,onLogicTypeResetting:p,onUpdatingNameAndDataType:u,getPlacementRef:b})))},ee=function(e){var t=Object(o.useState)((function(){return f.identity})),n=Object(a.a)(t,2),i=n[0],r=n[1];return o.createElement(c.I18nDictionariesProvider,{defaults:d.boxedExpressionEditorI18nDefaults,dictionaries:d.boxedExpressionEditorDictionaries,initialLocale:navigator.language,ctx:d.BoxedExpressionEditorI18nContext},o.createElement(B.Provider,{value:{currentlyOpenedHandlerCallback:i,setCurrentlyOpenedHandlerCallback:r}},o.createElement($,e.expressionDefinition)))}}},[[161,1,2]]]);
//# sourceMappingURL=main.d2800b24.chunk.js.map