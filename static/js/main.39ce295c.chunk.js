(this["webpackJsonpboxed-expression-editor-showcase"]=this["webpackJsonpboxed-expression-editor-showcase"]||[]).push([[0],{101:function(e,t,n){"use strict";var a=n(130);n.d(t,"BoxedExpressionEditor",(function(){return a.a}));var o=n(8);n.o(o,"DataType")&&n.d(t,"DataType",(function(){return o.DataType}))},108:function(e,t){},109:function(e,t,n){},110:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.Undefined="<Undefined>",e.Any="Any",e.Boolean="boolean",e.Context="context",e.Date="date",e.DateTime="date and time",e.DateTimeDuration="days and time duration",e.Number="number",e.String="string",e.Time="time",e.YearsMonthsDuration="years and months duration"}(a||(a={}))},111:function(e,t){},112:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.Undefined="<Undefined>",e.LiteralExpression="Literal expression",e.Context="Context",e.DecisionTable="Decision Table",e.Relation="Relation",e.Function="Function",e.Invocation="Invocation",e.List="List"}(a||(a={}))},113:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e[e.ColumnInsertLeft=0]="ColumnInsertLeft",e[e.ColumnInsertRight=1]="ColumnInsertRight",e[e.ColumnDelete=2]="ColumnDelete",e[e.RowInsertAbove=3]="RowInsertAbove",e[e.RowInsertBelow=4]="RowInsertBelow",e[e.RowDelete=5]="RowDelete"}(a||(a={}))},130:function(e,t,n){"use strict";n.d(t,"a",(function(){return A}));n(160);var a=n(0),o=(n(161),n(132)),r=n(34),i=n(7),c=n(28),l=(n(162),n(32)),s=n(272),u=n(151),p=n(88),d=n(275),b=(n(163),function(e){var t=e.children,n=e.arrowPlacement,o=e.body,r=e.title,i=e.appendTo;return a.createElement(d.a,{className:"popover-menu-selector",position:"bottom",distance:0,id:"menu-selector",reference:n,appendTo:i,headerContent:a.createElement("div",{className:"selector-menu-title"},r),bodyContent:o},t)}),m=n(8),f=(n(168),n(265)),O=(n(169),n(50)),E=n(274),x=n(5),y=function(e){var t,n,o,r=e.children,s=e.appendTo,u=e.arrowPlacement,p=e.title,d=e.nameField,f=e.dataTypeField,y=e.selectedDataType,v=void 0===y?m.DataType.Undefined:y,T=e.selectedExpressionName,j=e.onExpressionUpdate,g=Object(l.useBoxedExpressionEditorI18n)().i18n;p=null!==(t=p)&&void 0!==t?t:g.editExpression,d=null!==(n=d)&&void 0!==n?n:g.name,f=null!==(o=f)&&void 0!==o?o:g.dataType;var C=Object(a.useState)(!1),h=Object(i.a)(C,2),w=h[0],D=h[1],I=Object(a.useState)(v),L=Object(i.a)(I,2),k=L[0],N=L[1],R=Object(a.useState)(T),S=Object(i.a)(R,2),B=S[0],U=S[1],P=Object(a.useCallback)((function(e){U(e.target.value),"blur"===e.type&&j({name:e.target.value,dataType:k})}),[k,j]),A=Object(a.useCallback)((function(e,t){D(!1),N(t),j({name:B,dataType:t})}),[B,j]),M=Object(a.useCallback)((function(){return c.map(Object.values(m.DataType),(function(e){return a.createElement(O.a,{key:e,value:e},e)}))}),[]),F=Object(a.useCallback)((function(e){var t;try{t=new RegExp(e.target.value,"i")}catch(n){return M()}return""!==e.target.value?M().filter((function(e){return t.test(e.props.value)})):M()}),[M]),V=Object(a.useCallback)((function(e){return D(e)}),[]);return a.createElement(b,{title:p,arrowPlacement:u,appendTo:s,body:a.createElement("div",{className:"edit-expression-menu"},a.createElement("div",{className:"expression-name"},a.createElement("label",null,d),a.createElement("input",{type:"text",id:"expression-name",value:B,onChange:P,onBlur:P,className:"form-control pf-c-form-control",placeholder:"Expression Name"})),a.createElement("div",{className:"expression-data-type"},a.createElement("label",null,f),a.createElement(E.a,{variant:x.e.typeahead,typeAheadAriaLabel:g.choose,onToggle:V,onSelect:A,onFilter:F,isOpen:w,selections:k,hasInlineFilter:!0,inlineFilterPlaceholderText:g.choose},M())))},r)},v=function(e){var t=e.content,n=e.dataType,o=e.name,r=e.onUpdatingNameAndDataType,c=e.isHeadless,l=void 0!==c&&c,s=Object(a.useState)(o),u=Object(i.a)(s,2),p=u[0],d=u[1],b=Object(a.useState)(n),O=Object(i.a)(b,2),E=O[0],x=O[1],v=Object(a.useState)(t),T=Object(i.a)(v,2),j=T[0],g=T[1];Object(a.useEffect)((function(){var e,t;null===(e=window.beeApi)||void 0===e||null===(t=e.broadcastLiteralExpressionDefinition)||void 0===t||t.call(e,{name:p,dataType:E,logicType:m.LogicType.LiteralExpression,content:j})}),[p,E,j]);var C=Object(a.useCallback)((function(e){var t=e.dataType,n=e.name;d(n),x(t),r&&r(n,t)}),[r]),h=Object(a.useCallback)((function(e){var t=e.target.value;g(t)}),[]),w=Object(a.useCallback)((function(){return document.querySelector(".literal-expression-header")}),[]),D=Object(a.useCallback)((function(){return a.createElement("div",{className:"literal-expression-header"},a.createElement("p",{className:"expression-name"},p),a.createElement("p",{className:"expression-data-type"},"(",E,")"))}),[E,p]);return a.createElement("div",{className:"literal-expression"},l?null:D(),a.createElement("div",{className:"literal-expression-body"},a.createElement(f.a,{defaultValue:j,onBlur:h,"aria-label":"literal-expression-content"})),a.createElement(y,{arrowPlacement:w,selectedExpressionName:p,selectedDataType:E,onExpressionUpdate:C}))};n(180),n(181);var T=n(9),j=(n(182),n(92)),g=n(279),C=n(269),h=n(276),w=n(270),D=n(271),I=n(273),L=(n(186),n(266)),k=n(267),N=n(268),R=n(277),S=function(e){var t=e.handlerConfiguration,n=e.allowedOperations,o=e.onOperation;return a.createElement(L.a,{className:"table-handler-menu",onSelect:function(e,t){return o(t)}},t.map((function(e){return a.createElement(k.a,{key:e.group,label:e.group,className:c.every(e.items,(function(e){return!c.includes(n,e.type)}))?"no-allowed-actions-in-group":""},a.createElement(N.a,null,e.items.map((function(e){return a.createElement(R.a,{key:e.type,itemId:e.type,isDisabled:!c.includes(n,e.type)},e.name)}))))})))},B=function(e){var t=e.columnPrefix,n=e.onCellsUpdate,o=e.onColumnsUpdate,r=e.cells,s=e.columns,u=e.handlerConfiguration,p="#",b=Object(l.useBoxedExpressionEditorI18n)().i18n,f=Object(a.useState)([{label:p,accessor:p,disableResizing:!0,width:60}].concat(Object(T.a)(c.map(s,(function(e){return{label:e.label,accessor:e.name,dataType:e.dataType}}))))),O=Object(i.a)(f,2),E=O[0],x=O[1],v=Object(a.useState)(Object(T.a)(c.map(r,(function(e,t){return e[p]=""+(t+1),e})))),L=Object(i.a)(v,2),k=L[0],N=L[1],R=Object(a.useState)(!1),B=Object(i.a)(R,2),U=B[0],P=B[1],A=Object(a.useState)(document.body),M=Object(i.a)(A,2),F=M[0],V=M[1],z=Object(a.useState)(c.values(m.TableOperation).map((function(e){return parseInt(e.toString())}))),J=Object(i.a)(z,2),Y=J[0],_=J[1],q=Object(a.useState)(-1),H=Object(i.a)(q,2),X=H[0],W=H[1],G=Object(a.useState)(-1),K=Object(i.a)(G,2),Q=K[0],Z=K[1],$=Object(a.useCallback)((function(e){return function(t){var n=t.name,a=void 0===n?"":n,r=t.dataType,i=void 0===r?m.DataType.Undefined:r;x((function(t){var n=Object(T.a)(t);return n[e].label=a,n[e].dataType=i,o(c.map(n,(function(e){return{name:e.accessor,label:e.label,dataType:e.dataType}}))),n}))}}),[o]),ee=Object(a.useCallback)((function(e,t,a){N((function(o){var r=Object(T.a)(o);return r[e][t]=a,n(r),r}))}),[n]),te=Object(a.useCallback)((function(e){var n="".concat(t).concat(e);return c.find(E,(function(e){return c.isEqual(n,e.accessor)}))?te(e+1):n}),[t,E]),ne=Object(a.useCallback)((function(e){switch(e){case m.TableOperation.ColumnInsertLeft:x((function(e){return[].concat(Object(T.a)(e.slice(0,X)),[{accessor:te(e.length),label:te(e.length),dataType:m.DataType.Undefined}],Object(T.a)(e.slice(X)))}));break;case m.TableOperation.ColumnInsertRight:x((function(e){return[].concat(Object(T.a)(e.slice(0,X+1)),[{accessor:te(e.length),label:te(e.length),dataType:m.DataType.Undefined}],Object(T.a)(e.slice(X+1)))}));break;case m.TableOperation.ColumnDelete:x((function(e){return[].concat(Object(T.a)(e.slice(0,X)),Object(T.a)(e.slice(X+1)))}));break;case m.TableOperation.RowInsertAbove:N((function(e){return[].concat(Object(T.a)(e.slice(0,Q)),[{"#":"2"}],Object(T.a)(e.slice(Q)))}));break;case m.TableOperation.RowInsertBelow:N((function(e){return[].concat(Object(T.a)(e.slice(0,Q+1)),[{}],Object(T.a)(e.slice(Q+1)))}));break;case m.TableOperation.RowDelete:N((function(e){return[].concat(Object(T.a)(e.slice(0,Q)),Object(T.a)(e.slice(Q+1)))}))}P(!1)}),[te,X,Q]),ae=Object(j.useTable)({columns:E,data:k,defaultColumn:{Cell:function(e){return e.column.canResize?function(e){var t=e.value,n=e.row.index,o=e.column.id,r=e.onCellUpdate,c=a.useState(t),l=Object(i.a)(c,2),s=l[0],u=l[1],p=Object(a.useCallback)((function(e){u(e.target.value)}),[]),d=Object(a.useCallback)((function(){r(n,o,s)}),[o,n,s,r]);return a.createElement("textarea",{value:s,onChange:p,onBlur:d})}(e):e.value}},onCellUpdate:ee,getThProps:function(e){return{onContextMenu:function(t){t.preventDefault();var n=[m.TableOperation.ColumnInsertLeft,m.TableOperation.ColumnInsertRight];E.length>2&&n.push(m.TableOperation.ColumnDelete),_(n),V(t.target),P(!0),W(e)}}},getTdProps:function(e,t){return{onContextMenu:function(n){n.preventDefault();var a=[];0!==e&&(a=[m.TableOperation.ColumnInsertLeft,m.TableOperation.ColumnInsertRight],E.length>2&&a.push(m.TableOperation.ColumnDelete)),a=[].concat(Object(T.a)(a),[m.TableOperation.RowInsertAbove,m.TableOperation.RowInsertBelow]),k.length>2&&a.push(m.TableOperation.RowDelete),_(a),V(n.target),P(!0),W(e),Z(t)}}}},j.useBlockLayout,j.useResizeColumns),oe=Object(a.useCallback)((function(){return a.createElement(d.a,{className:"table-handler",hasNoPadding:!0,showClose:!1,distance:5,position:"right",isVisible:U,shouldClose:function(){return P(!1)},shouldOpen:function(e){return null===e||void 0===e?void 0:e()},reference:function(){return F},bodyContent:a.createElement(S,{handlerConfiguration:u,allowedOperations:Y,onOperation:ne})})}),[U,u,Y,ne,F]);return a.createElement("div",{className:"table-component"},a.createElement(g.a,Object.assign({variant:"compact"},ae.getTableProps()),a.createElement(C.a,{noWrap:!0},a.createElement("tr",null,ae.headers.map((function(e,t){return e.canResize?a.createElement(y,{title:b.editRelation,selectedExpressionName:e.label,selectedDataType:e.dataType,onExpressionUpdate:$(t),key:t},a.createElement(h.a,Object.assign({},e.getHeaderProps(),ae.getThProps(t),{key:t}),a.createElement("div",{className:"header-cell"},a.createElement("div",null,a.createElement("p",{className:"pf-u-text-truncate"},e.label),a.createElement("p",{className:"pf-u-text-truncate data-type"},"(",e.dataType,")")),a.createElement("div",Object.assign({className:"pf-c-drawer"},e.getResizerProps()),a.createElement("div",{className:"pf-c-drawer__splitter pf-m-vertical"},a.createElement("div",{className:"pf-c-drawer__splitter-handle"})))))):a.createElement(h.a,Object.assign({},e.getHeaderProps(),{key:t}),a.createElement("div",{className:"header-cell"},e.label))})))),a.createElement(w.a,ae.getTableBodyProps(),ae.rows.map((function(e,t){return ae.prepareRow(e),a.createElement(D.a,Object.assign({},e.getRowProps(),{key:t}),e.cells.map((function(e,n){return a.createElement(I.a,Object.assign({},e.getCellProps(),ae.getTdProps(n,t),{key:n}),e.render("Cell"))})))})))),U?oe():null)},U=function(e){var t="column-1",n=Object(l.useBoxedExpressionEditorI18n)().i18n,o=Object(a.useState)(void 0===e.columns?[{name:t,label:t,dataType:m.DataType.Undefined}]:e.columns),c=Object(i.a)(o,2),s=c[0],u=c[1],p=Object(a.useState)(void 0===e.cells?[{}]:e.cells),d=Object(i.a)(p,2),b=d[0],f=d[1],O=[{group:n.columns,items:[{name:n.columnOperations.insertLeft,type:m.TableOperation.ColumnInsertLeft},{name:n.columnOperations.insertRight,type:m.TableOperation.ColumnInsertRight},{name:n.columnOperations.delete,type:m.TableOperation.ColumnDelete}]},{group:n.rows,items:[{name:n.rowOperations.insertAbove,type:m.TableOperation.RowInsertAbove},{name:n.rowOperations.insertBelow,type:m.TableOperation.RowInsertBelow},{name:n.rowOperations.delete,type:m.TableOperation.RowDelete}]}];return Object(a.useEffect)((function(){var t,n;null===(t=window.beeApi)||void 0===t||null===(n=t.broadcastRelationExpressionDefinition)||void 0===n||n.call(t,Object(r.a)(Object(r.a)({},e),{},{columns:s,cells:b}))}),[e,s,b]),a.createElement("div",{className:"relation-expression"},a.createElement(B,{columnPrefix:"column-",columns:s,cells:b,onColumnsUpdate:u,onCellsUpdate:f,handlerConfiguration:O}))},P=function(e){var t=Object(l.useBoxedExpressionEditorI18n)().i18n,n=Object(a.useState)(!c.isEmpty(e.selectedExpression.logicType)||e.selectedExpression.logicType===m.LogicType.Undefined),o=Object(i.a)(n,2),d=o[0],f=o[1],O=Object(a.useState)(e.selectedExpression),E=Object(i.a)(O,2),x=E[0],y=E[1],T=function(){var e=Object(a.useRef)(null),t=Object(a.useState)("0px"),n=Object(i.a)(t,2),o=n[0],r=n[1],c=Object(a.useState)("0px"),l=Object(i.a)(c,2),s=l[0],u=l[1],p=Object(a.useState)(!1),d=Object(i.a)(p,2),b=d[0],m=d[1],f=Object(a.useCallback)((function(){b&&m(!1)}),[b]),O=Object(a.useCallback)((function(t){e.current&&e.current===t.target&&(t.preventDefault(),r("".concat(t.pageX,"px")),u("".concat(t.pageY,"px")),m(!0))}),[r,u]);return Object(a.useEffect)((function(){return document.addEventListener("click",f),document.addEventListener("contextmenu",O),function(){document.removeEventListener("click",f),document.removeEventListener("contextmenu",O)}})),{contextMenuRef:e,contextMenuXPos:o,contextMenuYPos:s,contextMenuVisibility:b,setContextMenuVisibility:m}}(),j=T.contextMenuRef,g=T.contextMenuXPos,C=T.contextMenuYPos,h=T.contextMenuVisibility,w=T.setContextMenuVisibility,D=Object(a.useCallback)((function(e,t){f(!0);var n=t.children;y((function(e){return Object(r.a)(Object(r.a)({},e),{},{logicType:n})}))}),[]),I=Object(a.useCallback)((function(){f(!1),w(!1),y((function(e){var t,n,a={name:e.name,dataType:e.dataType,logicType:m.LogicType.Undefined};return null===(t=window.beeApi)||void 0===t||null===(n=t.resetExpressionDefinition)||void 0===n||n.call(t,a),a}))}),[w]),L=Object(a.useCallback)((function(){return Object.values(m.LogicType).filter((function(e){return e!==m.LogicType.Undefined}))}),[]),k=Object(a.useCallback)((function(){return c.map(L(),(function(e){return a.createElement(s.a,{key:e},e)}))}),[L]),N=Object(a.useCallback)((function(){return document.querySelector(".expression-container-box")}),[]),R=Object(a.useCallback)((function(){return a.createElement(b,{title:t.selectLogicType,arrowPlacement:N,body:a.createElement(u.a,{onSelect:D},k())})}),[t.selectLogicType,N,D,k]),S=Object(a.useCallback)((function(e,t){y((function(n){return Object(r.a)(Object(r.a)({},n),{},{name:e,dataType:t})}))}),[]),B=Object(a.useMemo)((function(){switch(x.logicType){case m.LogicType.LiteralExpression:return a.createElement(v,Object.assign({onUpdatingNameAndDataType:S},x));case m.LogicType.Relation:return a.createElement(U,x);case m.LogicType.Context:case m.LogicType.DecisionTable:case m.LogicType.Function:case m.LogicType.Invocation:case m.LogicType.List:default:return x.logicType}}),[x,S]),P=Object(a.useCallback)((function(){return a.createElement("div",{className:"context-menu-container",style:{top:C,left:g}},a.createElement(p.a,{isDisabled:!d,isSmall:!0,variant:p.b.primary,onClick:I},t.clear))}),[d,g,C,I,t.clear]);return a.createElement("div",{className:"expression-container"},a.createElement("span",{className:"expression-title"},x.name),a.createElement("span",{className:"expression-type"},"(",x.logicType||m.LogicType.Undefined,")"),a.createElement("div",{className:"expression-container-box ".concat(d?"logic-type-selected":"logic-type-not-present"),ref:j},x.logicType?B:t.selectExpression),d?null:R(),h?P():null)},A=function(e){return a.createElement(o.I18nDictionariesProvider,{defaults:l.boxedExpressionEditorI18nDefaults,dictionaries:l.boxedExpressionEditorDictionaries,initialLocale:navigator.language,ctx:l.BoxedExpressionEditorI18nContext},a.createElement(P,e.expressionDefinition))}},131:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return u}));var a=n(0),o=n(34),r=n(133),i=Object(o.a)(Object(o.a)({},r.en),{},{choose:"Choose...",clear:"Clear",columnOperations:{delete:"Delete",insertLeft:"Insert left",insertRight:"Insert right"},columns:"COLUMNS",context:"Context",dataType:"Data Type",decisionTable:"Decision Table",editExpression:"Edit Expression",editRelation:"Edit Relation",function:"Function",invocation:"Invocation",list:"List",literalExpression:"Literal expression",name:"Name",relation:"Relation",rowOperations:{delete:"Delete",insertAbove:"Insert above",insertBelow:"Insert below"},rows:"ROWS",selectExpression:"Select expression",selectLogicType:"Select logic type"}),c={locale:"en",dictionary:i},l=new Map([["en",i]]),s=a.createContext({});function u(){return Object(a.useContext)(s)}},153:function(e,t,n){"use strict";n.r(t),n.d(t,"App",(function(){return c}));var a=n(7),o=n(0),r=n(36),i=(n(159),n(101)),c=function(){var e={name:"Expression Name",dataType:i.DataType.Undefined},t=Object(o.useState)(e),n=Object(a.a)(t,2),r=n[0],c=n[1],l={selectedExpression:e};return window.beeApi={resetExpressionDefinition:function(e){return c(e)},broadcastLiteralExpressionDefinition:function(e){return c(e)},broadcastRelationExpressionDefinition:function(e){return c(e)}},o.createElement("div",{className:"showcase"},o.createElement("div",{className:"boxed-expression"},o.createElement(i.BoxedExpressionEditor,{expressionDefinition:l})),o.createElement("div",{className:"updated-json"},o.createElement("p",null,"\u26a0 Currently, JSON gets updated only for literal expression and relation logic types"),o.createElement("pre",null,JSON.stringify(r,null,2))))};r.render(o.createElement(c,null),document.getElementById("root"))},159:function(e,t,n){},160:function(e,t,n){},162:function(e,t,n){},163:function(e,t,n){},168:function(e,t,n){},169:function(e,t,n){},180:function(e,t,n){},182:function(e,t,n){},186:function(e,t,n){},32:function(e,t,n){"use strict";var a=n(108);n.o(a,"BoxedExpressionEditorI18nContext")&&n.d(t,"BoxedExpressionEditorI18nContext",(function(){return a.BoxedExpressionEditorI18nContext})),n.o(a,"boxedExpressionEditorDictionaries")&&n.d(t,"boxedExpressionEditorDictionaries",(function(){return a.boxedExpressionEditorDictionaries})),n.o(a,"boxedExpressionEditorI18nDefaults")&&n.d(t,"boxedExpressionEditorI18nDefaults",(function(){return a.boxedExpressionEditorI18nDefaults})),n.o(a,"useBoxedExpressionEditorI18n")&&n.d(t,"useBoxedExpressionEditorI18n",(function(){return a.useBoxedExpressionEditorI18n}));var o=n(131);n.d(t,"BoxedExpressionEditorI18nContext",(function(){return o.a})),n.d(t,"boxedExpressionEditorDictionaries",(function(){return o.b})),n.d(t,"boxedExpressionEditorI18nDefaults",(function(){return o.c})),n.d(t,"useBoxedExpressionEditorI18n",(function(){return o.d}))},8:function(e,t,n){"use strict";n(109);var a=n(110);n.d(t,"DataType",(function(){return a.a}));var o=n(111);n.o(o,"LogicType")&&n.d(t,"LogicType",(function(){return o.LogicType})),n.o(o,"TableOperation")&&n.d(t,"TableOperation",(function(){return o.TableOperation}));var r=n(112);n.d(t,"LogicType",(function(){return r.a}));var i=n(113);n.d(t,"TableOperation",(function(){return i.a}))}},[[153,1,2]]]);
//# sourceMappingURL=main.39ce295c.chunk.js.map